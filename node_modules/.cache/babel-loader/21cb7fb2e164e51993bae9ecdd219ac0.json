{"remainingRequest":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\babel-loader\\lib\\index.js!D:\\inventarioInformatico\\stock\\stock\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\inventarioInformatico\\stock\\stock\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\inventarioInformatico\\stock\\stock\\src\\views\\productos.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\inventarioInformatico\\stock\\stock\\src\\views\\productos.vue","mtime":1648230331833},{"path":"D:\\inventarioInformatico\\stock\\stock\\babel.config.js","mtime":1645539073406},{"path":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647002043141},{"path":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\babel-loader\\lib\\index.js","mtime":1645539058368},{"path":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647002043141},{"path":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\vue-loader\\lib\\index.js","mtime":1645539059241}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L2ludmVudGFyaW9JbmZvcm1hdGljby9zdG9jay9zdG9jay9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkQ6L2ludmVudGFyaW9JbmZvcm1hdGljby9zdG9jay9zdG9jay9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IG5hdmJhciBmcm9tICIuLi9jb21wb25lbnRzL25hdmJhci52dWUiOwppbXBvcnQgeyByZXF1aXJlZCwgbWluTGVuZ3RoIH0gZnJvbSAidnVlbGlkYXRlL2xpYi92YWxpZGF0b3JzIjsKaW1wb3J0ICdqcXVlcnkvZGlzdC9qcXVlcnkubWluLmpzJzsKaW1wb3J0ICdib290c3RyYXAvZGlzdC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MnOwppbXBvcnQgImRhdGF0YWJsZXMubmV0LWR0L2pzL2RhdGFUYWJsZXMuZGF0YVRhYmxlcyI7CmltcG9ydCAiZGF0YXRhYmxlcy5uZXQtZHQvY3NzL2pxdWVyeS5kYXRhVGFibGVzLm1pbi5jc3MiOwppbXBvcnQgJCBmcm9tICdqcXVlcnknOwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOyAvL0VYQ0VMIGVYcG9ydGFjacOzbgoKaW1wb3J0ICogYXMgWExTWCBmcm9tICd4bHN4L3hsc3gubWpzJzsKLyogbG9hZCAnZnMnIGZvciByZWFkRmlsZSBhbmQgd3JpdGVGaWxlIHN1cHBvcnQgKi8KCmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJzsKWExTWC5zZXRfZnMoZnMpOwovKiBsb2FkIHRoZSBjb2RlcGFnZSBzdXBwb3J0IGxpYnJhcnkgZm9yIGV4dGVuZGVkIHN1cHBvcnQgd2l0aCBvbGRlciBmb3JtYXRzICAqLwoKaW1wb3J0ICogYXMgY3BleGNlbCBmcm9tICd4bHN4L2Rpc3QvY3BleGNlbC5mdWxsLm1qcyc7ClhMU1guc2V0X2NwdGFibGUoY3BleGNlbCk7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYWJvdXQiLAogIGNvbXBvbmVudHM6IHsKICAgIG5hdmJhcjogbmF2YmFyCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy9EYXRvcyBwYXJhIGFncmVnYXIgdW4gbnVldm8gbWVtbyAoaGlzdG9yaWFsKSBjb24gdi1tb2RlbAogICAgICBwZXN0YcOxYTogJ3Byb2R1Y3RvcycsCiAgICAgIHByb2R1Y3RvczogW10sCiAgICAgIGhpc3RvcmlhbDogW10sCiAgICAgIG9yZGVuZXM6IFtdLAogICAgICBib2RlZ2FzOiBbXSwKICAgICAgYm9kOiBbXSwKICAgICAgZGV0YWxsZUhpc3Q6IFtdLAogICAgICBkZXRhbGxlT3JkZW46IFtdLAogICAgICBpbWFnZW5lczogW10sCiAgICAgIC8vVmFyaWFibGVzIGRlbCBBR1JFR0FSCiAgICAgIGNvZGlnb0FncmVnYXI6ICcnLAogICAgICBwcm9kdWN0b0FncmVnYXI6ICcnLAogICAgICBtYXJjYUFncmVnYXI6ICcnLAogICAgICBkZXNjcmlwY2lvbkFncmVnYTogJycsCiAgICAgIHN0b2NrQWdyZWdhOiAwLAogICAgICBpbWFnZW46IG51bGwsCiAgICAgIC8vVmFyaWFibGUgcGFyYSByZWNvbm9jZXIgdW4gcHJvZHVjdG8KICAgICAgY29kaWdvQmFycmE6ICcnLAogICAgICAvL1ZhcmlhYmxlcyBwYXJhIEVESVRBUgogICAgICBpbWFnZW5EaXI6ICcnLAogICAgICBwcm9kdWN0bzogJycsCiAgICAgIG1hcmNhOiAnJywKICAgICAgZGVzY3JpcGNpb246ICcnLAogICAgICBzdG9ja0JvZGVnYUVkaXRhcjogMCwKICAgICAgc3RvY2tDcml0aWNvRWRpdGFyOiAwLAogICAgICBub21Cb2RlZ2FFZGl0YXI6ICcnLAogICAgICBzdG9ja1JFRzogMCwKICAgICAgLy9WYXJpYWJsZSBIaXN0b3JpYWwKICAgICAgaGlzdG86IDAsCiAgICAgIG1lbW9IaXN0OiAwLAogICAgICAvL1ZhcmlhYmxlcyBkZSBsYXMgYWxlcnRhcwogICAgICBkaXNtaXNzU2VjczogNSwKICAgICAgZGlzbWlzc0NvdW50RG93bjogMCwKICAgICAgbWVuc2FqZTogewogICAgICAgIGNvbG9yOiAnJywKICAgICAgICB0ZXh0bzogJycKICAgICAgfQogICAgfTsKICB9LAogIHZhbGlkYXRpb25zOiB7CiAgICAvL1ZhbGlkYWNpb25lcyBkZSBsb3MgaW5wdXQKICAgIGNvZGlnb0FncmVnYXI6IHsKICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkCiAgICB9LAogICAgcHJvZHVjdG9BZ3JlZ2FyOiB7CiAgICAgIHJlcXVpcmVkOiByZXF1aXJlZAogICAgfSwKICAgIG1hcmNhQWdyZWdhcjogewogICAgICByZXF1aXJlZDogcmVxdWlyZWQKICAgIH0sCiAgICBkZXNjcmlwY2lvbkFncmVnYTogewogICAgICByZXF1aXJlZDogcmVxdWlyZWQKICAgIH0sCiAgICBwcm9kdWN0bzogewogICAgICByZXF1aXJlZDogcmVxdWlyZWQKICAgIH0sCiAgICBtYXJjYTogewogICAgICByZXF1aXJlZDogcmVxdWlyZWQKICAgIH0sCiAgICBkZXNjcmlwY2lvbjogewogICAgICByZXF1aXJlZDogcmVxdWlyZWQKICAgIH0sCiAgICBzdG9ja0FncmVnYTogewogICAgICByZXF1aXJlZDogcmVxdWlyZWQKICAgIH0sCiAgICBzdG9ja1JFRzogewogICAgICByZXF1aXJlZDogcmVxdWlyZWQKICAgIH0KICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZShbJ3Rva2VuJywgJ3VzdWFyaW9EQiddKSksCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuY2FyZ2FyUHJvZHVjdG9zKCk7CiAgICB0aGlzLmNhcmdhckJvZGVnYXMoKTsKICAgIHRoaXMub2J0ZW5lckltYWdlbmVzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL0Z1bmNpw7NuIHF1ZSBwZXJtaXRlIGV4cG9ydGFyIGxhcyB0YWJsYXMgZW4gZXhjZWwKICAgIGV4cG9ydGFyOiBmdW5jdGlvbiBleHBvcnRhcihudW0pIHsKICAgICAgdmFyIGRhdGEgPSBbXTsKICAgICAgdmFyIGZpbGVuYW1lID0gInBsYW5pbGxhIjsKCiAgICAgIGlmIChudW0gPT09IDEpIHsKICAgICAgICB2YXIgYXJyZWdsYWRvID0gdGhpcy5wcm9kdWN0b3MubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBDb2RpZ29CYXJyYTogaXRlbS5jb2RpZ29CYXJyYSwKICAgICAgICAgICAgUHJvZHVjdG86IGl0ZW0ubm9tUHJvZHVjdG8sCiAgICAgICAgICAgIE1hcmNhOiBpdGVtLm1hcmNhLAogICAgICAgICAgICBTdG9jazogaXRlbS5zdG9jawogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgICBkYXRhID0gWExTWC51dGlscy5qc29uX3RvX3NoZWV0KGFycmVnbGFkbyk7CiAgICAgICAgZmlsZW5hbWUgPSAnUHJvZHVjdG9zJzsKICAgICAgfSBlbHNlIGlmIChudW0gPT09IDIpIHsKICAgICAgICB2YXIgYXJyZWdsYWRvID0gdGhpcy5oaXN0b3JpYWwubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBNZW1vOiBpdGVtLm1lbW8sCiAgICAgICAgICAgIEZ1bmNpb25hcmlvOiBpdGVtLm5vbUZ1bmNpb25hcmlvLAogICAgICAgICAgICBEZXBlbmRlbmNpYTogaXRlbS5ub21EZXBlbmRlbmNpYSwKICAgICAgICAgICAgRmVjaGE6IGl0ZW0uZmVjaGEKICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgICAgZGF0YSA9IFhMU1gudXRpbHMuanNvbl90b19zaGVldChhcnJlZ2xhZG8pOwoKICAgICAgICBpZiAoYXJyZWdsYWRvWzBdKSB7CiAgICAgICAgICBmaWxlbmFtZSA9ICdIaXN0b3JpYWwnICsgdGhpcy5jb2RpZ29CYXJyYTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZmlsZW5hbWUgPSAnSGlzdG9yaWFsJzsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAobnVtID09PSAzKSB7CiAgICAgICAgdmFyIGFycmVnbGFkbyA9IHRoaXMuZGV0YWxsZUhpc3QubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBQcm9kdWN0bzogaXRlbS5ub21Qcm9kdWN0bywKICAgICAgICAgICAgQ29kaWdvQmFycmE6IGl0ZW0uY29kaWdvQmFycmEsCiAgICAgICAgICAgIENhbnRpZGFkOiBpdGVtLmNhbnRpZGFkCiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICAgIGRhdGEgPSBYTFNYLnV0aWxzLmpzb25fdG9fc2hlZXQoYXJyZWdsYWRvKTsKICAgICAgICBmaWxlbmFtZSA9ICdNZW1vJyArIHRoaXMubWVtb0hpc3Q7CiAgICAgIH0gZWxzZSBpZiAobnVtID09PSA0KSB7CiAgICAgICAgdmFyIGFycmVnbGFkbyA9IHRoaXMub3JkZW5lcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIEPDs2RpZ286IGl0ZW0uY29kT3JkZW4sCiAgICAgICAgICAgIEJvZGVnYTogaXRlbS5ub21Cb2RlZ2EsCiAgICAgICAgICAgIFByb3ZlZWRvcjogaXRlbS5wcm92ZWVkb3IsCiAgICAgICAgICAgIEZlY2hhOiBpdGVtLmZlY2hhCiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICAgIGRhdGEgPSBYTFNYLnV0aWxzLmpzb25fdG9fc2hlZXQoYXJyZWdsYWRvKTsKCiAgICAgICAgaWYgKGFycmVnbGFkb1swXSkgewogICAgICAgICAgZmlsZW5hbWUgPSAnT3JkZW5lcycgKyB0aGlzLmNvZGlnb0JhcnJhOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmaWxlbmFtZSA9ICdPcmRlbmVzJzsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAobnVtID09PSA1KSB7CiAgICAgICAgdmFyIGFycmVnbGFkbyA9IHRoaXMuZGV0YWxsZU9yZGVuLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgUHJvZHVjdG86IGl0ZW0ubm9tUHJvZHVjdG8sCiAgICAgICAgICAgIENvZGlnb0JhcnJhOiBpdGVtLmNvZGlnb0JhcnJhLAogICAgICAgICAgICBDYW50aWRhZDogaXRlbS5jYW50aWRhZAogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgICBkYXRhID0gWExTWC51dGlscy5qc29uX3RvX3NoZWV0KGFycmVnbGFkbyk7CiAgICAgICAgZmlsZW5hbWUgPSAnT3JkZW4nICsgdGhpcy5oaXN0bzsKICAgICAgfQoKICAgICAgdmFyIHdvcmtib29rID0gWExTWC51dGlscy5ib29rX25ldygpOwogICAgICBYTFNYLnV0aWxzLmJvb2tfYXBwZW5kX3NoZWV0KHdvcmtib29rLCBkYXRhLCBmaWxlbmFtZSk7CiAgICAgIFhMU1gud3JpdGVGaWxlKHdvcmtib29rLCAiIi5jb25jYXQoZmlsZW5hbWUsICIueGxzeCIpKTsKICAgIH0sCiAgICAvL0Z1bmNpb24gcXVlIGNhcmdhIHRvZG9zIGxvcyBwcm9kdWN0b3MgZGVsIHNpc3RlbWEKICAgIGNhcmdhclByb2R1Y3RvczogZnVuY3Rpb24gY2FyZ2FyUHJvZHVjdG9zKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbgogICAgICAgIH0KICAgICAgfTsKICAgICAgdGhpcy5heGlvcy5nZXQoJ2FwaS9vYnRlbmVyUHJvZHVjdG9zU29sb3MnLCBjb25maWcpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLnByb2R1Y3RvcyA9IHJlcy5kYXRhOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzLmFsZXJ0YSgnZGFuZ2VyJywgJ05vIHNlIGhhbiBwb2RpZG8gY2FyZ2FyIGxvcyBQcm9kdWN0b3MnKTsKICAgICAgfSk7CiAgICB9LAogICAgLy9GdW5jacOzbiBxdWUgc2UgZW5jYXJnYSBkZSBvYnRlbmVyIHRvZGFzIGxhcyBib2RlZ2FzIGV4aXN0ZW50ZXMKICAgIGNhcmdhckJvZGVnYXM6IGZ1bmN0aW9uIGNhcmdhckJvZGVnYXMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbgogICAgICAgIH0KICAgICAgfTsKICAgICAgdGhpcy5heGlvcy5nZXQoJ2FwaS9vYnRlbmVyYm9kZWdhcycsIGNvbmZpZykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMyLmJvZCA9IHJlcy5kYXRhOwogICAgICAgIF90aGlzMi5ub21Cb2RlZ2FFZGl0YXIgPSByZXMuZGF0YVswXS5ub21Cb2RlZ2E7CgogICAgICAgIF90aGlzMi5sbGVuYXJCb2RlZ2FzKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgX3RoaXMyLmFsZXJ0YSgnZGFuZ2VyJywgJ05vIHNlIGhhbiBwb2RpZG8gY2FyZ2FyIGxhcyBib2RlZ2FzJyk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vRnVuY2nDs24gcXVlIHNlIGVuY2FyZ2EgZGUgZXN0YWJsZWNlciBlbCBzdG9jayBkZSBlc3RhcyBib2RlZ2FzCiAgICBsbGVuYXJCb2RlZ2FzOiBmdW5jdGlvbiBsbGVuYXJCb2RlZ2FzKCkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYm9kLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5ib2RlZ2FzLnB1c2goewogICAgICAgICAgbm9tQm9kZWdhOiB0aGlzLmJvZFtpXS5ub21Cb2RlZ2EsCiAgICAgICAgICBzdG9ja0JvZGVnYTogMSwKICAgICAgICAgIHN0b2NrQ3JpdGljbzogMQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy9GdW5jacOzbiBwYXJhIHJlZ3Jlc2FyIGEgbGEgdmlzdGEgaW5pY2lhbAogICAgVm9sdmVyOiBmdW5jdGlvbiBWb2x2ZXIoKSB7CiAgICAgICQoJyNoaXN0b3JpYWwnKS5EYXRhVGFibGUoKS5kZXN0cm95KCk7CiAgICAgICQoJyNvcmRlbmVzJykuRGF0YVRhYmxlKCkuZGVzdHJveSgpOwogICAgICB0aGlzLmltYWdlbiA9IG51bGw7CiAgICAgIHRoaXMucGVzdGHDsWEgPSAncHJvZHVjdG9zJzsKICAgICAgdGhpcy5jYXJnYXJQcm9kdWN0b3MoKTsKICAgICAgdGhpcy5vYnRlbmVySW1hZ2VuZXMoKTsKICAgICAgJCgnI3Byb2R1Y3RvcycpLkRhdGFUYWJsZSgpOwogICAgfSwKICAgIFZvbHZlckhpc3Q6IGZ1bmN0aW9uIFZvbHZlckhpc3QoKSB7CiAgICAgICQoJyNkZXRhbGxlSGlzdCcpLkRhdGFUYWJsZSgpLmRlc3Ryb3koKTsKICAgICAgdGhpcy5wZXN0YcOxYSA9ICdoaXN0b3JpYWwnOwogICAgICB0aGlzLmNhcmdhckhpc3RvcmlhbCgpOwogICAgICAkKCcjaGlzdG9yaWFsJykuRGF0YVRhYmxlKCk7CiAgICB9LAogICAgVm9sdmVyT1JEOiBmdW5jdGlvbiBWb2x2ZXJPUkQoKSB7CiAgICAgICQoJyNkZXRhbGxlT3JkZW4nKS5EYXRhVGFibGUoKS5kZXN0cm95KCk7CiAgICAgIHRoaXMucGVzdGHDsWEgPSAnb3JkZW5lcyc7CiAgICAgIHRoaXMuY2FyZ2FyT3JkZW5lcygpOwogICAgICAkKCcjb3JkZW5lcycpLkRhdGFUYWJsZSgpOwogICAgfSwKICAgIC8vRnVuY2lvbmVzIGRlIGFjdGl2YWNpb24gZGUgdmlzdGFzCiAgICBBY3RBZ3JlZ2FyOiBmdW5jdGlvbiBBY3RBZ3JlZ2FyKCkgewogICAgICB0aGlzLnBlc3Rhw7FhID0gJ2FncmVnYXInOwogICAgICAkKCcjcHJvZHVjdG9zJykuRGF0YVRhYmxlKCkuZGVzdHJveSgpOwogICAgfSwKICAgIEFjdGVkaXRhcjogZnVuY3Rpb24gQWN0ZWRpdGFyKGNvZGlnb0JhcnJhKSB7CiAgICAgIHRoaXMuY29kaWdvQmFycmEgPSBjb2RpZ29CYXJyYTsKICAgICAgdGhpcy5wZXN0YcOxYSA9ICdlZGl0YXInOwogICAgICAkKCcjcHJvZHVjdG9zJykuRGF0YVRhYmxlKCkuZGVzdHJveSgpOwogICAgICB0aGlzLk9idGVuZXJEYXRvcygpOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmltYWdlbmVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuaW1hZ2VuZXNbaV0uc3BsaXQoJy4nKVswXSA9PSB0aGlzLmNvZGlnb0JhcnJhKSB7CiAgICAgICAgICB0aGlzLmltYWdlbkRpciA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvZGJJbWFnZW5lcy8nICsgdGhpcy5pbWFnZW5lc1tpXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmltYWdlbkRpciA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvZGJJbWFnZW5lcy9uby1pbWFnZW4ucG5nJzsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBBY3RIaXN0OiBmdW5jdGlvbiBBY3RIaXN0KGNvZGlnb0JhcnJhKSB7CiAgICAgIHRoaXMuY29kaWdvQmFycmEgPSBjb2RpZ29CYXJyYTsKICAgICAgJCgnI3Byb2R1Y3RvcycpLkRhdGFUYWJsZSgpLmRlc3Ryb3koKTsKICAgICAgdGhpcy5wZXN0YcOxYSA9ICdoaXN0b3JpYWwnOwogICAgICAkKCcjaGlzdG9yaWFsJykuRGF0YVRhYmxlKCk7CiAgICAgIHRoaXMuY2FyZ2FySGlzdG9yaWFsKCk7CiAgICB9LAogICAgQWN0T3JkZW5lczogZnVuY3Rpb24gQWN0T3JkZW5lcyhjb2RpZ29CYXJyYSkgewogICAgICB0aGlzLmNvZGlnb0JhcnJhID0gY29kaWdvQmFycmE7CiAgICAgIHRoaXMucGVzdGHDsWEgPSAnb3JkZW5lcyc7CiAgICAgICQoJyNwcm9kdWN0b3MnKS5EYXRhVGFibGUoKS5kZXN0cm95KCk7CiAgICAgICQoJyNvcmRlbmVzJykuRGF0YVRhYmxlKCk7CiAgICAgIHRoaXMuY2FyZ2FyT3JkZW5lcygpOwogICAgfSwKICAgIEFjdERIaXN0OiBmdW5jdGlvbiBBY3RESGlzdChjb3JySGlzdG9yaWFsLCBtZW1vKSB7CiAgICAgIHRoaXMuaGlzdG8gPSBjb3JySGlzdG9yaWFsOwogICAgICB0aGlzLm1lbW9IaXN0ID0gbWVtbzsKICAgICAgdGhpcy5wZXN0YcOxYSA9ICdkZXRhbGxlSGlzdCc7CiAgICAgICQoJyNoaXN0b3JpYWwnKS5EYXRhVGFibGUoKS5kZXN0cm95KCk7CiAgICAgICQoJyNkZXRhbGxlSGlzdCcpLkRhdGFUYWJsZSgpOwogICAgICB0aGlzLmNhcmdhckRldGFsbGVIaXN0b3JpYWwoKTsKICAgIH0sCiAgICBBY3RET3JkZW5lczogZnVuY3Rpb24gQWN0RE9yZGVuZXMoY29kT3JkZW4pIHsKICAgICAgdGhpcy5oaXN0byA9IGNvZE9yZGVuOwogICAgICB0aGlzLnBlc3Rhw7FhID0gJ2RldGFsbGVPcmRlbic7CiAgICAgICQoJyNvcmRlbmVzJykuRGF0YVRhYmxlKCkuZGVzdHJveSgpOwogICAgICAkKCcjZGV0YWxsZU9yZGVuJykuRGF0YVRhYmxlKCk7CiAgICAgIHRoaXMuY2FyZ2FyRGV0YWxsZU9yZGVuKCk7CiAgICB9LAogICAgLy9GdW5jaW9uZXMgZGUgQUdSRUdBUgogICAgLy9GdW5jaW9uIHBhcmEgY2FyZ2FyIHVuYSBpbWFnZW4geSBtb3N0cmFyIHN1IHByZXZpZXcKICAgIENhcmdhSW1hZ2VuOiBmdW5jdGlvbiBDYXJnYUltYWdlbihlKSB7CiAgICAgIHRoaXMuaW1hZ2VuID0gZS50YXJnZXQuZmlsZXNbMF07CiAgICAgIHZhciBpbWFnZW5BZ3JlZ2EgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2VuQWdyZWdhJyk7CiAgICAgIGltYWdlbkFncmVnYS5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGUudGFyZ2V0LmZpbGVzWzBdKTsKICAgIH0sCiAgICAvL0Z1bmNpw7NuIHF1ZSBzZSBlbmNhcmdhIGRlIGFncmVnYXIgdW4gcHJvZHVjdG8gYWwgc2lzdGVtYQogICAgQWdyZWdhclByb2R1Y3RvOiBmdW5jdGlvbiBBZ3JlZ2FyUHJvZHVjdG8oKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy4kdi4kdG91Y2goKTsKCiAgICAgIGlmICghdGhpcy4kdi5jb2RpZ29BZ3JlZ2FyLiRpbnZhbGlkICYmICF0aGlzLiR2LnByb2R1Y3RvQWdyZWdhci4kaW52YWxpZCAmJiAhdGhpcy4kdi5tYXJjYUFncmVnYXIuJGludmFsaWQgJiYgIXRoaXMuJHYuZGVzY3JpcGNpb25BZ3JlZ2EuJGludmFsaWQpIHsKICAgICAgICB2YXIgY29uZmlnID0gewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbgogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdGhpcy5heGlvcy5wb3N0KCdhcGkvYWdyZWdhUHJvZHVjdG8nLCB7CiAgICAgICAgICBjb2RpZ29CYXJyYTogdGhpcy5jb2RpZ29BZ3JlZ2FyLAogICAgICAgICAgbm9tUHJvZHVjdG86IHRoaXMucHJvZHVjdG9BZ3JlZ2FyLAogICAgICAgICAgbWFyY2E6IHRoaXMubWFyY2FBZ3JlZ2FyLAogICAgICAgICAgZGVzY3JpcGNpb246IHRoaXMuZGVzY3JpcGNpb25BZ3JlZ2EsCiAgICAgICAgICBzdG9jazogdGhpcy5zdG9ja0FncmVnYQogICAgICAgIH0sIGNvbmZpZykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAoIXJlcy5kYXRhLnNxbE1lc3NhZ2UpIHsKICAgICAgICAgICAgaWYgKF90aGlzMy5pbWFnZW4gIT09IG51bGwpIHsKICAgICAgICAgICAgICBfdGhpczMuc3ViaXJJbWFnZW4oKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMzLmFncmVnYXJTdG9jaygpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLAogICAgICAgICAgICAgIHRpdGxlOiAnT29wcy4uLicsCiAgICAgICAgICAgICAgdGV4dDogJ05vIHNlIGhhIGNyZWFkbyBlc3RlIG51ZXZvIHRpcG8nLAogICAgICAgICAgICAgIGZvb3RlcjogJ0NvZGlnbyBvIG5vbWJyZSBkZSBQcm9kdWN0byB5YSB1dGlsaXphZG8nCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICBpY29uOiAnZXJyb3InLAogICAgICAgICAgICB0aXRsZTogJ09vcHMuLi4nLAogICAgICAgICAgICB0ZXh0OiAnTm8gc2UgaGEgY3JlYWRvIGVzdGUgbnVldm8gdGlwbycsCiAgICAgICAgICAgIGZvb3RlcjogJ1Bvc2libGUgZXJyb3IgZGVsIHNpc3RlbWEnCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFsZXJ0YSgnZGFuZ2VyJywgJ1BvcmZhdm9yIGluZ3Jlc2UgdG9kb3MgbG9zIGNhbXBvcyByZXF1ZXJpZG9zJyk7CiAgICAgIH0KICAgIH0sCiAgICAvL1NVQklSIElNQUdFTiBkZWwgbnVldm8gcHJvZHVjdG8KICAgIHN1YmlySW1hZ2VuOiBmdW5jdGlvbiBzdWJpckltYWdlbigpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICBpZiAodGhpcy5pbWFnZW4gIT09IG51bGwpIHsKICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ltYWdlJywgdGhpcy5pbWFnZW4pOwogICAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIHRva2VuOiB0aGlzLnRva2VuCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB0aGlzLmF4aW9zLnB1dCgiYXBpL3N1YmlySW1hZ2VuLyIuY29uY2F0KHRoaXMuY29kaWdvQWdyZWdhciksIGZvcm1EYXRhLCBjb25maWcpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXM0LmFsZXJ0YSgnc3VjY2VzcycsICdTZSBoYSBsb2dyYWRvIHN1YmlyIGxhIGltYWdlbicpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBfdGhpczQuYWxlcnRhKCdkYW5nZXInLCAnTm8gc2UgaGEgbG9ncmFkbyBzdWJpciBsYSBpbWFnZW4nKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vRnVuY2lvbiBxdWUgYWdyZWdhIGVsIHN0b2NrIGRlbCBQcm9kdWN0bwogICAgYWdyZWdhclN0b2NrOiBmdW5jdGlvbiBhZ3JlZ2FyU3RvY2soKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ib2RlZ2FzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgdG9rZW46IHRoaXMudG9rZW4KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHRoaXMuYXhpb3MucG9zdCgnYXBpL2FncmVnYVByb2R1Y3RvQm9kZWdhJywgewogICAgICAgICAgc3RvY2tCb2RlZ2E6IHRoaXMuYm9kZWdhc1tpXS5zdG9ja0JvZGVnYSwKICAgICAgICAgIHN0b2NrQ3JpdGljbzogdGhpcy5ib2RlZ2FzW2ldLnN0b2NrQ3JpdGljbywKICAgICAgICAgIG5vbUJvZGVnYTogdGhpcy5ib2RlZ2FzW2ldLm5vbUJvZGVnYSwKICAgICAgICAgIGNvZGlnb0JhcnJhOiB0aGlzLmNvZGlnb0FncmVnYXIKICAgICAgICB9LCBjb25maWcpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKCFyZXMuZGF0YS5zcWxNZXNzYWdlKSB7CiAgICAgICAgICAgIFN3YWwuZmlyZSgnU2UgaGEgZ2VuZXJhZG8gdW4gbnVldm8gUHJvZHVjdG8nLCAnU2VsZWNjaW9uZSBPayBwYXJhIGNvbnRpbnVhcicsICdzdWNjZXNzJyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgIGljb246ICdlcnJvcicsCiAgICAgICAgICAgICAgdGl0bGU6ICdPb3BzLi4uJywKICAgICAgICAgICAgICB0ZXh0OiAnTm8gc2UgaGEgbG9ncmFkbyBpbmdyZXNhciBsb3Mgc3RvY2sgZGVsIHByb2R1Y3RvJywKICAgICAgICAgICAgICBmb290ZXI6ICdFcnJvciBjb24gZWwgaW5ncmVzbyBkZSBTdG9ja3MnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICBpY29uOiAnZXJyb3InLAogICAgICAgICAgICB0aXRsZTogJ09vcHMuLi4nLAogICAgICAgICAgICB0ZXh0OiAnTm8gc2UgaGEgY3JlYWRvIGVzdGUgbnVldm8gdGlwbycsCiAgICAgICAgICAgIGZvb3RlcjogJ1Bvc2libGUgZXJyb3IgZGVsIHNpc3RlbWEnCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vaW5kaWNhbW9zIGxhIG1pbmltYSBjYW50aWRhZCBwYXJhIGVsIHN0b2NrIHJlZ2lvbmFsCiAgICBjYW50TWluU3RvY2tSZWc6IGZ1bmN0aW9uIGNhbnRNaW5TdG9ja1JlZyhzdG9jaykgewogICAgICBpZiAoc3RvY2sgPCAwIHx8IHN0b2NrID09PSAnJykgewogICAgICAgIHRoaXMuc3RvY2tBZ3JlZ2EgPSAwOwogICAgICAgIHRoaXMuc3RvY2tSRUcgPSAwOwogICAgICB9CiAgICB9LAogICAgLy9JbmRpY2Ftb3MgZWwgbWluaW1vIGRlIGNhbnRpZGFkIHBhcmEgcXVlIG5vIGVzdGUgdmFjaW8gbyBzZWEgbWVub3IgYSAwCiAgICBjYW50TWluOiBmdW5jdGlvbiBjYW50TWluKG5vbUJvZGVnYSkgewogICAgICB2YXIgaW5kZXggPSB0aGlzLmJvZGVnYXMuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0ubm9tQm9kZWdhID09IG5vbUJvZGVnYTsKICAgICAgfSk7CgogICAgICBpZiAodGhpcy5ib2RlZ2FzW2luZGV4XS5zdG9ja0JvZGVnYSA8IDApIHsKICAgICAgICB0aGlzLmJvZGVnYXNbaW5kZXhdLnN0b2NrQm9kZWdhID0gMDsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuYm9kZWdhc1tpbmRleF0uc3RvY2tCb2RlZ2EgPCB0aGlzLmJvZGVnYXNbaW5kZXhdLnN0b2NrQ3JpdGljbykgewogICAgICAgIHRoaXMuYWxlcnRhKCdkYW5nZXInLCAnRWwgc3RvY2sgcXVlIGVzdGEgaW5ncmVzYW5kbyBlcyBtZW5vciBhbCBjcml0aWNvIHBhcmEgbGEgYm9kZWdhICcgKyB0aGlzLmJvZGVnYXNbaW5kZXhdLm5vbUJvZGVnYSk7CiAgICAgIH0KICAgIH0sCiAgICAvL0luZGljYW1vcyBlbCBtaW5pbW8gZGUgY2FudGlkYWQgcGFyYSBxdWUgbm8gZXN0ZSB2YWNpbyBvIHNlYSBtZW5vciBhIDAKICAgIGNhbnRNaW5Dcml0aWNvOiBmdW5jdGlvbiBjYW50TWluQ3JpdGljbyhub21Cb2RlZ2EpIHsKICAgICAgdmFyIGluZGV4ID0gdGhpcy5ib2RlZ2FzLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLm5vbUJvZGVnYSA9PSBub21Cb2RlZ2E7CiAgICAgIH0pOwoKICAgICAgaWYgKHRoaXMuYm9kZWdhc1tpbmRleF0uc3RvY2tDcml0aWNvIDwgMCkgewogICAgICAgIHRoaXMuYm9kZWdhc1tpbmRleF0uc3RvY2tDcml0aWNvID0gMDsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuYm9kZWdhc1tpbmRleF0uc3RvY2tDcml0aWNvID4gdGhpcy5ib2RlZ2FzW2luZGV4XS5zdG9ja0JvZGVnYSkgewogICAgICAgIHRoaXMuYWxlcnRhKCdkYW5nZXInLCAnRWwgc3RvY2sgcXVlIGVzdGEgaW5ncmVzYW5kbyBlcyBtZW5vciBhbCBjcml0aWNvIHBhcmEgbGEgYm9kZWdhICcgKyB0aGlzLmJvZGVnYXNbaW5kZXhdLm5vbUJvZGVnYSk7CiAgICAgIH0KICAgIH0sCiAgICAvL0ZVTkNJT05FUyBQQVJBIEVESVRBUgogICAgLy9GdW5jacOzbiBxdWUgcGVybWl0ZSBvYnRlbmVyIGxvcyBkYXRvcyBkaXJlY3RhbWVudGUgZGUgbGEgdGFibGEKICAgIE9idGVuZXJEYXRvczogZnVuY3Rpb24gT2J0ZW5lckRhdG9zKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHZhciBpbmRleCA9IHRoaXMucHJvZHVjdG9zLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmNvZGlnb0JhcnJhID09IF90aGlzNS5jb2RpZ29CYXJyYTsKICAgICAgfSk7CiAgICAgIHZhciBkYXRhID0gdGhpcy5wcm9kdWN0b3NbaW5kZXhdOwogICAgICB0aGlzLnByb2R1Y3RvID0gZGF0YS5ub21Qcm9kdWN0bzsKICAgICAgdGhpcy5tYXJjYSA9IGRhdGEubWFyY2E7CiAgICAgIHRoaXMuZGVzY3JpcGNpb24gPSBkYXRhLmRlc2NyaXBjaW9uOwogICAgICB0aGlzLnN0b2NrUkVHID0gZGF0YS5zdG9jazsKICAgICAgdGhpcy5PYnRlbmVyU3RvY2tDcml0aWNvKCk7CiAgICB9LAogICAgLy9GdW5jacOzbiBxdWUgb2J0aWVuZSB1bmEgaW1hZ2VuCiAgICBvYnRlbmVySW1hZ2VuZXM6IGZ1bmN0aW9uIG9idGVuZXJJbWFnZW5lcygpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB2YXIgY29uZmlnID0gewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIHRva2VuOiB0aGlzLnRva2VuCiAgICAgICAgfQogICAgICB9OwogICAgICB0aGlzLmF4aW9zLmdldCgiYXBpL29idGVuZXJJbWFnZW4iLCBjb25maWcpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzNi5pbWFnZW5lcyA9IHJlcy5kYXRhOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzNi5hbGVydGEoJ2RhbmdlcicsICdFc3RlIHByb2R1Y3RvIG5vIHBvc2VlIGltYWdlbiBvIG5vIGhhIGNhcmdhZG8gY29ycmVjdGFtZW50ZScpOwogICAgICB9KTsKICAgIH0sCiAgICAvL0Z1bmNpw7NuIHF1ZSByZWNhcmdhIGxhIGZ1bmNpw7NuIHNpZ3VpZW50ZSBwYXJhcSB1biBzdG9jayBDcml0aWNvCiAgICByZWNhcmdhckNyaXRpY286IGZ1bmN0aW9uIHJlY2FyZ2FyQ3JpdGljbygpIHsKICAgICAgdGhpcy5PYnRlbmVyU3RvY2tDcml0aWNvKCk7CiAgICB9LAogICAgLy9GdW5jacOzbiBxdWUgb2J0aWVuZSBlbCBzdG9ja0NyaXRpbyBhY3R1YWwgZGVsIHByb2R1Y3RvIHNlZ8O6biBsYSBib2RlZ2Egc2VsZWNjaW9uYWRhIGVuIGVsIGVkaXRhcgogICAgT2J0ZW5lclN0b2NrQ3JpdGljbzogZnVuY3Rpb24gT2J0ZW5lclN0b2NrQ3JpdGljbygpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICB2YXIgY29uZmlnID0gewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIHRva2VuOiB0aGlzLnRva2VuCiAgICAgICAgfQogICAgICB9OwogICAgICB0aGlzLmF4aW9zLmdldCgiYXBpL29idGVuZXJQcm9kdWN0b0JvZGVnYS8iLmNvbmNhdCh0aGlzLmNvZGlnb0JhcnJhLCAiLyIpLmNvbmNhdCh0aGlzLm5vbUJvZGVnYUVkaXRhciksIGNvbmZpZykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXM3LnN0b2NrQ3JpdGljb0VkaXRhciA9IHJlcy5kYXRhWzBdLnN0b2NrQ3JpdGljbzsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpczcuYWxlcnRhKCdkYW5nZXInLCAnTm8gc2UgaGEgbG9ncmFkbyBjYXJnYXIgZWwgc3RvY2sgQ3JpdGljbycpOwogICAgICB9KTsKICAgIH0sCiAgICBDYXJnYUltYWdlbkVkaXRhcjogZnVuY3Rpb24gQ2FyZ2FJbWFnZW5FZGl0YXIoZSkgewogICAgICB0aGlzLmltYWdlbiA9IGUudGFyZ2V0LmZpbGVzWzBdOwogICAgICB2YXIgaW1hZ2VuRWRpdGEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2VuRWRpdGEnKTsKICAgICAgaW1hZ2VuRWRpdGEuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChlLnRhcmdldC5maWxlc1swXSk7CiAgICB9LAogICAgLy9FZGl0YXIgdW4gcHJvZHVjdG8gCiAgICBFZGl0YXJQcm9kdWN0bzogZnVuY3Rpb24gRWRpdGFyUHJvZHVjdG8oKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgdGhpcy4kdi4kdG91Y2goKTsKCiAgICAgIGlmICghdGhpcy4kdi5wcm9kdWN0by4kaW52YWxpZCAmJiAhdGhpcy4kdi5tYXJjYS4kaW52YWxpZCAmJiAhdGhpcy4kdi5kZXNjcmlwY2lvbi4kaW52YWxpZCkgewogICAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIHRva2VuOiB0aGlzLnRva2VuCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB0aGlzLmF4aW9zLnB1dCgiYXBpL2VkaXRhclByb2R1Y3RvLyIuY29uY2F0KHRoaXMuY29kaWdvQmFycmEpLCB7CiAgICAgICAgICBub21Qcm9kdWN0bzogdGhpcy5wcm9kdWN0bywKICAgICAgICAgIG1hcmNhOiB0aGlzLm1hcmNhLAogICAgICAgICAgZGVzY3JpcGNpb246IHRoaXMuZGVzY3JpcGNpb24sCiAgICAgICAgICBzdG9jazogdGhpcy5zdG9ja1JFRwogICAgICAgIH0sIGNvbmZpZykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAoIXJlcy5kYXRhLnNxbE1lc3NhZ2UpIHsKICAgICAgICAgICAgaWYgKF90aGlzOC5pbWFnZW4gIT09IG51bGwpIHsKICAgICAgICAgICAgICBfdGhpczguc3ViaXJJbWFnZW5FZGl0YXIoKTsKCiAgICAgICAgICAgICAgX3RoaXM4Lm9idGVuZXJJbWFnZW5lcygpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBTd2FsLmZpcmUoJ1NlIGhhIGVkaXRhZG8gYWwgcHJvZHVjdG8gc2F0aXNmYWN0b3JpYW1lbnRlJywgJ1NlbGVjY2lvbmUgT2sgcGFyYSBjb250aW51YXInLCAnc3VjY2VzcycpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLAogICAgICAgICAgICAgIHRpdGxlOiAnT29wcy4uLicsCiAgICAgICAgICAgICAgdGV4dDogJ05vIHNlIGhhIGFjdHVhbGl6YWRvIGVsIHByb2R1Y3RvJywKICAgICAgICAgICAgICBmb290ZXI6ICdEYXRvIHJlcGV0aWRvIGFzZWd1cmVzZSBkZSBxdWUgZWwgY29kaWdvIG8gbm9tYnJlIG5vIGV4aXN0YW4nCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBfdGhpczguYWxlcnRhKCdkYW5nZXInLCAnTm8gc2UgaGEgbG9ncmFkbyBlZGl0YXIgYWwgcHJvZHVjdG8nKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFsZXJ0YSgnZGFuZ2VyJywgJ1JlbGxlbmUgdG9kb3MgbG9zIGNhbXBvcyBwYXJhIGVkaXRhciBlbCBQcm9kdWN0bycpOwogICAgICB9CiAgICB9LAogICAgLy9TVUJJUiBJTUFHRU4gZGUgdW4gcHJvZHVjdG8gZXhpc3RlbnRlCiAgICBzdWJpckltYWdlbkVkaXRhcjogZnVuY3Rpb24gc3ViaXJJbWFnZW5FZGl0YXIoKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuaW1hZ2VuICE9PSBudWxsKSB7CiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdpbWFnZScsIHRoaXMuaW1hZ2VuKTsKICAgICAgICB2YXIgY29uZmlnID0gewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbgogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdGhpcy5heGlvcy5wdXQoImFwaS9zdWJpckltYWdlbi8iLmNvbmNhdCh0aGlzLmNvZGlnb0JhcnJhKSwgZm9ybURhdGEsIGNvbmZpZykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpczkuYWxlcnRhKCdzdWNjZXNzJywgJ1NlIGhhIGxvZ3JhZG8gc3ViaXIgbGEgaW1hZ2VuJyk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIF90aGlzOS5hbGVydGEoJ2RhbmdlcicsICdObyBzZSBoYSBsb2dyYWRvIHN1YmlyIGxhIGltYWdlbicpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy9FRElUQVIgRUwgU1RPQ0sgQ1JJVElDTwogICAgRWRpdGFyU3RvY2tDcml0aWNvOiBmdW5jdGlvbiBFZGl0YXJTdG9ja0NyaXRpY28oKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgdG9rZW46IHRoaXMudG9rZW4KICAgICAgICB9CiAgICAgIH07CiAgICAgIHRoaXMuYXhpb3MucHV0KCJhcGkvZWRpdGFyc3RvY2tDcml0aWNvLyIuY29uY2F0KHRoaXMuY29kaWdvQmFycmEpLCB7CiAgICAgICAgc3RvY2tDcml0aWNvOiB0aGlzLnN0b2NrQ3JpdGljb0VkaXRhciwKICAgICAgICBub21Cb2RlZ2E6IHRoaXMubm9tQm9kZWdhRWRpdGFyCiAgICAgIH0sIGNvbmZpZykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKCFyZXMuZGF0YS5zcWxNZXNzYWdlKSB7CiAgICAgICAgICBTd2FsLmZpcmUoJ1NlIGhhIGVkaXRhZG8gZWwgc3RvY2sgY3JpdGljbyBkZWwgcHJvZHVjdG8gZGUgZm9ybWEgc2F0aXNmYWN0b3JpYScsICdTZWxlY2Npb25lIE9rIHBhcmEgY29udGludWFyJywgJ3N1Y2Nlc3MnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywKICAgICAgICAgICAgdGl0bGU6ICdPb3BzLi4uJywKICAgICAgICAgICAgdGV4dDogJ05vIHNlIGhhIGFjdHVhbGl6YWRvIGVsIHByb2R1Y3RvJywKICAgICAgICAgICAgZm9vdGVyOiAnRGF0byByZXBldGlkbyBhc2VndXJlc2UgZGUgcXVlIGVsIGNvZGlnbyBvIG5vbWJyZSBubyBleGlzdGFuJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzMTAuYWxlcnRhKCdkYW5nZXInLCAnTm8gc2UgaGEgbG9ncmFkbyBlZGl0YXIgYWwgcHJvZHVjdG8nKTsKICAgICAgfSk7CiAgICB9LAogICAgLy9DQVJHQVIgREFUT1MgREUgVEFCTEEgSElTVE9SSUFMCiAgICBjYXJnYXJIaXN0b3JpYWw6IGZ1bmN0aW9uIGNhcmdhckhpc3RvcmlhbCgpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwoKICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbgogICAgICAgIH0KICAgICAgfTsKICAgICAgdGhpcy5heGlvcy5nZXQoImFwaS9vYnRlbmVySGlzdG9yaWFsZXNQcm9kdWN0by8iLmNvbmNhdCh0aGlzLmNvZGlnb0JhcnJhKSwgY29uZmlnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczExLmhpc3RvcmlhbCA9IHJlcy5kYXRhOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzMTEuYWxlcnRhKCdkYW5nZXInLCAnTm8gc2UgaGEgbG9ncmFkbyBjYXJnYXIgZWwgaGlzdG9yaWFsJyk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vQ2FyYWdhciB0YWJsYSBkZSBvcmRlbmVzIGRlIGNvbXByYSBkZSB1biBwcm9kdWN0bwogICAgY2FyZ2FyT3JkZW5lczogZnVuY3Rpb24gY2FyZ2FyT3JkZW5lcygpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwoKICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbgogICAgICAgIH0KICAgICAgfTsKICAgICAgdGhpcy5heGlvcy5nZXQoImFwaS9vYnRlbmVyT3JkZW5lc1Byb2R1Y3RvLyIuY29uY2F0KHRoaXMuY29kaWdvQmFycmEpLCBjb25maWcpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMTIub3JkZW5lcyA9IHJlcy5kYXRhOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzMTIuYWxlcnRhKCdkYW5nZXInLCAnTm8gc2UgaGEgbG9ncmFkbyBjYXJnYXIgbGEgb3JkZW4nKTsKICAgICAgfSk7CiAgICB9LAogICAgLy9DYXJnYXIgbG9zIGRldGFsbGVzIGRlIHVuIGhpc3RvcmlhbAogICAgY2FyZ2FyRGV0YWxsZUhpc3RvcmlhbDogZnVuY3Rpb24gY2FyZ2FyRGV0YWxsZUhpc3RvcmlhbCgpIHsKICAgICAgdmFyIF90aGlzMTMgPSB0aGlzOwoKICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbgogICAgICAgIH0KICAgICAgfTsKICAgICAgdGhpcy5heGlvcy5nZXQoImFwaS9vYnRlbmVySGlzdG9yaWFsLyIuY29uY2F0KHRoaXMuaGlzdG8pLCBjb25maWcpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMTMuZGV0YWxsZUhpc3QgPSByZXMuZGF0YTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpczEzLmFsZXJ0YSgnZGFuZ2VyJywgJ05vIHNlIGhhIGxvZ3JhZG8gY2FyZ2FyIGVsIGRldGFsbGUgZGVsIGhpc3RvcmlhbCcpOwogICAgICB9KTsKICAgIH0sCiAgICAvL0NhcmdhciBsb3MgZGV0YWxsZXMgZGUgdW5hIG9yZGVuCiAgICBjYXJnYXJEZXRhbGxlT3JkZW46IGZ1bmN0aW9uIGNhcmdhckRldGFsbGVPcmRlbigpIHsKICAgICAgdmFyIF90aGlzMTQgPSB0aGlzOwoKICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbgogICAgICAgIH0KICAgICAgfTsKICAgICAgdGhpcy5heGlvcy5nZXQoImFwaS9vYnRlbmVyT3JkZW4vIi5jb25jYXQodGhpcy5oaXN0byksIGNvbmZpZykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMxNC5kZXRhbGxlT3JkZW4gPSByZXMuZGF0YTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpczE0LmFsZXJ0YSgnZGFuZ2VyJywgJ05vIHNlIGhhIGxvZ3JhZG8gY2FyZ2FyIGVsIGRldGFsbGUgZGUgdW5hIG9yZGVuJyk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vQWwgY2FtYmlhciBlbCBpbnB1dCBkZWwgc3RvY2sgY3JpdGljbyBldml0YXIgcXVlIHNlYSBtZW5vcyBxdWUgMSB5IGFsZXJ0YXIgc2kgZXMgaW5mZXJpb3IgYWwgc3RvY2sgZGUgYm9kZWdhCiAgICBjYW50TWluQ3JpdGljb0VkaXRhcjogZnVuY3Rpb24gY2FudE1pbkNyaXRpY29FZGl0YXIoKSB7CiAgICAgIGlmICh0aGlzLnN0b2NrQ3JpdGljb0VkaXRhciA8IDEpIHsKICAgICAgICB0aGlzLnN0b2NrQ3JpdGljb0VkaXRhciA9IDE7CiAgICAgIH0KICAgIH0sCiAgICBjb3VudERvd25DaGFuZ2VkOiBmdW5jdGlvbiBjb3VudERvd25DaGFuZ2VkKGRpc21pc3NDb3VudERvd24pIHsKICAgICAgdGhpcy5kaXNtaXNzQ291bnREb3duID0gZGlzbWlzc0NvdW50RG93bjsKICAgIH0sCiAgICBzaG93QWxlcnQ6IGZ1bmN0aW9uIHNob3dBbGVydCgpIHsKICAgICAgdGhpcy5kaXNtaXNzQ291bnREb3duID0gdGhpcy5kaXNtaXNzU2VjczsKICAgIH0sCiAgICBhbGVydGE6IGZ1bmN0aW9uIGFsZXJ0YShjb2xvciwgdGV4dG8pIHsKICAgICAgdGhpcy5tZW5zYWplLmNvbG9yID0gY29sb3I7CiAgICAgIHRoaXMubWVuc2FqZS50ZXh0byA9IHRleHRvOwogICAgICB0aGlzLnNob3dBbGVydCgpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gJCgnI3Byb2R1Y3RvcycpLkRhdGFUYWJsZSgpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiAkKCcjaGlzdG9yaWFsJykuRGF0YVRhYmxlKCk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuICQoJyNkZXRhbGxlSGlzdCcpLkRhdGFUYWJsZSgpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgIHJldHVybiAkKCcjb3JkZW5lcycpLkRhdGFUYWJsZSgpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICByZXR1cm4gJCgnI2RldGFsbGVPcmRlbicpLkRhdGFUYWJsZSgpOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIHdhdGNoOiB7CiAgICBwcm9kdWN0b3M6IGZ1bmN0aW9uIHByb2R1Y3Rvcyh2YWwpIHsKICAgICAgaWYgKHRoaXMucGVzdGHDsWEgPT09ICdwcm9kdWN0b3MnKSB7CiAgICAgICAgJCgnI3Byb2R1Y3RvcycpLkRhdGFUYWJsZSgpLmRlc3Ryb3koKTsKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAkKCcjcHJvZHVjdG9zJykuRGF0YVRhYmxlKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBoaXN0b3JpYWw6IGZ1bmN0aW9uIGhpc3RvcmlhbCh2YWwpIHsKICAgICAgaWYgKHRoaXMucGVzdGHDsWEgPT09ICdoaXN0b3JpYWwnKSB7CiAgICAgICAgJCgnI2hpc3RvcmlhbCcpLkRhdGFUYWJsZSgpLmRlc3Ryb3koKTsKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAkKCcjaGlzdG9yaWFsJykuRGF0YVRhYmxlKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBkZXRhbGxlSGlzdDogZnVuY3Rpb24gZGV0YWxsZUhpc3QodmFsKSB7CiAgICAgIGlmICh0aGlzLnBlc3Rhw7FhID09PSAnZGV0YWxsZUhpc3QnKSB7CiAgICAgICAgJCgnI2RldGFsbGVIaXN0JykuRGF0YVRhYmxlKCkuZGVzdHJveSgpOwogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICQoJyNkZXRhbGxlSGlzdCcpLkRhdGFUYWJsZSgpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgb3JkZW5lczogZnVuY3Rpb24gb3JkZW5lcyh2YWwpIHsKICAgICAgaWYgKHRoaXMucGVzdGHDsWEgPT09ICdvcmRlbmVzJykgewogICAgICAgICQoJyNvcmRlbmVzJykuRGF0YVRhYmxlKCkuZGVzdHJveSgpOwogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICQoJyNvcmRlbmVzJykuRGF0YVRhYmxlKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBkZXRhbGxlT3JkZW46IGZ1bmN0aW9uIGRldGFsbGVPcmRlbih2YWwpIHsKICAgICAgaWYgKHRoaXMucGVzdGHDsWEgPT09ICdkZXRhbGxlT3JkZW4nKSB7CiAgICAgICAgJCgnI2RldGFsbGVPcmRlbicpLkRhdGFUYWJsZSgpLmRlc3Ryb3koKTsKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAkKCcjZGV0YWxsZU9yZGVuJykuRGF0YVRhYmxlKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0SA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA,gC,CAEA;;AACA;AACA;;AACA;AACAA;AACA;;AACA;AACAA;AAEA;AACAC,eADA;AAEAC;AACAC;AADA,GAFA;AAKAC,MALA,kBAKA;AACA;AACA;AACAC,0BAFA;AAGAC,mBAHA;AAIAC,mBAJA;AAKAC,iBALA;AAMAC,iBANA;AAOAC,aAPA;AAQAC,qBARA;AASAC,sBATA;AAUAC,kBAVA;AAWA;AACAC,uBAZA;AAaAC,yBAbA;AAcAC,sBAdA;AAeAC,2BAfA;AAgBAC,oBAhBA;AAiBAC,kBAjBA;AAkBA;AACAC,qBAnBA;AAoBA;AACAC,mBArBA;AAsBAC,kBAtBA;AAuBAC,eAvBA;AAwBAC,qBAxBA;AAyBAC,0BAzBA;AA0BAC,2BA1BA;AA2BAC,yBA3BA;AA4BAC,iBA5BA;AA6BA;AACAC,cA9BA;AA+BAC,iBA/BA;AAgCA;AACAC,oBAjCA;AAkCAC,yBAlCA;AAmCAC;AAAAC;AAAAC;AAAA;AAnCA;AAqCA,GA3CA;AA4CAC;AACA;AACAtB;AAAAuB;AAAA,KAFA;AAGAtB;AAAAsB;AAAA,KAHA;AAIArB;AAAAqB;AAAA,KAJA;AAKApB;AAAAoB;AAAA,KALA;AAMAf;AAAAe;AAAA,KANA;AAOAd;AAAAc;AAAA,KAPA;AAQAb;AAAAa;AAAA,KARA;AASAnB;AAAAmB;AAAA,KATA;AAUAT;AAAAS;AAAA;AAVA,GA5CA;AAwDAC,8BACAC,gCADA,CAxDA;AA2DAC,SA3DA,qBA2DA;AACA;AACA;AACA;AACA,GA/DA;AAgEAC;AACA;AACAC,YAFA,oBAEAC,GAFA,EAEA;AACA;AACA;;AACA;AACA;AACA;AAAAC;AAAAC;AAAAC;AAAAC;AAAA;AACA,SAFA;AAGA3C;AACA4C;AACA,OANA,MAMA;AACA;AACA;AAAAC;AAAAC;AAAAC;AAAAC;AAAA;AACA,SAFA;AAGAhD;;AACA;AACA4C;AACA,SAFA,MAEA;AACAA;AACA;AACA,OAVA,MAUA;AACA;AACA;AAAAH;AAAAD;AAAAS;AAAA;AACA,SAFA;AAGAjD;AACA4C;AACA,OANA,MAMA;AACA;AACA;AAAAM;AAAAC;AAAAC;AAAAJ;AAAA;AACA,SAFA;AAGAhD;;AACA;AACA4C;AACA,SAFA,MAEA;AACAA;AACA;AACA,OAVA,MAUA;AACA;AACA;AAAAH;AAAAD;AAAAS;AAAA;AACA,SAFA;AAGAjD;AACA4C;AACA;;AACA;AACAhD;AACAA;AACA,KA/CA;AAgDA;AACAyD,mBAjDA,6BAiDA;AAAA;;AACA;AACAC;AACAC;AADA;AADA;AAKA,0DACAC,IADA,CACA;AACA;AACA,OAHA,EAIAC,KAJA,CAIA;AACA;AACA,OANA;AAOA,KA9DA;AA+DA;AACAC,iBAhEA,2BAgEA;AAAA;;AACA;AACAJ;AACAC;AADA;AADA;AAKA,mDACAC,IADA,CACA;AACA;AACA;;AACA;AACA,OALA,EAMAC,KANA,CAMA;AACA;AACA,OARA;AASA,KA/EA;AAgFA;AACAE,iBAjFA,2BAiFA;AACA;AACA;AAAAC;AAAAC;AAAAC;AAAA;AACA;AACA,KArFA;AAsFA;AACAC,UAvFA,oBAuFA;AACAC;AACAA;AACA;AACA;AACA;AACA;AACAA;AACA,KA/FA;AAgGAC,cAhGA,wBAgGA;AACAD;AACA;AACA;AACAA;AACA,KArGA;AAsGAE,aAtGA,uBAsGA;AACAF;AACA;AACA;AACAA;AACA,KA3GA;AA4GA;AACAG,cA7GA,wBA6GA;AACA;AACAH;AACA,KAhHA;AAiHAI,aAjHA,qBAiHApD,WAjHA,EAiHA;AACA;AACA;AACAgD;AACA;;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA,KA9HA;AA+HAK,WA/HA,mBA+HArD,WA/HA,EA+HA;AACA;AACAgD;AACA;AACAA;AACA;AACA,KArIA;AAsIAM,cAtIA,sBAsIAtD,WAtIA,EAsIA;AACA;AACA;AACAgD;AACAA;AACA;AACA,KA5IA;AA6IAO,YA7IA,oBA6IAC,aA7IA,EA6IAC,IA7IA,EA6IA;AACA;AACA;AACA;AACAT;AACAA;AACA;AACA,KApJA;AAqJAU,eArJA,uBAqJAC,QArJA,EAqJA;AACA;AACA;AACAX;AACAA;AACA;AACA,KA3JA;AA4JA;AACA;AACAY,eA9JA,uBA8JAC,CA9JA,EA8JA;AACA;AACA;AACAC;AACA,KAlKA;AAmKA;AACAC,mBApKA,6BAoKA;AAAA;;AACA;;AACA;AACA;AACAzB;AACAC;AADA;AADA;AAKA;AAAAvC;AAAAgE;AAAA7D;AAAAC;AAAA6D;AAAA,mBACAzB,IADA,CACA;AACA;AACA;AACA;AACA;;AACA;AACA,WALA,MAKA;AACA0B;AACAC,2BADA;AAEAC,8BAFA;AAGAC,qDAHA;AAIAC;AAJA;AAMA;AACA,SAfA,EAgBA7B,KAhBA,CAgBA;AACAyB;AACAC,yBADA;AAEAC,4BAFA;AAGAC,mDAHA;AAIAC;AAJA;AAMA,SAvBA;AAwBA,OA9BA,MA8BA;AACA;AACA;AACA,KAvMA;AAwMA;AACAC,eAzMA,yBAyMA;AAAA;;AACA;AACA;AACAC;AACA;AACAlC;AACAC;AADA;AADA;AAKA,wFACAC,IADA,CACA;AACA;AACA,SAHA,EAIAC,KAJA,CAIA;AACA;AACA,SANA;AAOA;AACA,KA1NA;AA2NA;AACAgC,gBA5NA,0BA4NA;AACA;AACA;AACAnC;AACAC;AADA;AADA;AAKA;AAAAM;AAAAC;AAAAF;AAAA5C;AAAA,mBACAwC,IADA,CACA;AACA;AACA0B,sBACA,kCADA,EAEA,8BAFA,EAGA,SAHA;AAKA,WANA,MAMA;AACAA;AACAC,2BADA;AAEAC,8BAFA;AAGAC,sEAHA;AAIAC;AAJA;AAMA;AACA,SAhBA,EAiBA7B,KAjBA,CAiBA;AACAyB;AACAC,yBADA;AAEAC,4BAFA;AAGAC,mDAHA;AAIAC;AAJA;AAMA,SAxBA;AAyBA;AACA,KA7PA;AA8PA;AACAI,mBA/PA,2BA+PAT,KA/PA,EA+PA;AACA;AACA;AACA;AACA;AACA,KApQA;AAqQA;AACAU,WAtQA,mBAsQA/B,SAtQA,EAsQA;AACA;AAAA;AAAA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA,KA9QA;AA+QA;AACAgC,kBAhRA,0BAgRAhC,SAhRA,EAgRA;AACA;AAAA;AAAA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA,KAxRA;AAyRA;AACA;AACAiC,gBA3RA,0BA2RA;AAAA;;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAnSA;AAoSA;AACAC,mBArSA,6BAqSA;AAAA;;AACA;AACAxC;AACAC;AADA;AADA;AAKA,kDACAC,IADA,CACA;AACA;AACA,OAHA,EAIAC,KAJA,CAIA;AACA;AACA,OANA;AAQA,KAnTA;AAoTA;AACAsC,mBArTA,6BAqTA;AACA;AACA,KAvTA;AAwTA;AACAC,uBAzTA,iCAyTA;AAAA;;AACA;AACA1C;AACAC;AADA;AADA;AAKA,sHACAC,IADA,CACA;AACA;AACA,OAHA,EAIAC,KAJA,CAIA;AACA;AACA,OANA;AAOA,KAtUA;AAuUAwC,qBAvUA,6BAuUApB,CAvUA,EAuUA;AACA;AACA;AACAqB;AACA,KA3UA;AA4UA;AACAC,kBA7UA,4BA6UA;AAAA;;AACA;;AACA;AACA;AACA7C;AACAC;AADA;AADA;AAKA;AAAAyB;AAAA7D;AAAAC;AAAA6D;AAAA,mBACAzB,IADA,CACA;AACA;AACA;AACA;;AACA;AACA;;AACA0B,sBACA,8CADA,EAEA,8BAFA,EAGA,SAHA;AAKA,WAVA,MAUA;AACAA;AACAC,2BADA;AAEAC,8BAFA;AAGAC,sDAHA;AAIAC;AAJA;AAMA;AACA,SApBA,EAqBA7B,KArBA,CAqBA;AACA;AACA,SAvBA;AAwBA,OA9BA,MA8BA;AACA;AACA;AACA,KAhXA;AAiXA;AACA2C,qBAlXA,+BAkXA;AAAA;;AACA;AACA;AACAZ;AACA;AACAlC;AACAC;AADA;AADA;AAKA,sFACAC,IADA,CACA;AACA;AACA,SAHA,EAIAC,KAJA,CAIA;AACA;AACA,SANA;AAOA;AACA,KAnYA;AAoYA;AACA4C,sBArYA,gCAqYA;AAAA;;AACA;AACA/C;AACAC;AADA;AADA;AAKA;AAAAO;AAAAF;AAAA,iBACAJ,IADA,CACA;AACA;AACA0B,oBACA,oEADA,EAEA,8BAFA,EAGA,SAHA;AAKA,SANA,MAMA;AACAA;AACAC,yBADA;AAEAC,4BAFA;AAGAC,oDAHA;AAIAC;AAJA;AAMA;AACA,OAhBA,EAiBA7B,KAjBA,CAiBA;AACA;AACA,OAnBA;AAoBA,KA/ZA;AAgaA;AACA6C,mBAjaA,6BAiaA;AAAA;;AACA;AACAhD;AACAC;AADA;AADA;AAKA,yFACAC,IADA,CACA;AACA;AACA,OAHA,EAIAC,KAJA,CAIA;AACA;AACA,OANA;AAOA,KA9aA;AA+aA;AACA8C,iBAhbA,2BAgbA;AAAA;;AACA;AACAjD;AACAC;AADA;AADA;AAKA,qFACAC,IADA,CACA;AACA;AACA,OAHA,EAIAC,KAJA,CAIA;AACA;AACA,OANA;AAOA,KA7bA;AA8bA;AACA+C,0BA/bA,oCA+bA;AAAA;;AACA;AACAlD;AACAC;AADA;AADA;AAKA,yEACAC,IADA,CACA;AACA;AACA,OAHA,EAIAC,KAJA,CAIA;AACA;AACA,OANA;AAOA,KA5cA;AA6cA;AACAgD,sBA9cA,gCA8cA;AAAA;;AACA;AACAnD;AACAC;AADA;AADA;AAKA,qEACAC,IADA,CACA;AACA;AACA,OAHA,EAIAC,KAJA,CAIA;AACA;AACA,OANA;AAOA,KA3dA;AA4dA;AACAiD,wBA7dA,kCA6dA;AACA;AACA;AACA;AACA,KAjeA;AAkeAC,oBAleA,4BAkeA/E,gBAleA,EAkeA;AACA;AACA,KApeA;AAqeAgF,aAreA,uBAqeA;AACA;AACA,KAveA;AAweAC,UAxeA,kBAweA/E,KAxeA,EAweAC,KAxeA,EAweA;AACA;AACA;AACA;AACA;AA5eA,GAhEA;AA8iBA+E,SA9iBA,qBA8iBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACA9C,2BADA;;AAAA;AAAA;AAAA,qBAEAA,2BAFA;;AAAA;AAAA;AAAA,qBAGAA,6BAHA;;AAAA;AAAA;AAAA,qBAIAA,yBAJA;;AAAA;AAAA;AAAA,qBAKAA,8BALA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA,GApjBA;AAqjBA+C;AACA7G,aADA,qBACA8G,GADA,EACA;AACA;AACAhD;AACA;AACAA;AACA,SAFA;AAGA;AACA,KARA;AASA7D,aATA,qBASA6G,GATA,EASA;AACA;AACAhD;AACA;AACAA;AACA,SAFA;AAGA;AACA,KAhBA;AAiBAzD,eAjBA,uBAiBAyG,GAjBA,EAiBA;AACA;AACAhD;AACA;AACAA;AACA,SAFA;AAGA;AACA,KAxBA;AAyBA5D,WAzBA,mBAyBA4G,GAzBA,EAyBA;AACA;AACAhD;AACA;AACAA;AACA,SAFA;AAGA;AACA,KAhCA;AAiCAxD,gBAjCA,wBAiCAwG,GAjCA,EAiCA;AACA;AACAhD;AACA;AACAA;AACA,SAFA;AAGA;AACA;AAxCA;AArjBA","names":["XLSX","name","components","navbar","data","pestaña","productos","historial","ordenes","bodegas","bod","detalleHist","detalleOrden","imagenes","codigoAgregar","productoAgregar","marcaAgregar","descripcionAgrega","stockAgrega","imagen","codigoBarra","imagenDir","producto","marca","descripcion","stockBodegaEditar","stockCriticoEditar","nomBodegaEditar","stockREG","histo","memoHist","dismissSecs","dismissCountDown","mensaje","color","texto","validations","required","computed","mapState","created","methods","exportar","num","CodigoBarra","Producto","Marca","Stock","filename","Memo","Funcionario","Dependencia","Fecha","Cantidad","Código","Bodega","Proveedor","cargarProductos","headers","token","then","catch","cargarBodegas","llenarBodegas","nomBodega","stockBodega","stockCritico","Volver","$","VolverHist","VolverORD","ActAgregar","Acteditar","ActHist","ActOrdenes","ActDHist","corrHistorial","memo","ActDOrdenes","codOrden","CargaImagen","e","imagenAgrega","AgregarProducto","nomProducto","stock","Swal","icon","title","text","footer","subirImagen","formData","agregarStock","cantMinStockReg","cantMin","cantMinCritico","ObtenerDatos","obtenerImagenes","recargarCritico","ObtenerStockCritico","CargaImagenEditar","imagenEdita","EditarProducto","subirImagenEditar","EditarStockCritico","cargarHistorial","cargarOrdenes","cargarDetalleHistorial","cargarDetalleOrden","cantMinCriticoEditar","countDownChanged","showAlert","alerta","mounted","watch","val"],"sourceRoot":"src/views","sources":["productos.vue"],"sourcesContent":["<template>\r\n    <div class=\"menu\">\r\n        <navbar />\r\n        <b-container><br>\r\n            <h1 class=\"mt-2\">Administración de Productos</h1>\r\n            <h2 class=\"mt-1\" v-if=\"pestaña === 'productos'\"> Listado de Productos</h2>\r\n            <h2 class=\"mt-1\" v-if=\"pestaña === 'historial'\"> Historial de entrega de insumos del producto: {{codigoBarra}}</h2>\r\n            <h2 class=\"mt-1\" v-if=\"pestaña === 'ordenes'\"> Ordenes de compra del producto: {{codigoBarra}}</h2> \r\n            <h2 class=\"mt-1\" v-if=\"pestaña === 'detalleHist'\"> Detalle del MEMO N°: {{memoHist}}</h2>\r\n            <h2 class=\"mt-1\" v-if=\"pestaña === 'detalleOrden'\"> Detalle de la orden de compra numero: {{histo}}</h2>\r\n            <b-alert\r\n              :show=\"dismissCountDown\"\r\n              dismissible\r\n              :variant=\"mensaje.color\"\r\n              @dismissed=\"dismissCountDown=0\"\r\n              @dismiss-count-down=\"countDownChanged\"\r\n              >\r\n              {{mensaje.texto}}\r\n            </b-alert>\r\n            <div class=\"mt-1\">\r\n                <b-row v-if=\"pestaña === 'productos'\">\r\n                    <b-col cols=\"12\" md=\"12\">\r\n                        <b-button @click=\"ActAgregar()\" class=\"btn-success btn boton mt-5\">Agregar Producto</b-button>\r\n                    </b-col>\r\n                </b-row>\r\n                <table class=\"table table-striped table-dark table-responsive-lg table-responsive-md\" id=\"productos\" v-if=\"pestaña === 'productos'\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th scope=\"col\">Productos</th>\r\n                      <th scope=\"col\">Codigo de Barras</th>\r\n                      <th scope=\"col\">Marca</th>\r\n                      <th scope=\"col\">Stock DirecReg</th>\r\n                      <th scope=\"col\">Edición</th>\r\n                      <th scope=\"col\">Entregas</th>\r\n                      <th scope=\"col\">Ordenes</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"i in productos\" :key=\"i.codigoBarra\">\r\n                      <td scope=\"row\">{{i.nomProducto}}</td>\r\n                      <td>{{i.codigoBarra}}</td>\r\n                      <td>{{i.marca}}</td>\r\n                      <td>{{i.stock}}</td>\r\n                      <td><b-button @click=\"Acteditar(i.codigoBarra)\" class=\"btn-warning btn-sm\" style=\"border-color: white;\">Editar</b-button></td>\r\n                      <td><b-button @click=\"ActHist(i.codigoBarra)\" class=\"btn btn-sm\" style=\"border-color: white;\">Historial</b-button></td>\r\n                      <td><b-button @click=\"ActOrdenes(i.codigoBarra)\" class=\"btn-success btn-sm\" style=\"border-color: white;\">Ordenes</b-button></td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n                <br v-if=\"pestaña === 'productos'\"><div class=\"mb-1\">\r\n                    <b-button @click=\"exportar(1)\" v-if=\"pestaña === 'productos'\" class=\"btn-success boton\">Exportar</b-button>\r\n                </div>\r\n                <div class=\"card mt-5\" v-if=\"pestaña === 'agregar'\" style=\"border-color: black;\">\r\n                    <div class=\"card-header\">\r\n                        <h2>Agrega un Nuevo Producto</h2>\r\n                    </div>\r\n                    <div class=\"card-body\">\r\n                        <b-row class=\"mt-2\">\r\n                            <b-col cols=\"12\" md=\"3\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Codigo de Barras</label>\r\n                                <input type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"$v.codigoAgregar.$model\">\r\n                                <p class=\"text-danger\" v-if=\"$v.codigoAgregar.$error\" >El codigo del Producto es Requerido</p>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"4\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Nombre del Producto</label>\r\n                                <input type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"$v.productoAgregar.$model\">\r\n                                <p class=\"text-danger\" v-if=\"$v.productoAgregar.$error\" >El nombre del Producto es Requerido</p>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"3\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Marca del Producto</label>\r\n                                <input type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"$v.marcaAgregar.$model\">\r\n                                <p class=\"text-danger\" v-if=\"$v.marcaAgregar.$error\" >La marca del Producto es Requerida</p>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"2\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Stock Reg.</label>\r\n                                <input type=\"number\" @change=\"cantMinStockReg(stockAgrega)\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"$v.stockAgrega.$model\">\r\n                                <p class=\"text-danger\" v-if=\"$v.stockAgrega.$error\" >El stock regional del Producto es Requerida</p>\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mt-4\">\r\n                            <b-col cols=\"12\" md=\"12\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Descripcion del Productos</label>\r\n                                <textarea type=\"text\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" v-model=\"$v.descripcionAgrega.$model\"></textarea>\r\n                                <p class=\"text-danger\" v-if=\"$v.descripcionAgrega.$error\" >La descripción del Producto es Requerida</p>\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mt-4\" v-for=\"i in bodegas\" :key=\"i.nomBodega\">\r\n                            <b-col cols=\"12\" md=\"4\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Nombre Bodega</label>\r\n                                <input disabled type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"i.nomBodega\">\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"4\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Stock de Bodega</label>\r\n                                <input type=\"number\" @change=\"cantMin(i.nomBodega)\" class=\"form-control\" v-model=\"i.stockBodega\">\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"4\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Stock Critico</label>\r\n                                <input type=\"number\" @change=\"cantMinCritico(i.nomBodega)\" class=\"form-control\" v-model=\"i.stockCritico\">\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mt-5\">\r\n                            <b-col cols=\"12\" md=\"6\">\r\n                                <b-button @click=\"Volver()\" class=\"btn btn-sm boton\">Volver al listado</b-button>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"6\">\r\n                                <b-button @click=\"AgregarProducto()\" class=\"btn-success btn-sm boton\">Agregar Producto</b-button>\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mt-5\">\r\n                            <b-col cols=\"12\" md=\"12\">\r\n                                <img src=\"../assets/no-imagen.png\" id=\"imagenAgrega\" width=\"40%\">\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mt-5\">\r\n                            <b-col cols=\"12\" md=\"12\">\r\n                                <input @change=\"CargaImagen($event)\" id=\"fileInput\" class=\"form-control\" type=\"file\" accept=\"image/*\">\r\n                            </b-col>\r\n                        </b-row>\r\n                    </div>\r\n                </div>\r\n                <div class=\"card mt-5\" v-if=\"pestaña === 'editar'\" style=\"border-color: black;\">\r\n                    <div class=\"card-header\">\r\n                        <h2>Editar un Producto</h2>\r\n                    </div>\r\n                    <div class=\"card-body\">\r\n                        <b-row class=\"mt-2\">\r\n                            <b-col cols=\"12\" md=\"4\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Nombre del Producto</label>\r\n                                <input type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"$v.producto.$model\">\r\n                                <p class=\"text-danger\" v-if=\"$v.producto.$error\" >El nombre del Producto es Requerido</p>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"4\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Marca del Producto</label>\r\n                                <input type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"$v.marca.$model\">\r\n                                <p class=\"text-danger\" v-if=\"$v.marca.$error\" >La marca del Producto es Requerida</p>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"4\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Stock DIREG</label>\r\n                                <input type=\"number\" @change=\"cantMinStockReg(stockREG)\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"$v.stockREG.$model\">\r\n                                <p class=\"text-danger\" v-if=\"$v.stockREG.$error\" >La marca del Producto es Requerida</p>\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mt-4\">\r\n                            <b-col cols=\"12\" md=\"12\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Descripcion del Productos</label>\r\n                                <textarea type=\"text\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" v-model=\"$v.descripcion.$model\"></textarea>\r\n                                <p class=\"text-danger\" v-if=\"$v.descripcion.$error\" >La descripción del Producto es Requerida</p>\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mt-4\">\r\n                            <b-col cols=\"12\" md=\"4\">\r\n                                <b-button @click=\"EditarStockCritico()\" class=\"btn-warning btn-sm boton-margin\">Editar Stock Critico</b-button>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"4\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Nombre de la Bodega</label>\r\n                                <select class=\"form-control\" @change=\"recargarCritico()\" v-model=\"nomBodegaEditar\">\r\n                                    <option v-for=\"i in bod\" :key=\"i.nomBodega\" :value=\"i.nomBodega\">{{i.nomBodega}}</option>\r\n                                </select>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"4\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Stock Critico</label>\r\n                                <input type=\"number\" @change=\"cantMinCriticoEditar(stockCriticoEditar)\" class=\"form-control\" v-model=\"stockCriticoEditar\">\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mt-5\">\r\n                            <b-col cols=\"12\" md=\"6\">\r\n                                <b-button @click=\"Volver()\" class=\"btn btn-sm boton\">Volver al listado</b-button>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"6\">\r\n                                <b-button @click=\"EditarProducto()\" class=\"btn-success btn-sm boton\">Editar Producto</b-button>\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mt-5\">\r\n                            <b-col cols=\"12\" md=\"12\">\r\n                                <img :src=\"imagenDir\" id=\"imagenEdita\" width=\"40%\">\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mt-5\">\r\n                            <b-col cols=\"12\" md=\"12\">\r\n                                <input @change=\"CargaImagenEditar($event)\" id=\"fileInputEdita\" class=\"form-control\" type=\"file\" accept=\"image/*\">\r\n                            </b-col>\r\n                        </b-row>\r\n                    </div>\r\n                </div>\r\n                <b-row v-if=\"pestaña === 'historial'\">\r\n                    <b-col cols=\"12\" md=\"12\">\r\n                        <b-button @click=\"Volver()\" class=\"btn btn boton mt-5\">Volver a Productos</b-button>\r\n                    </b-col>\r\n                </b-row>\r\n                <table class=\"table table-striped table-dark table-responsive-lg table-responsive-md\" id=\"historial\" v-if=\"pestaña === 'historial'\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th scope=\"col\">MEMO</th>\r\n                      <th scope=\"col\">Funcionario</th>\r\n                      <th scope=\"col\">Dependencia</th>\r\n                      <th scope=\"col\">Fecha</th>\r\n                      <th scope=\"col\">Ver al Detalle</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"i in historial\" :key=\"i.corrHistorial\">\r\n                      <td scope=\"row\">{{i.memo}}</td>\r\n                      <td>{{i.nomFuncionario}}</td>\r\n                      <td>{{i.nomDependencia}}</td>\r\n                      <td>{{i.fecha}}</td>\r\n                      <td><b-button @click=\"ActDHist(i.corrHistorial, i.memo)\" class=\"btn-success btn-sm\" style=\"border-color: white;\">Detalles</b-button></td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n                <br v-if=\"pestaña === 'historial'\"><div class=\"mb-1\">\r\n                    <b-button @click=\"exportar(2)\" v-if=\"pestaña === 'historial'\" class=\"btn-success boton\">Exportar</b-button>\r\n                </div>\r\n                <b-row v-if=\"pestaña === 'detalleHist'\">\r\n                    <b-col cols=\"12\" md=\"12\">\r\n                        <b-button @click=\"VolverHist()\" class=\"btn btn boton mt-5\">Volver al Historial</b-button>\r\n                    </b-col>\r\n                </b-row>\r\n                <table class=\"table table-striped table-dark table-responsive-lg table-responsive-md\" id=\"detalleHist\" v-if=\"pestaña === 'detalleHist'\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th scope=\"col\">ID</th>\r\n                      <th scope=\"col\">Codigo Barra</th>\r\n                      <th scope=\"col\">Producto</th>\r\n                      <th scope=\"col\">Cantidad</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"i in detalleHist\" :key=\"i.corrHistProd\">\r\n                      <td scope=\"row\">{{i.corrHistProd}}</td>\r\n                      <td>{{i.codigoBarra}}</td>\r\n                      <td>{{i.nomProducto}}</td>\r\n                      <td>{{i.cantidad}}</td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n                <br v-if=\"pestaña === 'detalleHist'\"><div class=\"mb-1\">\r\n                    <b-button @click=\"exportar(3)\" v-if=\"pestaña === 'detalleHist'\" class=\"btn-success boton\">Exportar</b-button>\r\n                </div>\r\n                <b-row v-if=\"pestaña === 'ordenes'\">\r\n                    <b-col cols=\"12\" md=\"12\">\r\n                        <b-button @click=\"Volver()\" class=\"btn btn boton mt-5\">Volver a Productos</b-button>\r\n                    </b-col>\r\n                </b-row>\r\n                <table class=\"table table-striped table-dark table-responsive-lg table-responsive-md\" id=\"ordenes\" v-if=\"pestaña === 'ordenes'\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th scope=\"col\">Codigo de Orden</th>\r\n                      <th scope=\"col\">Bodega</th>\r\n                      <th scope=\"col\">Proveedor</th>\r\n                      <th scope=\"col\">Fecha</th>\r\n                      <th scope=\"col\">Ver al Detalle</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"i in ordenes\" :key=\"i.codOrden\">\r\n                      <td scope=\"row\">{{i.codOrden}}</td>\r\n                      <td>{{i.nomBodega}}</td>\r\n                      <td>{{i.proveedor}}</td>\r\n                      <td>{{i.fecha}}</td>\r\n                      <td><b-button @click=\"ActDOrdenes(i.codOrden)\" class=\"btn-success btn-sm\" style=\"border-color: white;\">Detalles</b-button></td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n                <br v-if=\"pestaña === 'ordenes'\"><div class=\"mb-1\">\r\n                    <b-button @click=\"exportar(4)\" v-if=\"pestaña === 'ordenes'\" class=\"btn-success boton\">Exportar</b-button>\r\n                </div>\r\n                <b-row v-if=\"pestaña === 'detalleOrden'\">\r\n                    <b-col cols=\"12\" md=\"12\">\r\n                        <b-button @click=\"VolverORD()\" class=\"btn btn boton mt-5\">Volver al Historial</b-button>\r\n                    </b-col>\r\n                </b-row>\r\n                <table class=\"table table-striped table-dark table-responsive-lg table-responsive-md\" id=\"detalleOrden\" v-if=\"pestaña === 'detalleOrden'\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th scope=\"col\">ID</th>\r\n                      <th scope=\"col\">Codigo Barra</th>\r\n                      <th scope=\"col\">Producto</th>\r\n                      <th scope=\"col\">Cantidad</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"i in detalleOrden\" :key=\"i.corrOrdenProducto\">\r\n                      <td scope=\"row\">{{i.corrOrdenProducto}}</td>\r\n                      <td>{{i.codigoBarra}}</td>\r\n                      <td>{{i.nomProducto}}</td>\r\n                      <td>{{i.cantidad}}</td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n                <br v-if=\"pestaña === 'detalleOrden'\"><div class=\"mb-1\">\r\n                    <b-button @click=\"exportar(5)\" v-if=\"pestaña === 'detalleOrden'\" class=\"btn-success boton\">Exportar</b-button>\r\n                </div>\r\n            </div>\r\n        </b-container>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport navbar from \"../components/navbar.vue\";\r\nimport { required, minLength} from \"vuelidate/lib/validators\";\r\n\r\nimport 'jquery/dist/jquery.min.js';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport \"datatables.net-dt/js/dataTables.dataTables\"\r\nimport \"datatables.net-dt/css/jquery.dataTables.min.css\"\r\nimport $ from 'jquery'; \r\n\r\nimport { mapState } from 'vuex'\r\n\r\n//EXCEL eXportación\r\nimport * as XLSX from 'xlsx/xlsx.mjs';\r\n/* load 'fs' for readFile and writeFile support */\r\nimport * as fs from 'fs';\r\nXLSX.set_fs(fs);\r\n/* load the codepage support library for extended support with older formats  */\r\nimport * as cpexcel from 'xlsx/dist/cpexcel.full.mjs';\r\nXLSX.set_cptable(cpexcel);\r\n\r\nexport default {\r\n    name: \"about\",\r\n    components: {\r\n        navbar,\r\n    },\r\n    data() {\r\n      return {\r\n        //Datos para agregar un nuevo memo (historial) con v-model\r\n        pestaña: 'productos',\r\n        productos: [],\r\n        historial: [],\r\n        ordenes: [],\r\n        bodegas: [],\r\n        bod: [],\r\n        detalleHist: [],\r\n        detalleOrden: [],\r\n        imagenes: [],\r\n        //Variables del AGREGAR\r\n        codigoAgregar: '',\r\n        productoAgregar: '',\r\n        marcaAgregar: '',\r\n        descripcionAgrega: '',\r\n        stockAgrega: 0,\r\n        imagen: null,\r\n        //Variable para reconocer un producto\r\n        codigoBarra: '',\r\n        //Variables para EDITAR\r\n        imagenDir: '',\r\n        producto: '',\r\n        marca: '',\r\n        descripcion: '',\r\n        stockBodegaEditar: 0,\r\n        stockCriticoEditar: 0,\r\n        nomBodegaEditar: '',\r\n        stockREG: 0,\r\n        //Variable Historial\r\n        histo: 0,\r\n        memoHist: 0,\r\n        //Variables de las alertas\r\n        dismissSecs: 5,\r\n        dismissCountDown: 0,\r\n        mensaje: {color: '', texto: ''}\r\n      }\r\n    },\r\n    validations:{\r\n        //Validaciones de los input\r\n        codigoAgregar:{required},\r\n        productoAgregar:{required},\r\n        marcaAgregar:{required},\r\n        descripcionAgrega:{required},\r\n        producto:{required},\r\n        marca:{required},\r\n        descripcion:{required},\r\n        stockAgrega: {required},\r\n        stockREG: {required}\r\n    },\r\n    computed: {\r\n      ...mapState(['token', 'usuarioDB'])\r\n    },\r\n    created(){\r\n        this.cargarProductos();\r\n        this.cargarBodegas();\r\n        this.obtenerImagenes();\r\n    },\r\n    methods:{\r\n        //Función que permite exportar las tablas en excel\r\n        exportar(num) {\r\n            let data = [];\r\n            var filename = \"planilla\";\r\n            if(num === 1){\r\n                var arreglado = this.productos.map( item => { \r\n                    return { CodigoBarra: item.codigoBarra , Producto : item.nomProducto, Marca : item.marca, Stock : item.stock }; \r\n                });\r\n                data = XLSX.utils.json_to_sheet(arreglado);\r\n                filename = 'Productos'\r\n            }else if(num === 2){\r\n                var arreglado = this.historial.map( item => { \r\n                    return { Memo: item.memo , Funcionario : item.nomFuncionario, Dependencia : item.nomDependencia, Fecha : item.fecha}; \r\n                });\r\n                data = XLSX.utils.json_to_sheet(arreglado);\r\n                if(arreglado[0]){\r\n                    filename = 'Historial' + this.codigoBarra\r\n                }else{\r\n                    filename = 'Historial'\r\n                }\r\n            }else if(num === 3){\r\n                var arreglado = this.detalleHist.map( item => { \r\n                    return { Producto: item.nomProducto , CodigoBarra : item.codigoBarra, Cantidad : item.cantidad }; \r\n                });\r\n                data = XLSX.utils.json_to_sheet(arreglado);\r\n                filename = 'Memo' + this.memoHist\r\n            }else if(num === 4){\r\n                var arreglado = this.ordenes.map( item => { \r\n                    return { Código: item.codOrden , Bodega : item.nomBodega, Proveedor : item.proveedor, Fecha : item.fecha }; \r\n                });\r\n                data = XLSX.utils.json_to_sheet(arreglado);\r\n                if(arreglado[0]){\r\n                    filename = 'Ordenes' + this.codigoBarra\r\n                }else{\r\n                    filename = 'Ordenes'\r\n                }\r\n            }else if(num === 5){\r\n                var arreglado = this.detalleOrden.map( item => { \r\n                    return { Producto: item.nomProducto , CodigoBarra : item.codigoBarra, Cantidad : item.cantidad }; \r\n                });\r\n                data = XLSX.utils.json_to_sheet(arreglado);\r\n                filename = 'Orden' + this.histo\r\n            }\r\n            const workbook = XLSX.utils.book_new();\r\n            XLSX.utils.book_append_sheet(workbook, data, filename);\r\n            XLSX.writeFile(workbook, `${filename}.xlsx`);\r\n        },\r\n        //Funcion que carga todos los productos del sistema\r\n        cargarProductos(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get('api/obtenerProductosSolos', config)\r\n            .then(res => {\r\n                this.productos = res.data;\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se han podido cargar los Productos');\r\n            })\r\n        },\r\n        //Función que se encarga de obtener todas las bodegas existentes\r\n        cargarBodegas(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get('api/obtenerbodegas', config)\r\n            .then(res => {\r\n                this.bod = res.data;\r\n                this.nomBodegaEditar = res.data[0].nomBodega\r\n                this.llenarBodegas();\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se han podido cargar las bodegas');\r\n            })\r\n        },\r\n        //Función que se encarga de establecer el stock de estas bodegas\r\n        llenarBodegas(){\r\n            for(var i = 0; i < this.bod.length; i++){\r\n                this.bodegas.push({nomBodega: this.bod[i].nomBodega, stockBodega: 1, stockCritico: 1})\r\n            }\r\n        },\r\n        //Función para regresar a la vista inicial\r\n        Volver(){\r\n            $('#historial').DataTable().destroy();\r\n            $('#ordenes').DataTable().destroy()\r\n            this.imagen = null;\r\n            this.pestaña = 'productos'\r\n            this.cargarProductos();\r\n            this.obtenerImagenes();\r\n            $('#productos').DataTable()\r\n        },\r\n        VolverHist(){\r\n            $('#detalleHist').DataTable().destroy();\r\n            this.pestaña = 'historial'\r\n            this.cargarHistorial();\r\n            $('#historial').DataTable()\r\n        },\r\n        VolverORD(){\r\n            $('#detalleOrden').DataTable().destroy();\r\n            this.pestaña = 'ordenes'\r\n            this.cargarOrdenes();\r\n            $('#ordenes').DataTable()\r\n        },\r\n        //Funciones de activacion de vistas\r\n        ActAgregar(){\r\n            this.pestaña = 'agregar'\r\n            $('#productos').DataTable().destroy();\r\n        },\r\n        Acteditar(codigoBarra){\r\n            this.codigoBarra = codigoBarra\r\n            this.pestaña = 'editar'\r\n            $('#productos').DataTable().destroy();\r\n            this.ObtenerDatos();\r\n            for(var i = 0; i<this.imagenes.length; i++){\r\n                if(this.imagenes[i].split('.')[0] == this.codigoBarra){\r\n                    this.imagenDir = 'http://localhost:3000/dbImagenes/' + this.imagenes[i]\r\n                    break;\r\n                }else{\r\n                    this.imagenDir = 'http://localhost:3000/dbImagenes/no-imagen.png'\r\n                }\r\n            }\r\n        },\r\n        ActHist(codigoBarra){\r\n            this.codigoBarra = codigoBarra\r\n            $('#productos').DataTable().destroy();\r\n            this.pestaña = 'historial'\r\n            $('#historial').DataTable()\r\n            this.cargarHistorial();\r\n        },\r\n        ActOrdenes(codigoBarra){\r\n            this.codigoBarra = codigoBarra\r\n            this.pestaña = 'ordenes'\r\n            $('#productos').DataTable().destroy();\r\n            $('#ordenes').DataTable()\r\n            this.cargarOrdenes();\r\n        },\r\n        ActDHist(corrHistorial, memo){\r\n            this.histo = corrHistorial;\r\n            this.memoHist = memo;\r\n            this.pestaña = 'detalleHist'\r\n            $('#historial').DataTable().destroy();\r\n            $('#detalleHist').DataTable()\r\n            this.cargarDetalleHistorial();\r\n        },\r\n        ActDOrdenes(codOrden){\r\n            this.histo = codOrden;\r\n            this.pestaña = 'detalleOrden';\r\n            $('#ordenes').DataTable().destroy();\r\n            $('#detalleOrden').DataTable()\r\n            this.cargarDetalleOrden();\r\n        },\r\n        //Funciones de AGREGAR\r\n        //Funcion para cargar una imagen y mostrar su preview\r\n        CargaImagen(e){\r\n            this.imagen = e.target.files[0]\r\n            var imagenAgrega = document.getElementById('imagenAgrega');\r\n            imagenAgrega.src = URL.createObjectURL(e.target.files[0]);\r\n        },\r\n        //Función que se encarga de agregar un producto al sistema\r\n        AgregarProducto(){\r\n            this.$v.$touch()\r\n            if(!this.$v.codigoAgregar.$invalid && !this.$v.productoAgregar.$invalid && !this.$v.marcaAgregar.$invalid && !this.$v.descripcionAgrega.$invalid){\r\n                let config = {\r\n                    headers: {\r\n                        token: this.token\r\n                    }\r\n                }\r\n                this.axios.post('api/agregaProducto', {codigoBarra: this.codigoAgregar, nomProducto: this.productoAgregar, marca: this.marcaAgregar, descripcion: this.descripcionAgrega, stock: this.stockAgrega}, config)\r\n                    .then(res => {\r\n                    if(!res.data.sqlMessage){\r\n                        if(this.imagen !== null){\r\n                            this.subirImagen();\r\n                        }\r\n                        this.agregarStock();\r\n                    }else{\r\n                        Swal.fire({\r\n                        icon: 'error',\r\n                        title: 'Oops...',\r\n                        text: 'No se ha creado este nuevo tipo',\r\n                        footer: 'Codigo o nombre de Producto ya utilizado'\r\n                        })\r\n                    }\r\n                    })\r\n                    .catch(e => {\r\n                    Swal.fire({\r\n                        icon: 'error',\r\n                        title: 'Oops...',\r\n                        text: 'No se ha creado este nuevo tipo',\r\n                        footer: 'Posible error del sistema'\r\n                    })\r\n                    })\r\n            }else{\r\n                this.alerta('danger', 'Porfavor ingrese todos los campos requeridos');\r\n            }\r\n        },\r\n        //SUBIR IMAGEN del nuevo producto\r\n        subirImagen(){\r\n            if(this.imagen !== null){\r\n                const formData = new FormData()\r\n                formData.append('image', this.imagen)\r\n                let config = {\r\n                    headers: {\r\n                        token: this.token\r\n                    }\r\n                }\r\n                this.axios.put(`api/subirImagen/${this.codigoAgregar}`, formData, config)\r\n                    .then(res => {\r\n                        this.alerta('success', 'Se ha logrado subir la imagen')\r\n                    })\r\n                    .catch(e => {\r\n                        this.alerta('danger', 'No se ha logrado subir la imagen')\r\n                    })\r\n            }\r\n        },\r\n        //Funcion que agrega el stock del Producto\r\n        agregarStock(){\r\n            for(var i = 0; i < this.bodegas.length; i++){\r\n                let config = {\r\n                    headers: {\r\n                        token: this.token\r\n                    }\r\n                }\r\n                this.axios.post('api/agregaProductoBodega', {stockBodega: this.bodegas[i].stockBodega, stockCritico: this.bodegas[i].stockCritico, nomBodega: this.bodegas[i].nomBodega, codigoBarra: this.codigoAgregar}, config)\r\n                    .then(res => {\r\n                    if(!res.data.sqlMessage){\r\n                        Swal.fire(\r\n                            'Se ha generado un nuevo Producto',\r\n                            'Seleccione Ok para continuar',\r\n                            'success'\r\n                        )\r\n                    }else{\r\n                        Swal.fire({\r\n                        icon: 'error',\r\n                        title: 'Oops...',\r\n                        text: 'No se ha logrado ingresar los stock del producto',\r\n                        footer: 'Error con el ingreso de Stocks'\r\n                        })\r\n                    }\r\n                    })\r\n                    .catch(e => {\r\n                        Swal.fire({\r\n                            icon: 'error',\r\n                            title: 'Oops...',\r\n                            text: 'No se ha creado este nuevo tipo',\r\n                            footer: 'Posible error del sistema'\r\n                        })\r\n                    })\r\n            }\r\n        },\r\n        //indicamos la minima cantidad para el stock regional\r\n        cantMinStockReg(stock){\r\n            if(stock < 0 || stock === ''){\r\n                this.stockAgrega = 0\r\n                this.stockREG = 0\r\n            }\r\n        },\r\n        //Indicamos el minimo de cantidad para que no este vacio o sea menor a 0\r\n        cantMin(nomBodega){\r\n            const index = this.bodegas.findIndex(item => item.nomBodega == nomBodega);\r\n            if(this.bodegas[index].stockBodega < 0){\r\n                this.bodegas[index].stockBodega = 0;\r\n            }\r\n            if(this.bodegas[index].stockBodega < this.bodegas[index].stockCritico){\r\n                this.alerta('danger', 'El stock que esta ingresando es menor al critico para la bodega ' + this.bodegas[index].nomBodega)\r\n            }\r\n        },\r\n        //Indicamos el minimo de cantidad para que no este vacio o sea menor a 0\r\n        cantMinCritico(nomBodega){\r\n            const index = this.bodegas.findIndex(item => item.nomBodega == nomBodega);\r\n            if(this.bodegas[index].stockCritico < 0){\r\n                this.bodegas[index].stockCritico = 0;\r\n            }\r\n            if(this.bodegas[index].stockCritico > this.bodegas[index].stockBodega ){\r\n                this.alerta('danger', 'El stock que esta ingresando es menor al critico para la bodega ' + this.bodegas[index].nomBodega)\r\n            }\r\n        },\r\n        //FUNCIONES PARA EDITAR\r\n        //Función que permite obtener los datos directamente de la tabla\r\n        ObtenerDatos(){\r\n            const index = this.productos.findIndex(item => item.codigoBarra == this.codigoBarra);\r\n            var data = this.productos[index]\r\n            this.producto = data.nomProducto\r\n            this.marca = data.marca\r\n            this.descripcion = data.descripcion\r\n            this.stockREG = data.stock\r\n            this.ObtenerStockCritico();\r\n        },\r\n        //Función que obtiene una imagen\r\n        obtenerImagenes(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n             this.axios.get(`api/obtenerImagen`, config)\r\n                .then(res => {\r\n                    this.imagenes = res.data\r\n                })\r\n                .catch(e => {\r\n                    this.alerta('danger', 'Este producto no posee imagen o no ha cargado correctamente')\r\n                })\r\n\r\n        },\r\n        //Función que recarga la función siguiente paraq un stock Critico\r\n        recargarCritico(){\r\n            this.ObtenerStockCritico();\r\n        },\r\n        //Función que obtiene el stockCritio actual del producto según la bodega seleccionada en el editar\r\n        ObtenerStockCritico(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get(`api/obtenerProductoBodega/${this.codigoBarra}/${this.nomBodegaEditar}`, config)\r\n            .then(res => {\r\n                this.stockCriticoEditar = res.data[0].stockCritico;\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se ha logrado cargar el stock Critico');\r\n            })\r\n        },\r\n        CargaImagenEditar(e){\r\n            this.imagen = e.target.files[0]\r\n            var imagenEdita = document.getElementById('imagenEdita');\r\n            imagenEdita.src = URL.createObjectURL(e.target.files[0]);\r\n        },\r\n        //Editar un producto \r\n        EditarProducto(){\r\n            this.$v.$touch()\r\n            if(!this.$v.producto.$invalid && !this.$v.marca.$invalid && !this.$v.descripcion.$invalid){\r\n                let config = {\r\n                    headers: {\r\n                        token: this.token\r\n                    }\r\n                }\r\n                this.axios.put(`api/editarProducto/${this.codigoBarra}`, {nomProducto: this.producto, marca: this.marca, descripcion: this.descripcion, stock: this.stockREG}, config)\r\n                    .then(res => {\r\n                    if(!res.data.sqlMessage){\r\n                        if(this.imagen !== null){\r\n                            this.subirImagenEditar();\r\n                            this.obtenerImagenes();\r\n                        }\r\n                        Swal.fire(\r\n                        'Se ha editado al producto satisfactoriamente',\r\n                        'Seleccione Ok para continuar',\r\n                        'success'\r\n                        )\r\n                    }else{\r\n                        Swal.fire({\r\n                        icon: 'error',\r\n                        title: 'Oops...',\r\n                        text: 'No se ha actualizado el producto',\r\n                        footer: 'Dato repetido asegurese de que el codigo o nombre no existan'\r\n                        })\r\n                    }\r\n                    })\r\n                    .catch(e => {\r\n                    this.alerta('danger', 'No se ha logrado editar al producto');\r\n                })\r\n            }else{\r\n                this.alerta('danger', 'Rellene todos los campos para editar el Producto')\r\n            }\r\n        },\r\n        //SUBIR IMAGEN de un producto existente\r\n        subirImagenEditar(){\r\n            if(this.imagen !== null){\r\n                const formData = new FormData()\r\n                formData.append('image', this.imagen)\r\n                let config = {\r\n                    headers: {\r\n                        token: this.token\r\n                    }\r\n                }\r\n                this.axios.put(`api/subirImagen/${this.codigoBarra}`, formData, config)\r\n                    .then(res => {\r\n                        this.alerta('success', 'Se ha logrado subir la imagen')\r\n                    })\r\n                    .catch(e => {\r\n                        this.alerta('danger', 'No se ha logrado subir la imagen')\r\n                    })\r\n            }\r\n        },\r\n        //EDITAR EL STOCK CRITICO\r\n        EditarStockCritico(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.put(`api/editarstockCritico/${this.codigoBarra}`, {stockCritico: this.stockCriticoEditar, nomBodega: this.nomBodegaEditar}, config)\r\n                .then(res => {\r\n                if(!res.data.sqlMessage){\r\n                    Swal.fire(\r\n                    'Se ha editado el stock critico del producto de forma satisfactoria',\r\n                    'Seleccione Ok para continuar',\r\n                    'success'\r\n                    )\r\n                }else{\r\n                    Swal.fire({\r\n                    icon: 'error',\r\n                    title: 'Oops...',\r\n                    text: 'No se ha actualizado el producto',\r\n                    footer: 'Dato repetido asegurese de que el codigo o nombre no existan'\r\n                    })\r\n                }\r\n                })\r\n                .catch(e => {\r\n                this.alerta('danger', 'No se ha logrado editar al producto');\r\n            })\r\n        },\r\n        //CARGAR DATOS DE TABLA HISTORIAL\r\n        cargarHistorial(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get(`api/obtenerHistorialesProducto/${this.codigoBarra}`, config)\r\n            .then(res => {\r\n                this.historial = res.data;\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se ha logrado cargar el historial');\r\n            })\r\n        },\r\n        //Caragar tabla de ordenes de compra de un producto\r\n        cargarOrdenes(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get(`api/obtenerOrdenesProducto/${this.codigoBarra}`, config)\r\n            .then(res => {\r\n                this.ordenes = res.data;\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se ha logrado cargar la orden');\r\n            })\r\n        },\r\n        //Cargar los detalles de un historial\r\n        cargarDetalleHistorial(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get(`api/obtenerHistorial/${this.histo}`, config)\r\n            .then(res => {\r\n                this.detalleHist = res.data;\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se ha logrado cargar el detalle del historial');\r\n            })\r\n        },\r\n        //Cargar los detalles de una orden\r\n        cargarDetalleOrden(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get(`api/obtenerOrden/${this.histo}`, config)\r\n            .then(res => {\r\n                this.detalleOrden = res.data;\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se ha logrado cargar el detalle de una orden');\r\n            })\r\n        },\r\n        //Al cambiar el input del stock critico evitar que sea menos que 1 y alertar si es inferior al stock de bodega\r\n        cantMinCriticoEditar(){\r\n            if(this.stockCriticoEditar < 1){\r\n                this.stockCriticoEditar = 1;\r\n            }\r\n        },\r\n        countDownChanged(dismissCountDown) {\r\n            this.dismissCountDown = dismissCountDown\r\n        },\r\n        showAlert() {\r\n            this.dismissCountDown = this.dismissSecs\r\n        },\r\n        alerta(color, texto){\r\n            this.mensaje.color = color;\r\n            this.mensaje.texto = texto;\r\n            this.showAlert();\r\n        },\r\n    },\r\n    async mounted(){\r\n      await $('#productos').DataTable()\r\n      await $('#historial').DataTable()\r\n      await $('#detalleHist').DataTable()\r\n      await $('#ordenes').DataTable()\r\n      await $('#detalleOrden').DataTable()\r\n    },\r\n    watch: {\r\n      productos(val) {\r\n        if(this.pestaña === 'productos'){\r\n          $('#productos').DataTable().destroy();\r\n          this.$nextTick(()=> {\r\n            $('#productos').DataTable()\r\n          });\r\n        }\r\n      },\r\n      historial(val) {\r\n        if(this.pestaña === 'historial'){\r\n          $('#historial').DataTable().destroy();\r\n          this.$nextTick(()=> {\r\n            $('#historial').DataTable()\r\n          });\r\n        }\r\n      },\r\n      detalleHist(val) {\r\n        if(this.pestaña === 'detalleHist'){\r\n          $('#detalleHist').DataTable().destroy();\r\n          this.$nextTick(()=> {\r\n            $('#detalleHist').DataTable()\r\n          });\r\n        }\r\n      },\r\n      ordenes(val) {\r\n        if(this.pestaña === 'ordenes'){\r\n          $('#ordenes').DataTable().destroy();\r\n          this.$nextTick(()=> {\r\n            $('#ordenes').DataTable()\r\n          });\r\n        }\r\n      },\r\n      detalleOrden(val) {\r\n        if(this.pestaña === 'detalleOrden'){\r\n          $('#detalleOrden').DataTable().destroy();\r\n          this.$nextTick(()=> {\r\n            $('#detalleOrden').DataTable()\r\n          });\r\n        }\r\n      }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n    body{\r\n        background-color: #eee;\r\n    }\r\n\r\n    .texto{\r\n        text-align: center;\r\n    }\r\n\r\n    .imagen{\r\n        width: 50%;\r\n    }\r\n    .boton{\r\n        margin: 20px;\r\n        width: 90%;\r\n        border-radius: 12px !important;\r\n        border-color: black !important;\r\n    }\r\n    .boton-grande{\r\n        width: 90%;\r\n        margin: 1px;\r\n        border-radius: 12px !important;\r\n        border-color: black !important;\r\n    }\r\n    .boton-margin{\r\n        width: 90%;\r\n        margin: 35px;\r\n        border-radius: 12px !important;\r\n        border-color: black !important;\r\n    }\r\n</style>"]}]}