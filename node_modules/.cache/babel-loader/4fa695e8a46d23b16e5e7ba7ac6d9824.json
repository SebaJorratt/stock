{"remainingRequest":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\babel-loader\\lib\\index.js!D:\\inventarioInformatico\\stock\\stock\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\inventarioInformatico\\stock\\stock\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\inventarioInformatico\\stock\\stock\\src\\views\\insumos.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\inventarioInformatico\\stock\\stock\\src\\views\\insumos.vue","mtime":1647627367881},{"path":"D:\\inventarioInformatico\\stock\\stock\\babel.config.js","mtime":1645539073406},{"path":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647002043141},{"path":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\babel-loader\\lib\\index.js","mtime":1645539058368},{"path":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647002043141},{"path":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\vue-loader\\lib\\index.js","mtime":1645539059241}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovaW52ZW50YXJpb0luZm9ybWF0aWNvL3N0b2NrL3N0b2NrL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnVpbnQ4LWFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5jb3B5LXdpdGhpbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmV2ZXJ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmlsbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkubGFzdC1pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS1yaWdodC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJldmVyc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zZXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc3ViYXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1sb2NhbGUtc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IG5hdmJhciBmcm9tICIuLi9jb21wb25lbnRzL25hdmJhci52dWUiOwppbXBvcnQgeyByZXF1aXJlZCwgbWluTGVuZ3RoIH0gZnJvbSAidnVlbGlkYXRlL2xpYi92YWxpZGF0b3JzIjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKCmZ1bmN0aW9uIGxvYWRGaWxlKHVybCwgY2FsbGJhY2spIHsKICBQaXpaaXBVdGlscy5nZXRCaW5hcnlDb250ZW50KHVybCwgY2FsbGJhY2spOwp9CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImluc3Vtb3MiLAogIGNvbXBvbmVudHM6IHsKICAgIG5hdmJhcjogbmF2YmFyCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy9EYXRvcyBwYXJhIGFncmVnYXIgdW4gbnVldm8gbWVtbyAoaGlzdG9yaWFsKSBjb24gdi1tb2RlbAogICAgICBjYW50aWRhZFByb2R1Y3RvczogMSwKICAgICAgcHJvZHVjdG9zOiBbewogICAgICAgIGtleTogMSwKICAgICAgICBub21Qcm9kdWN0bzogJycsCiAgICAgICAgY2FudGlkYWQ6IDAsCiAgICAgICAgc3RvY2s6IDAsCiAgICAgICAgY29kaWdvQmFycmE6ICcnLAogICAgICAgIGNvZEJhcjogJycsCiAgICAgICAgbWFyY2E6ICcnLAogICAgICAgIHZhY2lvOiAnJywKICAgICAgICBkZXNjcmlwY2lvbjogJycKICAgICAgfV0sCiAgICAgIHByb2RzOiBbXSwKICAgICAgcHJvZHVjdG9BbnQ6ICcnLAogICAgICBpbWFnZW5lczogW10sCiAgICAgIC8vVmFyaWFibGUgcGFyYSBsYXMgZGVwZW5kZW5jaWFzIAogICAgICBkZXBlbmRlbmNpYXM6IFtdLAogICAgICBkZXBlbmRlbmNpYTogJycsCiAgICAgIC8vVmFyaWFibGVzIHBhcmEgaW5kaWNhciBhbCBmdW5jaW9uYXJpbwogICAgICBmdW5jaW9uYXJpb3M6IFtdLAogICAgICBmdW5jaW9uYXJpbzogJycsCiAgICAgIC8vVmFyaWFibGVzIGRlIGxhcyBhbGVydGFzCiAgICAgIGRpc21pc3NTZWNzOiA1LAogICAgICBkaXNtaXNzQ291bnREb3duOiAwLAogICAgICBtZW5zYWplOiB7CiAgICAgICAgY29sb3I6ICcnLAogICAgICAgIHRleHRvOiAnJwogICAgICB9LAogICAgICAvL1ZBUklBQkxFUyBERSBERVRBTExFUwogICAgICBjb2RpZ286ICcnLAogICAgICBwcm9kdWN0bzogJycsCiAgICAgIG1hcmNhOiAnJywKICAgICAgZGVzY3JpcGNpb246ICcnLAogICAgICBtZW1vOiAxLAogICAgICB0aWNrZXQ6ICcnLAogICAgICByZWZlcmVuY2lhOiAnJywKICAgICAgaW1hZ2VuOiBudWxsLAogICAgICBpbWFnZW5EaXI6ICcnCiAgICB9OwogIH0sCiAgdmFsaWRhdGlvbnM6IHsKICAgIC8vVmFsaWRhY2lvbmVzIGRlIGxvcyBpbnB1dAogICAgZGVwZW5kZW5jaWE6IHsKICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkCiAgICB9LAogICAgcmVmZXJlbmNpYTogewogICAgICByZXF1aXJlZDogcmVxdWlyZWQKICAgIH0sCiAgICB0aWNrZXQ6IHsKICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkCiAgICB9CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoWyd0b2tlbicsICd1c3VhcmlvREInXSkpLAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmNhcmdhclByb2R1Y3Rvcyh0cnVlKTsKICAgIHRoaXMuY2FyZ2FyRGVwZW5kZW5jaWFzKCk7CiAgICB0aGlzLm9idGVuZXJVbHRpbW9NZW1vKCk7CiAgICB0aGlzLm9idGVuZXJJbWFnZW5lcygpOwogIH0sCiAgbWV0aG9kczogewogICAgLy9PYnRlbmVyIHVsdGltbyBtZW1vCiAgICBvYnRlbmVyVWx0aW1vTWVtbzogZnVuY3Rpb24gb2J0ZW5lclVsdGltb01lbW8oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgY29uZmlnID0gewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIHRva2VuOiB0aGlzLnRva2VuCiAgICAgICAgfQogICAgICB9OwogICAgICB0aGlzLmF4aW9zLmdldCgnYXBpL29idGVuZXJVbHRpbW9NZW1vJywgY29uZmlnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5tZW1vID0gcmVzLmRhdGFbMF0ubWVtbzsKCiAgICAgICAgaWYgKF90aGlzLm1lbW8gPT09IG51bGwpIHsKICAgICAgICAgIF90aGlzLm1lbW8gPSAwOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpcy5hbGVydGEoJ2RhbmdlcicsICdObyBzZSBoYSBsb2dyYWRvIG9idGVuZXIgZWwgbWVtbycpOwogICAgICB9KTsKICAgIH0sCiAgICAvL01ldG9kbyBxdWUgQ2FyZ2EgdG9kb3MgbG9zIHByb2R1Y3RvcyBkZWwgc2lzdGVtYQogICAgY2FyZ2FyUHJvZHVjdG9zOiBmdW5jdGlvbiBjYXJnYXJQcm9kdWN0b3MocHJpbWVyYSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgdG9rZW46IHRoaXMudG9rZW4KICAgICAgICB9CiAgICAgIH07CiAgICAgIHRoaXMuYXhpb3MuZ2V0KCdhcGkvb2J0ZW5lclByb2R1Y3Rvc1NvbG9zJywgY29uZmlnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczIucHJvZHMgPSByZXMuZGF0YTsKCiAgICAgICAgaWYgKHByaW1lcmEpIHsKICAgICAgICAgIF90aGlzMi5wcm9kdWN0b3NbMF0ubm9tUHJvZHVjdG8gPSBfdGhpczIucHJvZHNbMF0ubm9tUHJvZHVjdG87CiAgICAgICAgICBfdGhpczIucHJvZHVjdG9zWzBdLnN0b2NrID0gX3RoaXMyLnByb2RzWzBdLnN0b2NrOwogICAgICAgICAgX3RoaXMyLnByb2R1Y3Rvc1swXS5jb2RpZ29CYXJyYSA9IF90aGlzMi5wcm9kc1swXS5jb2RpZ29CYXJyYTsKICAgICAgICAgIF90aGlzMi5wcm9kdWN0b3NbMF0uY29kQmFyID0gX3RoaXMyLnByb2RzWzBdLmNvZGlnb0JhcnJhOwogICAgICAgICAgX3RoaXMyLnByb2R1Y3Rvc1swXS5tYXJjYSA9IF90aGlzMi5wcm9kc1swXS5tYXJjYTsKICAgICAgICAgIF90aGlzMi5wcm9kdWN0b3NbMF0uZGVzY3JpcGNpb24gPSBfdGhpczIucHJvZHNbMF0uZGVzY3JpcGNpb247CgogICAgICAgICAgaWYgKF90aGlzMi5wcm9kdWN0b3NbMF0uc3RvY2sgPT09IDApIHsKICAgICAgICAgICAgX3RoaXMyLmFsZXJ0YSgnZGFuZ2VyJywgJ05vIHNlIGVuY3VlbnRyYSBzdG9jayBkZWwgcHJvZHVjdG8gJyArIF90aGlzMi5wcm9kdWN0b3NbMF0ubm9tUHJvZHVjdG8pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpczIuYWxlcnRhKCdkYW5nZXInLCAnTm8gc2UgaGFuIHBvZGlkbyBjYXJnYXIgbG9zIFByb2R1Y3RvcycpOwogICAgICB9KTsKICAgIH0sCiAgICAvL0Z1bmNpw7NuIHF1ZSBzZSBlbmNhcmdhciBkZSBjYXJnYXIgbGFzIGRlcGVuZGVuY2lhcwogICAgY2FyZ2FyRGVwZW5kZW5jaWFzOiBmdW5jdGlvbiBjYXJnYXJEZXBlbmRlbmNpYXMoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbgogICAgICAgIH0KICAgICAgfTsKICAgICAgdGhpcy5heGlvcy5nZXQoJ2FwaS9vYnRlbmVyRGVwZW5kZW5jaWFzJywgY29uZmlnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczMuZGVwZW5kZW5jaWFzID0gcmVzLmRhdGE7CiAgICAgICAgX3RoaXMzLmRlcGVuZGVuY2lhID0gX3RoaXMzLmRlcGVuZGVuY2lhc1swXS5ub21EZXBlbmRlbmNpYTsKCiAgICAgICAgX3RoaXMzLmNhcmdhckZ1bmNpb25hcmlvcygpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzMy5hbGVydGEoJ2RhbmdlcicsICdObyBzZSBoYW4gcG9kaWRvIGNhcmdhciBsYXMgRGVwZW5kZW5jaWFzJyk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vRnVuY2nDs24gcXVlIGNhcmdhIGxvcyBmdW5jaW9uYXJpb3MgYWwgY2FtYmlhciBsYSBkZXBlbmRlbmNpYQogICAgY2FtYmlhRGVwOiBmdW5jdGlvbiBjYW1iaWFEZXAoKSB7CiAgICAgIHRoaXMuY2FyZ2FyRnVuY2lvbmFyaW9zKCk7CiAgICB9LAogICAgLy9GdW5jacOzbiBxdWUgc2UgZW5jYXJnYSBkZSBjYXJnYXIgYSBsb3MgZnVuY2lvbmFyaW9zIGVuY2FyZ2Fkb3MgZGUgbGEgZGVwZW5kZW5jaWEgaW5kaWNhZGEKICAgIGNhcmdhckZ1bmNpb25hcmlvczogZnVuY3Rpb24gY2FyZ2FyRnVuY2lvbmFyaW9zKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgdG9rZW46IHRoaXMudG9rZW4KICAgICAgICB9CiAgICAgIH07CiAgICAgIHRoaXMuYXhpb3MuZ2V0KCJhcGkvb2J0ZW5lckZ1bmNpb25hcmlvRGVwLyIuY29uY2F0KHRoaXMuZGVwZW5kZW5jaWEpLCBjb25maWcpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzNC5mdW5jaW9uYXJpb3MgPSByZXMuZGF0YTsKICAgICAgICBfdGhpczQuZnVuY2lvbmFyaW8gPSBfdGhpczQuZnVuY2lvbmFyaW9zWzBdLm5vbUZ1bmNpb25hcmlvOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzNC5hbGVydGEoJ2RhbmdlcicsICdObyBzZSBoYW4gcG9kaWRvIGNhcmdhciBsb3MgRnVuY2lvbmFyaW9zJyk7CiAgICAgIH0pOwogICAgfSwKICAgIGJ1c2NhclBvckNvZGlnbzogZnVuY3Rpb24gYnVzY2FyUG9yQ29kaWdvKGNvZGlnb0JhcnJhLCBrZXksIGNvZEJhcikgewogICAgICB0aGlzLmFudGVyaW9yKGNvZEJhcik7CiAgICAgIHZhciBpbmRleEFjdHVhbCA9IHRoaXMucHJvZHVjdG9zLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmtleSA9PSBrZXk7CiAgICAgIH0pOwogICAgICB2YXIgcG9zUHJvZCA9IHRoaXMucHJvZHMuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0uY29kaWdvQmFycmEgPT0gY29kaWdvQmFycmE7CiAgICAgIH0pOwoKICAgICAgaWYgKHBvc1Byb2QgIT09IC0xKSB7CiAgICAgICAgdGhpcy5jYW1iaW9Qcm9kdWN0byh0aGlzLnByb2RzW3Bvc1Byb2RdLmNvZGlnb0JhcnJhLCBrZXkpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucHJvZHVjdG9zW2luZGV4QWN0dWFsXS5jb2RCYXIgPSB0aGlzLnByb2R1Y3RvQW50OwogICAgICB9CiAgICB9LAogICAgLy9GdW5jacOzbiBxdWUgdGUgcGVybWl0ZSBndWFyZGFyIGVsIHZhbG9yIGFudGVyaW9yIGRlbCBzZWxlY3QKICAgIGFudGVyaW9yOiBmdW5jdGlvbiBhbnRlcmlvcihjb2RCYXIpIHsKICAgICAgdGhpcy5wcm9kdWN0b0FudCA9IGNvZEJhcjsKICAgIH0sCiAgICAvL1NpIHNlIGNhbWJpYSB1biBwcm9kdWN0byBzZSBkZWJlIGJ1c2NhciBzdSBzdG9jawogICAgY2FtYmlvUHJvZHVjdG86IGZ1bmN0aW9uIGNhbWJpb1Byb2R1Y3RvKGNvZGlnb0JhcnJhLCBrZXkpIHsKICAgICAgdmFyIGluZGV4QWN0dWFsID0gdGhpcy5wcm9kdWN0b3MuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0ua2V5ID09IGtleTsKICAgICAgfSk7CiAgICAgIHZhciByZXBldGlkbyA9IGZhbHNlOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnByb2R1Y3Rvcy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChpICE9IGluZGV4QWN0dWFsKSB7CiAgICAgICAgICBpZiAodGhpcy5wcm9kdWN0b3NbaV0uY29kQmFyID09PSBjb2RpZ29CYXJyYSkgewogICAgICAgICAgICByZXBldGlkbyA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoIXJlcGV0aWRvKSB7CiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5wcm9kcy5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtLmNvZGlnb0JhcnJhID09IGNvZGlnb0JhcnJhOwogICAgICAgIH0pOwogICAgICAgIHZhciBpbmRleDIgPSB0aGlzLnByb2R1Y3Rvcy5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtLmtleSA9PSBrZXk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5wcm9kdWN0b3NbaW5kZXgyXS5zdG9jayA9IHRoaXMucHJvZHNbaW5kZXhdLnN0b2NrOwogICAgICAgIHRoaXMucHJvZHVjdG9zW2luZGV4Ml0ubm9tUHJvZHVjdG8gPSB0aGlzLnByb2RzW2luZGV4XS5ub21Qcm9kdWN0bzsKICAgICAgICB0aGlzLnByb2R1Y3Rvc1tpbmRleDJdLmNvZGlnb0JhcnJhID0gdGhpcy5wcm9kc1tpbmRleF0uY29kaWdvQmFycmE7CiAgICAgICAgdGhpcy5wcm9kdWN0b3NbaW5kZXgyXS5jb2RCYXIgPSB0aGlzLnByb2RzW2luZGV4XS5jb2RpZ29CYXJyYTsKICAgICAgICB0aGlzLnByb2R1Y3Rvc1tpbmRleDJdLm1hcmNhID0gdGhpcy5wcm9kc1tpbmRleF0ubWFyY2E7CiAgICAgICAgdGhpcy5wcm9kdWN0b3NbaW5kZXgyXS5kZXNjcmlwY2lvbiA9IHRoaXMucHJvZHNbaW5kZXhdLmRlc2NyaXBjaW9uOwoKICAgICAgICBpZiAodGhpcy5wcm9kdWN0b3NbaW5kZXgyXS5zdG9jayA8IDEpIHsKICAgICAgICAgIHRoaXMuYWxlcnRhKCdkYW5nZXInLCAnTm8gaGF5IHN0b2NrIGRpc3BvbmlibGUgcGFyYSBlc3RlIHByb2R1Y3RvJyk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5wcm9kdWN0b3NbaW5kZXgyXS5jYW50aWRhZCA+IHRoaXMucHJvZHVjdG9zW2luZGV4Ml0uc3RvY2spIHsKICAgICAgICAgIHRoaXMucHJvZHVjdG9zW2luZGV4Ml0uY2FudGlkYWQgPSB0aGlzLnByb2R1Y3Rvc1tpbmRleDJdLnN0b2NrOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnByb2R1Y3Rvc1tpbmRleEFjdHVhbF0uY29kQmFyID0gdGhpcy5wcm9kdWN0b0FudDsKICAgICAgfQogICAgfSwKICAgIC8vU2UgYWdyZWdhIHVuIG51ZXZvIHBvc2libGUgcHJvZHVjdG8KICAgIC8vQURFTUFTIGRlYmUgcmV2aXNhciBzaSBsb3MgdmFsb3JlcyBhbnRlcmlvcmVzIGVzdGFuIHJlcGV0aWRvcwogICAgYWdyZWdhUHJvZHVjdG86IGZ1bmN0aW9uIGFncmVnYVByb2R1Y3RvKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHRoaXMuY2FudGlkYWRQcm9kdWN0b3MrKzsKICAgICAgdmFyIGEgPSAwOwogICAgICB0aGlzLnByb2R1Y3Rvcy5wdXNoKHsKICAgICAgICBrZXk6IHRoaXMuY2FudGlkYWRQcm9kdWN0b3MsCiAgICAgICAgbm9tUHJvZHVjdG86ICcnLAogICAgICAgIGNhbnRpZGFkOiAwLAogICAgICAgIHN0b2NrOiAwLAogICAgICAgIGNvZGlnb0JhcnJhOiAnJywKICAgICAgICBjb2RCYXI6ICcnLAogICAgICAgIG1hcmNhOiAnJywKICAgICAgICB2YWNpbzogJycsCiAgICAgICAgZGVzY3JpcGNpb246ICcnCiAgICAgIH0pOyAvL0J1c2NhIHNpIHVuIHByb2R1Y3RvIHlhIGV4aXN0ZSBlbiBlbiBhbGd1bm8gZGUgbG9zIHNlbGVjdCBoYWJpbGl0YWRvcyAKCiAgICAgIHdoaWxlIChhIDwgdGhpcy5wcm9kcy5sZW5ndGgpIHsKICAgICAgICB2YXIgaW5kZXggPSB0aGlzLnByb2R1Y3Rvcy5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtLmNvZEJhciA9PSBfdGhpczUucHJvZHNbYV0uY29kaWdvQmFycmE7CiAgICAgICAgfSk7IC8vU2kgbG8gZW5jdWVudHJhIHBhc2EgYWwgc2lndWllbnRlIHByb2R1Y3RvCgogICAgICAgIGlmIChpbmRleCAhPSAtMSkgewogICAgICAgICAgYSsrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvL1NpIGVsIHZhbG9yIHJldG9ybmFkbyBlcyAtMSBzaWduaWZpY2EgcXVlIGVsIHByb2R1Y3RvIHlhIGV4aXN0ZSwgcG9yIGxvIHRhbnRvIGRlYmUgc2VndWlyIGJ1c2NhbmRvCiAgICAgICAgICB0aGlzLnByb2R1Y3Rvc1t0aGlzLnByb2R1Y3Rvcy5sZW5ndGggLSAxXS5ub21Qcm9kdWN0byA9IHRoaXMucHJvZHNbYV0ubm9tUHJvZHVjdG87CiAgICAgICAgICB0aGlzLnByb2R1Y3Rvc1t0aGlzLnByb2R1Y3Rvcy5sZW5ndGggLSAxXS5zdG9jayA9IHRoaXMucHJvZHNbYV0uc3RvY2s7CiAgICAgICAgICB0aGlzLnByb2R1Y3Rvc1t0aGlzLnByb2R1Y3Rvcy5sZW5ndGggLSAxXS5jb2RpZ29CYXJyYSA9IHRoaXMucHJvZHNbYV0uY29kaWdvQmFycmE7CiAgICAgICAgICB0aGlzLnByb2R1Y3Rvc1t0aGlzLnByb2R1Y3Rvcy5sZW5ndGggLSAxXS5jb2RCYXIgPSB0aGlzLnByb2RzW2FdLmNvZGlnb0JhcnJhOwogICAgICAgICAgdGhpcy5wcm9kdWN0b3NbdGhpcy5wcm9kdWN0b3MubGVuZ3RoIC0gMV0ubWFyY2EgPSB0aGlzLnByb2RzW2FdLm1hcmNhOwogICAgICAgICAgdGhpcy5wcm9kdWN0b3NbdGhpcy5wcm9kdWN0b3MubGVuZ3RoIC0gMV0uZGVzY3JpcGNpb24gPSB0aGlzLnByb2RzW2FdLmRlc2NyaXBjaW9uOwogICAgICAgICAgdGhpcy5wcm9kdWN0b3NbdGhpcy5wcm9kdWN0b3MubGVuZ3RoIC0gMV0ua2V5ID0gdGhpcy5jYW50aWRhZFByb2R1Y3RvczsKCiAgICAgICAgICBpZiAodGhpcy5wcm9kdWN0b3NbdGhpcy5wcm9kdWN0b3MubGVuZ3RoIC0gMV0uc3RvY2sgPT09IDApIHsKICAgICAgICAgICAgdGhpcy5hbGVydGEoJ2RhbmdlcicsICdObyBoYXkgc3RvY2sgZGlzcG9uaWJsZSBwYXJhIGVsIHByb2R1Y3RvICcgKyB0aGlzLnByb2R1Y3Rvc1t0aGlzLnByb2R1Y3Rvcy5sZW5ndGggLSAxXS5ub21Qcm9kdWN0byk7CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICBpZiAoYSA9PSB0aGlzLnByb2RzLmxlbmd0aCkgewogICAgICAgICAgdGhpcy5jYW50aWRhZFByb2R1Y3Rvcy0tOwogICAgICAgICAgdGhpcy5wcm9kdWN0b3Muc3BsaWNlKC0xKTsKICAgICAgICAgIHRoaXMuYWxlcnRhKCdkYW5nZXInLCAnTm8gZXhpc3RlbiBtYXMgcHJvZHVjdG9zIHBhcmEgYWdyZWdhcicpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy9TZSBxdWl0YSB1biBQcm9kdWN0byBkZSBsb3MgcXVlIHNlcsOhbiBhZ3JlZ2Fkb3MgYWwgc2lzdGVtYQogICAgcXVpdGFyUHJvZHVjdG86IGZ1bmN0aW9uIHF1aXRhclByb2R1Y3RvKCkgewogICAgICBpZiAodGhpcy5wcm9kdWN0b3MubGVuZ3RoID4gMSkgewogICAgICAgIHRoaXMuY2FudGlkYWRQcm9kdWN0b3MtLTsKICAgICAgICB0aGlzLnByb2R1Y3Rvcy5zcGxpY2UoLTEpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWxlcnRhKCdkYW5nZXInLCAnVGllbmUgcXVlIGV4aXN0aXIgYWwgbWVub3MgMSBwcm9kdWN0bycpOwogICAgICB9CiAgICB9LAogICAgLy9JbmRpY2Ftb3MgZWwgbWluaW1vIGRlIGNhbnRpZGFkIHBhcmEgcXVlIG5vIGVzdGUgdmFjaW8gbyBzZWEgbWVub3IgYSAwCiAgICBjYW50TWluOiBmdW5jdGlvbiBjYW50TWluKHByb2R1Y3RvKSB7CiAgICAgIHZhciBpbmRleCA9IHRoaXMucHJvZHVjdG9zLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmtleSA9PSBwcm9kdWN0bzsKICAgICAgfSk7CgogICAgICBpZiAodGhpcy5wcm9kdWN0b3NbaW5kZXhdLmNhbnRpZGFkIDwgMSB8fCB0aGlzLnByb2R1Y3Rvc1tpbmRleF0uY2FudGlkYWQgPT0gJycpIHsKICAgICAgICB0aGlzLnByb2R1Y3Rvc1tpbmRleF0uY2FudGlkYWQgPSAxOwogICAgICB9IGVsc2UgaWYgKHRoaXMucHJvZHVjdG9zW2luZGV4XS5jYW50aWRhZCA+IHRoaXMucHJvZHVjdG9zW2luZGV4XS5zdG9jaykgewogICAgICAgIHRoaXMucHJvZHVjdG9zW2luZGV4XS5jYW50aWRhZCA9IHRoaXMucHJvZHVjdG9zW2luZGV4XS5zdG9jazsKICAgICAgfQogICAgfSwKICAgIGNvbnZlcnREYXRlTXlzcWw6IGZ1bmN0aW9uIGNvbnZlcnREYXRlTXlzcWwoeW91ckRhdGUpIHsKICAgICAgeW91ckRhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICB2YXIgb2Zmc2V0ID0geW91ckRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTsKICAgICAgeW91ckRhdGUgPSBuZXcgRGF0ZSh5b3VyRGF0ZS5nZXRUaW1lKCkgLSBvZmZzZXQgKiA2MCAqIDEwMDApOwogICAgICByZXR1cm4geW91ckRhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgfSwKICAgIGZlY2hhTWVtbzogZnVuY3Rpb24gZmVjaGFNZW1vKGRhdGUpIHsKICAgICAgdmFyIGZvcm1hdERhdGUgPSBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUpIHsKICAgICAgICB2YXIgZm9ybWF0dGVkX2RhdGUgPSBkYXRlLmdldERhdGUoKSArICItIiArIChkYXRlLmdldE1vbnRoKCkgKyAxKSArICItIiArIGRhdGUuZ2V0RnVsbFllYXIoKTsKICAgICAgICByZXR1cm4gZm9ybWF0dGVkX2RhdGU7CiAgICAgIH07CiAgICB9LAogICAgLy9GdW5jacOzbiBxdWUgcGVybWl0ZSBnZW5lcmFyIHVuIGluZm9ybWUgeSBlbnZpYXIgbG9zIGRhdG9zIGRlIHVuIG51ZXZvIEhJU1RPUklBTCAKICAgIGdlbmVyYXJJbmZvcm1lOiBmdW5jdGlvbiBnZW5lcmFySW5mb3JtZSgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB2YXIgZHQgPSB0aGlzLmNvbnZlcnREYXRlTXlzcWwobmV3IERhdGUoKSk7CiAgICAgIHZhciBzdW1hU3RvY2sgPSAwOwogICAgICB2YXIgc3VtYSA9IDA7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucHJvZHVjdG9zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgc3VtYVN0b2NrID0gc3VtYVN0b2NrICsgdGhpcy5wcm9kdWN0b3NbaV0uc3RvY2s7CiAgICAgICAgc3VtYSA9IHN1bWEgKyB0aGlzLnByb2R1Y3Rvc1tpXS5jYW50aWRhZDsKICAgICAgfQoKICAgICAgc3dhbC5maXJlKHsKICAgICAgICB0aXRsZTogJ8K/U2VndXJvIHF1ZSBkZXNlYSByZWFsaXphciBsYSBlbnRyZWdhIGRlIEluc3Vtb3M/JywKICAgICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICcjMzA4NWQ2JywKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogJyNkMzMnLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdDYW5jZWxhcicsCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfCoVNpIScKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgewogICAgICAgICAgaWYgKHN1bWFTdG9jayA+IDAgJiYgc3VtYSA+IDApIHsKICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICB0b2tlbjogX3RoaXM2LnRva2VuCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgX3RoaXM2LmF4aW9zLnBvc3QoJ2FwaS9hZ3JlZ2FIaXN0b3JpYWwnLCB7CiAgICAgICAgICAgICAgZmVjaGE6IGR0LAogICAgICAgICAgICAgIG5vbUZ1bmNpb25hcmlvOiBfdGhpczYuZnVuY2lvbmFyaW8sCiAgICAgICAgICAgICAgbm9tRGVwZW5kZW5jaWE6IF90aGlzNi5kZXBlbmRlbmNpYSwKICAgICAgICAgICAgICBtZW1vOiBfdGhpczYubWVtbyArIDEKICAgICAgICAgICAgfSwgY29uZmlnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBpZiAoIXJlcy5kYXRhLnNxbE1lc3NhZ2UpIHsKICAgICAgICAgICAgICAgIF90aGlzNi5IaXN0b3JpYWxQcm9kdWN0bygpOwoKICAgICAgICAgICAgICAgIF90aGlzNi5yZXN0YXJTdG9jaygpOwoKICAgICAgICAgICAgICAgIF90aGlzNi5yZW5kZXJEb2MoKTsKCiAgICAgICAgICAgICAgICBfdGhpczYub2J0ZW5lclVsdGltb01lbW8oKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywKICAgICAgICAgICAgICAgICAgdGl0bGU6ICdPb3BzLi4uJywKICAgICAgICAgICAgICAgICAgdGV4dDogJ05vIHNlIGhhIGxvZ3JhZG8gY3JlYXIgJywKICAgICAgICAgICAgICAgICAgZm9vdGVyOiAnQWxnw7puIGRhdG8gaGEgc2lkbyBpbmNvcnJlY3RvIHZlcmlmaXF1ZWxvcycKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywKICAgICAgICAgICAgICAgIHRpdGxlOiAnT29wcy4uLicsCiAgICAgICAgICAgICAgICB0ZXh0OiAnTm8gc2UgaGEgbG9ncmFkbyByZWdpc3RyYXIgbGEgZW50cmVnYSBkZSBpbnN1bW9zJywKICAgICAgICAgICAgICAgIGZvb3RlcjogJ1Bvc2libGUgZXJyb3IgZGVsIHNpc3RlbWEnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChzdW1hU3RvY2sgPCAwKSB7CiAgICAgICAgICAgIF90aGlzNi5hbGVydGEoJ2RhbmdlcicsICdObyBzZSBlbmN1ZW50cmEgc3RvY2sgZGlzcG9uaWJsZScpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXM2LmFsZXJ0YSgnZGFuZ2VyJywgJ05vIHNlIGhhIGluZ3Jlc2FkbyBuaW5ndW5hIGNhbnRpZGFkJyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL1JlZ2lzdHJhIGxvcyBwcm9kdWN0b3MgZGUgZXN0YSBFTlRSRUdBIERFIElOU1VNT1MgCiAgICBIaXN0b3JpYWxQcm9kdWN0bzogZnVuY3Rpb24gSGlzdG9yaWFsUHJvZHVjdG8oKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wcm9kdWN0b3MubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodGhpcy5wcm9kdWN0b3NbaV0uY2FudGlkYWQgPiAwKSB7CiAgICAgICAgICB2YXIgY29uZmlnID0gewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgdG9rZW46IHRoaXMudG9rZW4KICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuYXhpb3MucG9zdCgnYXBpL2FncmVnYWhpc3RQcm9kJywgewogICAgICAgICAgICBjYW50aWRhZDogdGhpcy5wcm9kdWN0b3NbaV0uY2FudGlkYWQsCiAgICAgICAgICAgIGNvZGlnb0JhcnJhOiB0aGlzLnByb2R1Y3Rvc1tpXS5jb2RCYXIKICAgICAgICAgIH0sIGNvbmZpZykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIGlmICghcmVzLmRhdGEuc3FsTWVzc2FnZSkgewogICAgICAgICAgICAgIFN3YWwuZmlyZSgnU2UgaGEgcmVnaXN0cmFkbyBsYSBlbnRyZWdhIGRlIGluc3Vtb3MgY29ycmVjdGFtZW50ZScsICdTZWxlY2Npb25lIE9rIHBhcmEgY29udGludWFyJywgJ3N1Y2Nlc3MnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywKICAgICAgICAgICAgICAgIHRpdGxlOiAnT29wcy4uLicsCiAgICAgICAgICAgICAgICB0ZXh0OiAnTm8gc2UgaGEgbG9ncmFkbyBjcmVhciAnLAogICAgICAgICAgICAgICAgZm9vdGVyOiAnQWxnw7puIGRhdG8gaGEgc2lkbyBpbmNvcnJlY3RvIHZlcmlmaXF1ZWxvcycKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLAogICAgICAgICAgICAgIHRpdGxlOiAnT29wcy4uLicsCiAgICAgICAgICAgICAgdGV4dDogJ05vIHNlIGhhIGxvZ3JhZG8gcmVnaXN0cmFyIGxhIGVudHJlZ2EgZGUgaW5zdW1vcycsCiAgICAgICAgICAgICAgZm9vdGVyOiAnUG9zaWJsZSBlcnJvciBkZWwgc2lzdGVtYScKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvL1Jlc3RhIGxvcyBzdG9jayBkZSBjYWRhIHByb2R1Y3RvCiAgICByZXN0YXJTdG9jazogZnVuY3Rpb24gcmVzdGFyU3RvY2soKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnByb2R1Y3Rvcy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLnByb2R1Y3Rvc1tpXS5jYW50aWRhZCA+IDApIHsKICAgICAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbgogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy5heGlvcy5wdXQoImFwaS9hY3R1YWxpemFTdG9jay8iLmNvbmNhdCh0aGlzLnByb2R1Y3Rvc1tpXS5jb2RCYXIpLCB7CiAgICAgICAgICAgIGNhbnRpZGFkOiB0aGlzLnByb2R1Y3Rvc1tpXS5jYW50aWRhZAogICAgICAgICAgfSwgY29uZmlnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgX3RoaXM3LmFjdHVhbGl6YXJTdG9jaygpOwogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIG1lbnNhamUgPSAnUG9zaWJsZSBlcnJvciBkZWwgc2lzdGVtYSc7CiAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywKICAgICAgICAgICAgICB0aXRsZTogJ09vcHMuLi4nLAogICAgICAgICAgICAgIHRleHQ6ICdObyBzZSBoYSBsb2dyYWRvIHJlZ2lzdHJhciBsYSBlbnRyZWdhIGRlIGluc3Vtb3MnLAogICAgICAgICAgICAgIGZvb3RlcjogbWVuc2FqZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8vQWN0dWFsaXphIGxhIHBhZ2luYSB0cmFzIGdlbmVyYXIgdW5hIGVudHJlZ2EgZGUgaW5zdW1vcwogICAgYWN0dWFsaXphclN0b2NrOiBmdW5jdGlvbiBhY3R1YWxpemFyU3RvY2soKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wcm9kdWN0b3MubGVuZ3RoIC0gMTsgaSsrKSB7CiAgICAgICAgdGhpcy5jYW50aWRhZFByb2R1Y3Rvcy0tOwogICAgICAgIHRoaXMucHJvZHVjdG9zLnNwbGljZSgtMSk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2FyZ2FyUHJvZHVjdG9zKHRydWUpOwogICAgfSwKICAgIC8vUGVybWl0ZSB2ZXIgbG9zIGRldGFsbGVzIGRlIHVuIHByb2R1Y3RvIHkgbG9zIGNhcmdhCiAgICBkZXRhbGxlczogZnVuY3Rpb24gZGV0YWxsZXMoaWQpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICB2YXIgY29uZmlnID0gewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIHRva2VuOiB0aGlzLnRva2VuCiAgICAgICAgfQogICAgICB9OwogICAgICB0aGlzLmF4aW9zLmdldCgiYXBpL29idGVuZXJQcm9kdWN0by8iLmNvbmNhdChpZCksIGNvbmZpZykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXM4LmNvZGlnbyA9IHJlcy5kYXRhWzBdLmNvZGlnb0JhcnJhOwogICAgICAgIF90aGlzOC5wcm9kdWN0byA9IHJlcy5kYXRhWzBdLm5vbVByb2R1Y3RvOwogICAgICAgIF90aGlzOC5tYXJjYSA9IHJlcy5kYXRhWzBdLm1hcmNhOwogICAgICAgIF90aGlzOC5kZXNjcmlwY2lvbiA9IHJlcy5kYXRhWzBdLmRlc2NyaXBjaW9uOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF90aGlzOC5pbWFnZW5lcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKF90aGlzOC5pbWFnZW5lc1tpXS5zcGxpdCgnLicpWzBdID09IF90aGlzOC5jb2RpZ29CYXJyYSkgewogICAgICAgICAgICBfdGhpczguaW1hZ2VuRGlyID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9kYkltYWdlbmVzLycgKyBfdGhpczguaW1hZ2VuZXNbaV07CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXM4LmltYWdlbkRpciA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvZGJJbWFnZW5lcy9uby1pbWFnZW4ucG5nJzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgIGljb246ICdlcnJvcicsCiAgICAgICAgICB0aXRsZTogJ09vcHMuLi4nLAogICAgICAgICAgdGV4dDogJ05vIHNlIGhhIGxvZ3JhZG8gZW5jb250cmFyIGxvcyBkYXRvcyBkZWwgZXF1aXBvJywKICAgICAgICAgIGZvb3RlcjogJ1Bvc2libGUgZXJyb3IgZGVsIHNpc3RlbWEnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vRnVuY2nDs24gcXVlIG9idGllbmUgdW5hIGltYWdlbgogICAgb2J0ZW5lckltYWdlbmVzOiBmdW5jdGlvbiBvYnRlbmVySW1hZ2VuZXMoKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbgogICAgICAgIH0KICAgICAgfTsKICAgICAgdGhpcy5heGlvcy5nZXQoImFwaS9vYnRlbmVySW1hZ2VuIiwgY29uZmlnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczkuaW1hZ2VuZXMgPSByZXMuZGF0YTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpczkuYWxlcnRhKCdkYW5nZXInLCAnRXN0ZSBwcm9kdWN0byBubyBwb3NlZSBpbWFnZW4gbyBubyBoYSBjYXJnYWRvIGNvcnJlY3RhbWVudGUnKTsKICAgICAgfSk7CiAgICB9LAogICAgczJhYjogZnVuY3Rpb24gczJhYihzKSB7CiAgICAgIHZhciBidWYgPSBuZXcgQXJyYXlCdWZmZXIocy5sZW5ndGgpOwogICAgICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1Zik7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSAhPSBzLmxlbmd0aDsgKytpKSB7CiAgICAgICAgdmlld1tpXSA9IHMuY2hhckNvZGVBdChpKSAmIDB4RkY7CiAgICAgIH0KCiAgICAgIHJldHVybiBidWY7CiAgICB9LAogICAgLy9GdW5jacOzbiBwYXJhIGV4cG9ydGFyIHVuIE1FTU8KICAgIHJlbmRlckRvYzogZnVuY3Rpb24gcmVuZGVyRG9jKCkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CgogICAgICB2YXIgY29uZmlnID0gewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIHRva2VuOiB0aGlzLnRva2VuCiAgICAgICAgfQogICAgICB9OwogICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciBkdCA9IGRhdGUuZ2V0RGF0ZSgpICsgIi0iICsgKGRhdGUuZ2V0TW9udGgoKSArIDEpICsgIi0iICsgZGF0ZS5nZXRGdWxsWWVhcigpOwogICAgICB2YXIgaW5kZXggPSB0aGlzLmRlcGVuZGVuY2lhcy5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5ub21EZXBlbmRlbmNpYSA9PSBfdGhpczEwLmRlcGVuZGVuY2lhOwogICAgICB9KTsKICAgICAgdGhpcy5heGlvcy5wb3N0KCdhcGkvb2J0ZW5lck1lbW8nLCB7CiAgICAgICAgcHJvZHVjdG9zOiB0aGlzLnByb2R1Y3RvcywKICAgICAgICBkZXBlbmRlbmNpYTogdGhpcy5kZXBlbmRlbmNpYSwKICAgICAgICBjb2REZXBlbmRlbmNpYTogdGhpcy5kZXBlbmRlbmNpYXNbaW5kZXhdLmNvZERlcGVuZGVuY2lhLAogICAgICAgIGNvbXVuYTogdGhpcy5kZXBlbmRlbmNpYXNbaW5kZXhdLmNvbXVuYSwKICAgICAgICBmZWNoYTogZHQudG9TdHJpbmcoKSwKICAgICAgICByZWZlcmVuY2lhOiB0aGlzLnJlZmVyZW5jaWEsCiAgICAgICAgdGlja2V0OiB0aGlzLnRpY2tldCwKICAgICAgICBtZW1vOiB0aGlzLm1lbW8gKyAxCiAgICAgIH0sIGNvbmZpZykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbX3RoaXMxMC5zMmFiKHJlcy5kYXRhKV0sIHsKICAgICAgICAgIHR5cGU6ICcnCiAgICAgICAgfSk7CiAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOyAvLyAzLiBDcmVhIHVuIHB1bnRvIGRlIFVSTCB0ZW1wb3JhbCBhbCBvYmpldG8gQmxvYgogICAgICAgIC8vIDQuIFB1ZWRlIHNpbXVsYXIgdW5hIGdhbWEgZGUgb3BlcmFjaW9uZXMgcGFyYSBlc3RlIG9iamV0byBkZSBhcmNoaXZvIGRlc3B1w6lzIGRlIGNyZWFyIHVuYSBVUkwsIHBvciBlamVtcGxvOiB2aXN0YSBwcmV2aWEsIGRlc2NhcmdhcgoKICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICBhLmhyZWYgPSB1cmw7CiAgICAgICAgYS5kb3dubG9hZCA9ICJGb3JtdWxhcmlvIGRlIGV4cG9ydGFjacOzbi54bHN4IjsKICAgICAgICBhLmNsaWNrKCk7IC8vIDUuIExpYmVyYXIgZXN0YSBVUkwgZGUgb2JqZXRvIHRlbXBvcmFsCgogICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgIGljb246ICdlcnJvcicsCiAgICAgICAgICB0aXRsZTogJ09vcHMuLi4nLAogICAgICAgICAgdGV4dDogJ05vIHNlIGhhIGxvZ3JhZG8gcmVnaXN0cmFyIGxhIGVudHJlZ2EgZGUgaW5zdW1vcycsCiAgICAgICAgICBmb290ZXI6ICdQb3NpYmxlIGVycm9yIGRlbCBzaXN0ZW1hJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvL0Z1bmNpb25lcyBkZSBsYSBhbGVydGEKICAgIGNvdW50RG93bkNoYW5nZWQ6IGZ1bmN0aW9uIGNvdW50RG93bkNoYW5nZWQoZGlzbWlzc0NvdW50RG93bikgewogICAgICB0aGlzLmRpc21pc3NDb3VudERvd24gPSBkaXNtaXNzQ291bnREb3duOwogICAgfSwKICAgIHNob3dBbGVydDogZnVuY3Rpb24gc2hvd0FsZXJ0KCkgewogICAgICB0aGlzLmRpc21pc3NDb3VudERvd24gPSB0aGlzLmRpc21pc3NTZWNzOwogICAgfSwKICAgIGFsZXJ0YTogZnVuY3Rpb24gYWxlcnRhKGNvbG9yLCB0ZXh0bykgewogICAgICB0aGlzLm1lbnNhamUuY29sb3IgPSBjb2xvcjsKICAgICAgdGhpcy5tZW5zYWplLnRleHRvID0gdGV4dG87CiAgICAgIHRoaXMuc2hvd0FsZXJ0KCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqJA;AACA;AAEA;;AAEA;AACAA;AACA;;AACA;AACAC,iBADA;AAEAC;AACAC;AADA,GAFA;AAKAC,MALA,kBAKA;AACA;AACA;AACAC,0BAFA;AAGAC;AAAAC;AAAAC;AAAAC;AAAAC;AAAAC;AAAAC;AAAAC;AAAAC;AAAAC;AAAA,QAHA;AAIAC,eAJA;AAKAC,qBALA;AAMAC,kBANA;AAOA;AACAC,sBARA;AASAC,qBATA;AAUA;AACAC,sBAXA;AAYAC,qBAZA;AAaA;AACAC,oBAdA;AAeAC,yBAfA;AAgBAC;AAAAC;AAAAC;AAAA,OAhBA;AAiBA;AACAC,gBAlBA;AAmBAC,kBAnBA;AAoBAhB,eApBA;AAqBAE,qBArBA;AAsBAe,aAtBA;AAuBAC,gBAvBA;AAwBAC,oBAxBA;AAyBAC,kBAzBA;AA0BAC;AA1BA;AA4BA,GAlCA;AAmCAC;AACA;AACAf;AAAAgB;AAAA,KAFA;AAGAJ;AAAAI;AAAA,KAHA;AAIAL;AAAAK;AAAA;AAJA,GAnCA;AAyCAC,8BACAC,gCADA,CAzCA;AA4CAC,SA5CA,qBA4CA;AACA;AACA;AACA;AACA;AACA,GAjDA;AAkDAC;AACA;AACAC,qBAFA,+BAEA;AAAA;;AACA;AACAC;AACAC;AADA;AADA;AAKA,sDACAC,IADA,CACA;AACA;;AACA;AACA;AACA;AACA,OANA,EAOAC,KAPA,CAOA;AACA;AACA,OATA;AAUA,KAlBA;AAmBA;AACAC,mBApBA,2BAoBAC,OApBA,EAoBA;AAAA;;AACA;AACAL;AACAC;AADA;AADA;AAKA,0DACAC,IADA,CACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA,OAdA,EAeAC,KAfA,CAeA;AACA;AACA,OAjBA;AAkBA,KA5CA;AA6CA;AACAG,sBA9CA,gCA8CA;AAAA;;AACA;AACAN;AACAC;AADA;AADA;AAKA,wDACAC,IADA,CACA;AACA;AACA;;AACA;AACA,OALA,EAMAC,KANA,CAMA;AACA;AACA,OARA;AASA,KA7DA;AA8DA;AACAI,aA/DA,uBA+DA;AACA;AACA,KAjEA;AAkEA;AACAC,sBAnEA,gCAmEA;AAAA;;AACA;AACAR;AACAC;AADA;AADA;AAKA,oFACAC,IADA,CACA;AACA;AACA;AACA,OAJA,EAKAC,KALA,CAKA;AACA;AACA,OAPA;AAQA,KAjFA;AAkFAM,mBAlFA,2BAkFAxC,WAlFA,EAkFAJ,GAlFA,EAkFAK,MAlFA,EAkFA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KA3FA;AA4FA;AACAwC,YA7FA,oBA6FAxC,MA7FA,EA6FA;AACA;AACA,KA/FA;AAgGA;AACAyC,kBAjGA,0BAiGA1C,WAjGA,EAiGAJ,GAjGA,EAiGA;AACA;AAAA;AAAA;AACA;;AACA;AACA;AACA;AACA+C;AACA;AACA;AACA;;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA,OAfA,MAeA;AACA;AAEA;AACA,KA9HA;AA+HA;AACA;AACAC,kBAjIA,4BAiIA;AAAA;;AACA;AACA;AACA;AAAAhD;AAAAC;AAAAC;AAAAC;AAAAC;AAAAC;AAAAC;AAAAC;AAAAC;AAAA,SAHA,CAIA;;AACA;AACA;AAAA;AAAA,WADA,CAEA;;AACA;AACAyC;AACA,SAFA,MAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA/JA;AAgKA;AACAC,kBAjKA,4BAiKA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,KAxKA;AAyKA;AACAC,WA1KA,mBA0KA7B,QA1KA,EA0KA;AACA;AAAA;AAAA;;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAjLA;AAkLA8B,oBAlLA,4BAkLAC,QAlLA,EAkLA;AACAA;AACA;AACAA;AACA;AACA,KAvLA;AAwLAC,aAxLA,qBAwLAC,IAxLA,EAwLA;AACA;AACA;AACA;AACA,OAHA;AAIA,KA7LA;AA8LA;AACAC,kBA/LA,4BA+LA;AAAA;;AACA;AACA;AACA;;AACA;AACAC;AACAC;AACA;;AACAC;AACAC,kEADA;AAEAC,uBAFA;AAGAC,8BAHA;AAIAC,qCAJA;AAKAC,iCALA;AAMAC,oCANA;AAOAC;AAPA,SAQA7B,IARA,CAQA;AACA;AACA;AACA;AACAF;AACAC;AADA;AADA;;AAKA;AAAA+B;AAAAC;AAAAC;AAAA9C;AAAA,uBACAc,IADA,CACA;AACA;AACA;;AACA;;AACA;;AACA;AACA,eALA,MAKA;AACAiC;AACAC,+BADA;AAEAX,kCAFA;AAGAY,iDAHA;AAIAC;AAJA;AAMA;AACA,aAfA,EAgBAnC,KAhBA,CAgBA;AACAgC;AACAC,6BADA;AAEAX,gCAFA;AAGAY,wEAHA;AAIAC;AAJA;AAMA,aAvBA;AAwBA,WA9BA,MA8BA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA,OA9CA;AA+CA,KAtPA;AAuPA;AACAC,qBAxPA,+BAwPA;AACA;AACA;AACA;AACAvC;AACAC;AADA;AADA;AAKA;AAAAlC;AAAAE;AAAA,qBACAiC,IADA,CACA;AACA;AACAiC,wBACA,sDADA,EAEA,8BAFA,EAGA,SAHA;AAKA,aANA,MAMA;AACAA;AACAC,6BADA;AAEAX,gCAFA;AAGAY,+CAHA;AAIAC;AAJA;AAMA;AACA,WAhBA,EAiBAnC,KAjBA,CAiBA;AACAgC;AACAC,2BADA;AAEAX,8BAFA;AAGAY,sEAHA;AAIAC;AAJA;AAMA,WAxBA;AAyBA;AACA;AACA,KA3RA;AA4RA;AACAE,eA7RA,yBA6RA;AAAA;;AACA;AACA;AACA;AACAxC;AACAC;AADA;AADA;AAKA;AAAAlC;AAAA,qBACAmC,IADA,CACA;AACA;AACA,WAHA,EAIAC,KAJA,CAIA;AACA;AACAgC;AACAC,2BADA;AAEAX,8BAFA;AAGAY,sEAHA;AAIAC;AAJA;AAMA,WAZA;AAaA;AACA;AACA,KApTA;AAqTA;AACAG,mBAtTA,6BAsTA;AACA;AACA;AACA;AACA;;AACA;AACA,KA5TA;AA6TA;AACAC,YA9TA,oBA8TAC,EA9TA,EA8TA;AAAA;;AACA;AACA3C;AACAC;AADA;AADA;AAKA,gEACAC,IADA,CACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA,WAHA,MAGA;AACA;AACA;AACA;AACA,OAdA,EAeAC,KAfA,CAeA;AACAgC;AACAC,uBADA;AAEAX,0BAFA;AAGAY,iEAHA;AAIAC;AAJA;AAMA,OAtBA;AAuBA,KA3VA;AA4VA;AACAM,mBA7VA,6BA6VA;AAAA;;AACA;AACA5C;AACAC;AADA;AADA;AAKA,kDACAC,IADA,CACA;AACA;AACA,OAHA,EAIAC,KAJA,CAIA;AACA;AACA,OANA;AAQA,KA3WA;AA4WA0C,QA5WA,gBA4WAC,CA5WA,EA4WA;AACA;AACA;;AACA;AAAAC;AAAA;;AACA;AACA,KAjXA;AAkXA;AACAC,aAnXA,uBAmXA;AAAA;;AACA;AACAhD;AACAC;AADA;AADA;AAKA;AACA;AACA;AAAA;AAAA;AACA;AAAArC;AAAAc;AAAAuE;AAAAC;AAAAlB;AAAA1C;AAAAD;AAAAD;AAAA,iBACAc,IADA,CACA;AACA;AAAAwB;AAAA;AACA,mDAFA,CAEA;AACA;;AACA;AACAZ;AACAA;AACAA,kBAPA,CAQA;;AACAqC;AAEA,OAZA,EAaAhD,KAbA,CAaA;AACAgC;AACAC,uBADA;AAEAX,0BAFA;AAGAY,kEAHA;AAIAC;AAJA;AAMA,OApBA;AAqBA,KAjZA;AAkZA;AACAc,oBAnZA,4BAmZAtE,gBAnZA,EAmZA;AACA;AACA,KArZA;AAsZAuE,aAtZA,uBAsZA;AACA;AACA,KAxZA;AAyZAC,UAzZA,kBAyZAtE,KAzZA,EAyZAC,KAzZA,EAyZA;AACA;AACA;AACA;AACA;AA7ZA;AAlDA","names":["PizZipUtils","name","components","navbar","data","cantidadProductos","productos","key","nomProducto","cantidad","stock","codigoBarra","codBar","marca","vacio","descripcion","prods","productoAnt","imagenes","dependencias","dependencia","funcionarios","funcionario","dismissSecs","dismissCountDown","mensaje","color","texto","codigo","producto","memo","ticket","referencia","imagen","imagenDir","validations","required","computed","mapState","created","methods","obtenerUltimoMemo","headers","token","then","catch","cargarProductos","primera","cargarDependencias","cambiaDep","cargarFuncionarios","buscarPorCodigo","anterior","cambioProducto","repetido","agregaProducto","a","quitarProducto","cantMin","convertDateMysql","yourDate","fechaMemo","date","generarInforme","sumaStock","suma","swal","title","type","showCancelButton","confirmButtonColor","cancelButtonColor","cancelButtonText","confirmButtonText","fecha","nomFuncionario","nomDependencia","Swal","icon","text","footer","HistorialProducto","restarStock","actualizarStock","detalles","id","obtenerImagenes","s2ab","s","view","renderDoc","codDependencia","comuna","window","countDownChanged","showAlert","alerta"],"sourceRoot":"src/views","sources":["insumos.vue"],"sourcesContent":["<template>\r\n    <div class=\"menu\">\r\n        <navbar />\r\n        <transition name=\"slide-fade\">\r\n            <b-container><br>\r\n                <h1 class=\"mt-2\">Entrega de Insumos</h1>\r\n                <b-alert\r\n                :show=\"dismissCountDown\"\r\n                dismissible\r\n                :variant=\"mensaje.color\"\r\n                @dismissed=\"dismissCountDown=0\"\r\n                @dismiss-count-down=\"countDownChanged\"\r\n                >\r\n                {{mensaje.texto}}\r\n                </b-alert>\r\n                <div class=\" card mt-4\">\r\n                    <div class=\"card-header\">\r\n                        <h2>Determine que productos serán enviados a la Dependencia</h2>\r\n                    </div>\r\n                    <div class=\"card-body\">\r\n                        <b-row class=\"mt-2\">\r\n                            <b-col cols=\"12\" md=\"4\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Dependencia</label>\r\n                                <select class=\"form-control\" @change=\"cambiaDep()\" v-model=\"$v.dependencia.$model\">\r\n                                    <option v-for=\"i in dependencias\" :key=\"i.nomDependencia\" :value=\"i.nomDependencia\">{{i.nomDependencia}}</option>\r\n                                </select>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"4\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Funcionario</label>\r\n                                <select class=\"form-control\" v-model=\"funcionario\">\r\n                                    <option v-for=\"i in funcionarios\" :key=\"i.nomFuncionario\" :value=\"i.nomFuncionario\">{{i.nomFuncionario}}</option>\r\n                                </select>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"2\">\r\n                                <b-button @click=\"agregaProducto()\" variant=\"primary\" class=\"btn-primary btn boton\">Agregar Producto</b-button>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"2\">\r\n                                <b-button @click=\"quitarProducto()\" class=\"btn-danger btn boton\">Quitar Producto</b-button>\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mt-2\">\r\n                            <b-col cols=\"12\" md=\"6\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Referencia</label>\r\n                                <input type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"$v.referencia.$model\">\r\n                                <p class=\"text-danger\" v-if=\"$v.referencia.$error\" >Ingrese la referencia para generar el memo</p>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"6\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Número de Ticket</label>\r\n                                <input type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"$v.ticket.$model\">\r\n                                <p class=\"text-danger\" v-if=\"$v.ticket.$error\" >Ingrese el número de ticket para el memo</p>\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mt-2\" v-for=\"i in productos\" :key=\"i.key\">\r\n                            <b-col cols=\"12\" md=\"2\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Codigo de Barra</label>\r\n                                <input type=\"text\" @input=\"buscarPorCodigo(i.codigoBarra, i.key, i.codBar)\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"i.codigoBarra\"> \r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"3\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Producto</label>\r\n                                <select disabled class=\"form-control\" @click=\"anterior(i.nomProducto)\" @change=\"cambioProducto(i.nomProducto, i.key)\" v-model=\"i.nomProducto\">\r\n                                    <option v-for=\"i in prods\" :key=\"i.codigoBarra\" :value=\"i.nomProducto\">{{i.nomProducto}}</option>\r\n                                </select>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"1\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Cantidad</label>\r\n                                <input type=\"number\" @change=\"cantMin(i.key)\" min=\"1\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"i.cantidad\">\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"1\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Stock</label>\r\n                                <input disabled type=\"number\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"i.stock\">\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"3\">\r\n                                    <label for=\"exampleInputEmail1\" class=\"form-label\">Observaciones</label>\r\n                                    <textarea type=\"text\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" v-model=\"i.descripcion\"></textarea>\r\n                                </b-col>\r\n                            <b-col cols=\"12\" md=\"2\">\r\n                                <b-button @click=\"detalles(i.codBar)\" v-b-modal.modal-1 class=\"btn-success boton\">Detalles Producto</b-button>\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row>\r\n                            <b-button v-b-modal.modal-2 class=\"btn-success btn boton mt-5\">Generar Informe</b-button>\r\n                        </b-row>\r\n                    </div>\r\n                </div>\r\n                <b-modal id=\"modal-2\" size=\"xl\" class=\"modal-xl\" title=\"Preview del MEMO N° \">\r\n                    <div class=\"card-body\">\r\n                        <b-row class=\"mt-2\" v-for=\"i in productos\" :key=\"i.key\">\r\n                            <b-col cols=\"12\" md=\"3\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Nombre del Producto</label>\r\n                                <select disabled class=\"form-control\" @click=\"anterior(i.nomProducto)\" @change=\"cambioProducto(i.nomProducto, i.key)\" v-model=\"i.nomProducto\">\r\n                                    <option v-for=\"i in prods\" :key=\"i.codigoBarra\" :value=\"i.nomProducto\">{{i.nomProducto}}</option>\r\n                                </select>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"2\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Cantidad</label>\r\n                                <input disabled type=\"number\" @change=\"cantMin(i.key)\" min=\"1\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"i.cantidad\">\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"3\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Marca del Producto</label>\r\n                                <input disabled type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"i.marca\">\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"4\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Observacion</label>\r\n                                <input disabled type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"i.descripcion\">\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row>\r\n                            <b-button @click=\"generarInforme()\" class=\"btn-success btn boton mt-5\">Generar Informe</b-button>\r\n                        </b-row>\r\n                        <b-row>\r\n                            <b-button @click=\"renderDoc()\" class=\"btn-success btn boton mt-5\">Generar MEMO</b-button>\r\n                        </b-row>\r\n                    </div>\r\n                </b-modal>\r\n                <b-modal id=\"modal-1\" size=\"lg\" title=\"Detalles del Producto\">\r\n                    <div class=\"card-body\">\r\n                            <b-row class=\"mt-2\">\r\n                                <b-col cols=\"12\" md=\"4\">\r\n                                    <label for=\"exampleInputEmail1\" class=\"form-label\">Codigo de Barras</label>\r\n                                    <input disabled type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"codigo\">\r\n                                </b-col>\r\n                                <b-col cols=\"12\" md=\"4\">\r\n                                    <label for=\"exampleInputEmail1\" class=\"form-label\">Nombre</label>\r\n                                    <input disabled type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"producto\">\r\n                                </b-col>\r\n                                <b-col cols=\"12\" md=\"4\">\r\n                                    <label for=\"exampleInputEmail1\" class=\"form-label\">Marca</label>\r\n                                    <input disabled type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"marca\">\r\n                                </b-col>\r\n                            </b-row>\r\n                            <b-row class=\"mt-4\">\r\n                                <b-col cols=\"12\" md=\"12\">\r\n                                    <label for=\"exampleInputEmail1\" class=\"form-label\">Descripcion</label>\r\n                                    <textarea disabled type=\"text\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" v-model=\"descripcion\"></textarea>\r\n                                </b-col>\r\n                            </b-row>\r\n                            <b-row class=\"mt-5\">\r\n                                <b-col cols=\"12\" md=\"12\">\r\n                                    <img :src=\"imagenDir\" id=\"imagenEdita\">\r\n                                </b-col>\r\n                            </b-row>\r\n                        </div>\r\n                </b-modal>\r\n            </b-container>\r\n        </transition>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport navbar from \"../components/navbar.vue\";\r\nimport { required, minLength} from \"vuelidate/lib/validators\";\r\n\r\nimport { mapState } from 'vuex'\r\n\r\nfunction loadFile(url, callback) {\r\n    PizZipUtils.getBinaryContent(url, callback);\r\n}\r\nexport default {\r\n    name: \"insumos\",\r\n    components: {\r\n        navbar,\r\n    },\r\n     data() {\r\n      return {\r\n        //Datos para agregar un nuevo memo (historial) con v-model\r\n        cantidadProductos: 1,\r\n        productos: [{key: 1, nomProducto: '', cantidad: 0, stock: 0, codigoBarra: '', codBar: '', marca: '', vacio: '', descripcion: ''}],\r\n        prods: [],\r\n        productoAnt: '',\r\n        imagenes: [],\r\n        //Variable para las dependencias \r\n        dependencias: [],\r\n        dependencia: '',\r\n        //Variables para indicar al funcionario\r\n        funcionarios: [],\r\n        funcionario: '',\r\n        //Variables de las alertas\r\n        dismissSecs: 5,\r\n        dismissCountDown: 0,\r\n        mensaje: {color: '', texto: ''},\r\n        //VARIABLES DE DETALLES\r\n        codigo: '',\r\n        producto: '',\r\n        marca: '',\r\n        descripcion: '',\r\n        memo: 1,\r\n        ticket: '',\r\n        referencia: '',\r\n        imagen: null,\r\n        imagenDir: '',\r\n      }\r\n    },\r\n    validations:{\r\n      //Validaciones de los input\r\n      dependencia: {required},\r\n      referencia: {required},\r\n      ticket: {required}\r\n    },\r\n    computed: {\r\n      ...mapState(['token', 'usuarioDB'])\r\n    },\r\n    created(){\r\n        this.cargarProductos(true);\r\n        this.cargarDependencias();\r\n        this.obtenerUltimoMemo();\r\n        this.obtenerImagenes();\r\n    },\r\n    methods:{\r\n        //Obtener ultimo memo\r\n        obtenerUltimoMemo(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get('api/obtenerUltimoMemo', config)\r\n            .then(res => {\r\n                this.memo = res.data[0].memo\r\n                if(this.memo === null){\r\n                    this.memo=0;\r\n                }\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se ha logrado obtener el memo');\r\n            })\r\n        },\r\n        //Metodo que Carga todos los productos del sistema\r\n        cargarProductos(primera){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get('api/obtenerProductosSolos', config)\r\n            .then(res => {\r\n                this.prods = res.data;\r\n                if(primera){\r\n                    this.productos[0].nomProducto = this.prods[0].nomProducto\r\n                    this.productos[0].stock = this.prods[0].stock\r\n                    this.productos[0].codigoBarra = this.prods[0].codigoBarra\r\n                    this.productos[0].codBar = this.prods[0].codigoBarra\r\n                    this.productos[0].marca = this.prods[0].marca\r\n                    this.productos[0].descripcion = this.prods[0].descripcion\r\n                    if(this.productos[0].stock === 0){\r\n                        this.alerta('danger', 'No se encuentra stock del producto ' + this.productos[0].nomProducto)\r\n                    }\r\n                }\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se han podido cargar los Productos');\r\n            })\r\n        },\r\n        //Función que se encargar de cargar las dependencias\r\n        cargarDependencias(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get('api/obtenerDependencias', config)\r\n            .then(res => {\r\n                this.dependencias = res.data;\r\n                this.dependencia = this.dependencias[0].nomDependencia;\r\n                this.cargarFuncionarios();\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se han podido cargar las Dependencias');\r\n            })\r\n        },\r\n        //Función que carga los funcionarios al cambiar la dependencia\r\n        cambiaDep(){\r\n            this.cargarFuncionarios();\r\n        },\r\n        //Función que se encarga de cargar a los funcionarios encargados de la dependencia indicada\r\n        cargarFuncionarios(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get(`api/obtenerFuncionarioDep/${this.dependencia}`, config)\r\n            .then(res => {\r\n                this.funcionarios = res.data;\r\n                this.funcionario = this.funcionarios[0].nomFuncionario;\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se han podido cargar los Funcionarios');\r\n            })\r\n        },\r\n        buscarPorCodigo(codigoBarra, key, codBar){\r\n            this.anterior(codBar)\r\n            const indexActual = this.productos.findIndex(item => item.key == key);\r\n            const posProd = this.prods.findIndex(item => item.codigoBarra == codigoBarra)\r\n            if(posProd !== -1){\r\n                this.cambioProducto(this.prods[posProd].codigoBarra, key)\r\n            }else{\r\n                this.productos[indexActual].codBar = this.productoAnt\r\n            }\r\n        },\r\n        //Función que te permite guardar el valor anterior del select\r\n        anterior(codBar){\r\n            this.productoAnt = codBar\r\n        },\r\n        //Si se cambia un producto se debe buscar su stock\r\n        cambioProducto(codigoBarra, key){\r\n            const indexActual = this.productos.findIndex(item => item.key == key);\r\n            var repetido = false;\r\n            for(var i = 0; i<this.productos.length; i++){\r\n                if(i != indexActual){\r\n                    if(this.productos[i].codBar === codigoBarra){\r\n                        repetido = true;\r\n                    }\r\n                }\r\n            }\r\n            if(!repetido){\r\n                const index = this.prods.findIndex(item => item.codigoBarra == codigoBarra);\r\n                const index2 = this.productos.findIndex(item => item.key == key);\r\n                this.productos[index2].stock = this.prods[index].stock\r\n                this.productos[index2].nomProducto = this.prods[index].nomProducto;\r\n                this.productos[index2].codigoBarra = this.prods[index].codigoBarra\r\n                this.productos[index2].codBar = this.prods[index].codigoBarra\r\n                this.productos[index2].marca = this.prods[index].marca\r\n                this.productos[index2].descripcion = this.prods[index].descripcion\r\n                if(this.productos[index2].stock < 1){\r\n                    this.alerta('danger', 'No hay stock disponible para este producto')\r\n                }\r\n                if(this.productos[index2].cantidad > this.productos[index2].stock){\r\n                    this.productos[index2].cantidad = this.productos[index2].stock;\r\n                }\r\n            }else{\r\n                this.productos[indexActual].codBar = this.productoAnt\r\n                \r\n            }\r\n        },\r\n        //Se agrega un nuevo posible producto\r\n        //ADEMAS debe revisar si los valores anteriores estan repetidos\r\n        agregaProducto(){\r\n            this.cantidadProductos++\r\n            var a = 0;\r\n            this.productos.push({key: this.cantidadProductos, nomProducto: '', cantidad: 0, stock: 0, codigoBarra: '', codBar: '', marca: '', vacio: '', descripcion: ''});\r\n            //Busca si un producto ya existe en en alguno de los select habilitados \r\n            while(a < this.prods.length){\r\n                const index = this.productos.findIndex(item => item.codBar == this.prods[a].codigoBarra);\r\n                //Si lo encuentra pasa al siguiente producto\r\n                if(index != -1){\r\n                    a++;\r\n                }else{ //Si el valor retornado es -1 significa que el producto ya existe, por lo tanto debe seguir buscando\r\n                    this.productos[this.productos.length-1].nomProducto = this.prods[a].nomProducto\r\n                    this.productos[this.productos.length-1].stock = this.prods[a].stock\r\n                    this.productos[this.productos.length-1].codigoBarra = this.prods[a].codigoBarra\r\n                    this.productos[this.productos.length-1].codBar = this.prods[a].codigoBarra\r\n                    this.productos[this.productos.length-1].marca = this.prods[a].marca\r\n                    this.productos[this.productos.length-1].descripcion = this.prods[a].descripcion\r\n                    this.productos[this.productos.length-1].key = this.cantidadProductos\r\n                    if(this.productos[this.productos.length-1].stock === 0){\r\n                        this.alerta('danger', 'No hay stock disponible para el producto ' + this.productos[this.productos.length-1].nomProducto)\r\n                    }\r\n                    break;\r\n                }\r\n                if(a == this.prods.length){\r\n                    this.cantidadProductos--;\r\n                    this.productos.splice(-1);\r\n                    this.alerta('danger','No existen mas productos para agregar')\r\n                    break;\r\n                }\r\n            } \r\n        },\r\n        //Se quita un Producto de los que serán agregados al sistema\r\n        quitarProducto(){\r\n            if(this.productos.length > 1){\r\n                this.cantidadProductos--;\r\n                this.productos.splice(-1);\r\n            }else{\r\n                this.alerta('danger', 'Tiene que existir al menos 1 producto');\r\n            }\r\n        },\r\n        //Indicamos el minimo de cantidad para que no este vacio o sea menor a 0\r\n        cantMin(producto){\r\n            const index = this.productos.findIndex(item => item.key == producto);\r\n            if(this.productos[index].cantidad < 1 || this.productos[index].cantidad == ''){\r\n                this.productos[index].cantidad = 1;\r\n            } else if(this.productos[index].cantidad > this.productos[index].stock){\r\n                this.productos[index].cantidad = this.productos[index].stock;\r\n            }\r\n        },\r\n        convertDateMysql(yourDate){\r\n            yourDate.toISOString().split('T')[0]\r\n            const offset = yourDate.getTimezoneOffset()\r\n            yourDate = new Date(yourDate.getTime() - (offset*60*1000))\r\n            return yourDate.toISOString().split('T')[0]\r\n\t\t},\r\n        fechaMemo(date){\r\n            const formatDate = (date)=>{\r\n            let formatted_date = date.getDate() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getFullYear()\r\n            return formatted_date;\r\n            }\r\n        },\r\n        //Función que permite generar un informe y enviar los datos de un nuevo HISTORIAL \r\n        generarInforme(){\r\n            var dt = this.convertDateMysql(new Date())\r\n            var sumaStock = 0;\r\n            var suma = 0;\r\n            for(var i = 0; i < this.productos.length; i++){\r\n                sumaStock = sumaStock + this.productos[i].stock\r\n                suma = suma + this.productos[i].cantidad\r\n            }\r\n            swal.fire({\r\n            title: '¿Seguro que desea realizar la entrega de Insumos?',\r\n            type: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            cancelButtonText: 'Cancelar',\r\n            confirmButtonText: '¡Si!'\r\n            }).then((result) => {\r\n                if (result.value) {\r\n                    if(sumaStock > 0 && suma > 0 ){\r\n                        let config = {\r\n                            headers: {\r\n                                token: this.token\r\n                            }\r\n                        }\r\n                        this.axios.post('api/agregaHistorial', {fecha: dt, nomFuncionario: this.funcionario, nomDependencia: this.dependencia, memo: this.memo+1}, config)\r\n                        .then(res => {\r\n                        if(!res.data.sqlMessage){\r\n                            this.HistorialProducto();\r\n                            this.restarStock();\r\n                            this.renderDoc();\r\n                            this.obtenerUltimoMemo();\r\n                        }else{\r\n                            Swal.fire({\r\n                            icon: 'error',\r\n                            title: 'Oops...',\r\n                            text: 'No se ha logrado crear ',\r\n                            footer: 'Algún dato ha sido incorrecto verifiquelos'\r\n                            })\r\n                        }\r\n                        })\r\n                        .catch(e => {\r\n                        Swal.fire({\r\n                            icon: 'error',\r\n                            title: 'Oops...',\r\n                            text: 'No se ha logrado registrar la entrega de insumos',\r\n                            footer: 'Posible error del sistema'\r\n                        })\r\n                        }) \r\n                    }else if(sumaStock < 0){\r\n                        this.alerta('danger', 'No se encuentra stock disponible')\r\n                    }else{\r\n                        this.alerta('danger', 'No se ha ingresado ninguna cantidad')\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        //Registra los productos de esta ENTREGA DE INSUMOS \r\n        HistorialProducto(){\r\n            for(var i = 0; i<this.productos.length; i++){\r\n                if(this.productos[i].cantidad > 0){\r\n                    let config = {\r\n                        headers: {\r\n                            token: this.token\r\n                        }\r\n                    }\r\n                    this.axios.post('api/agregahistProd', {cantidad: this.productos[i].cantidad, codigoBarra: this.productos[i].codBar}, config)\r\n                        .then(res => {\r\n                        if(!res.data.sqlMessage){\r\n                            Swal.fire(\r\n                            'Se ha registrado la entrega de insumos correctamente',\r\n                            'Seleccione Ok para continuar',\r\n                            'success'\r\n                            )\r\n                        }else{\r\n                            Swal.fire({\r\n                            icon: 'error',\r\n                            title: 'Oops...',\r\n                            text: 'No se ha logrado crear ',\r\n                            footer: 'Algún dato ha sido incorrecto verifiquelos'\r\n                            })\r\n                        }\r\n                        })\r\n                        .catch(e => {\r\n                        Swal.fire({\r\n                            icon: 'error',\r\n                            title: 'Oops...',\r\n                            text: 'No se ha logrado registrar la entrega de insumos',\r\n                            footer: 'Posible error del sistema'\r\n                        })\r\n                        })\r\n                }\r\n            }\r\n        },\r\n        //Resta los stock de cada producto\r\n        restarStock(){\r\n            for(var i = 0; i<this.productos.length; i++){\r\n                if(this.productos[i].cantidad > 0){\r\n                    let config = {\r\n                        headers: {\r\n                            token: this.token\r\n                        }\r\n                    }\r\n                    this.axios.put(`api/actualizaStock/${this.productos[i].codBar}`, {cantidad: this.productos[i].cantidad}, config)\r\n                        .then(res => {\r\n                            this.actualizarStock();\r\n                        })\r\n                        .catch(e => {\r\n                            var mensaje = 'Posible error del sistema';\r\n                            Swal.fire({\r\n                            icon: 'error',\r\n                            title: 'Oops...',\r\n                            text: 'No se ha logrado registrar la entrega de insumos',\r\n                            footer: mensaje\r\n                            })\r\n                        })\r\n                }\r\n            }\r\n        },\r\n        //Actualiza la pagina tras generar una entrega de insumos\r\n        actualizarStock(){\r\n            for(var i = 0; i<this.productos.length-1; i++){\r\n                this.cantidadProductos--;\r\n                this.productos.splice(-1);\r\n            }\r\n            this.cargarProductos(true);\r\n        },\r\n        //Permite ver los detalles de un producto y los carga\r\n        detalles(id){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get(`api/obtenerProducto/${id}`, config)\r\n                .then(res => {\r\n                    this.codigo = res.data[0].codigoBarra;\r\n                    this.producto = res.data[0].nomProducto;\r\n                    this.marca = res.data[0].marca;\r\n                    this.descripcion = res.data[0].descripcion\r\n                    for(var i = 0; i<this.imagenes.length; i++){\r\n                        if(this.imagenes[i].split('.')[0] == this.codigoBarra){\r\n                            this.imagenDir = 'http://localhost:3000/dbImagenes/' + this.imagenes[i]\r\n                            break;\r\n                        }else{\r\n                            this.imagenDir = 'http://localhost:3000/dbImagenes/no-imagen.png'\r\n                        }\r\n                    }\r\n                })\r\n                .catch(e => {\r\n                    Swal.fire({\r\n                    icon: 'error',\r\n                    title: 'Oops...',\r\n                    text: 'No se ha logrado encontrar los datos del equipo',\r\n                    footer: 'Posible error del sistema'\r\n                    })\r\n                })\r\n        },\r\n        //Función que obtiene una imagen\r\n        obtenerImagenes(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n             this.axios.get(`api/obtenerImagen`, config)\r\n                .then(res => {\r\n                    this.imagenes = res.data\r\n                })\r\n                .catch(e => {\r\n                    this.alerta('danger', 'Este producto no posee imagen o no ha cargado correctamente')\r\n                })\r\n\r\n        },\r\n        s2ab(s) {\r\n            var buf = new ArrayBuffer(s.length);\r\n            var view = new Uint8Array(buf);\r\n            for (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\r\n            return buf;\r\n        },\r\n        //Función para exportar un MEMO\r\n        renderDoc() {\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            var date = new Date()\r\n            var dt = date.getDate() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getFullYear()\r\n            const index = this.dependencias.findIndex(item => item.nomDependencia == this.dependencia);\r\n            this.axios.post('api/obtenerMemo', {productos: this.productos, dependencia: this.dependencia, codDependencia: this.dependencias[index].codDependencia, comuna: this.dependencias[index].comuna, fecha: dt.toString(), referencia: this.referencia, ticket: this.ticket, memo: this.memo+1}, config)\r\n                .then(res => {\r\n                    var blob = new Blob([this.s2ab(res.data)], {type: ''});\r\n                    let url = window.URL.createObjectURL(blob); // 3. Crea un punto de URL temporal al objeto Blob\r\n                    // 4. Puede simular una gama de operaciones para este objeto de archivo después de crear una URL, por ejemplo: vista previa, descargar\r\n                    let a = document.createElement(\"a\");\r\n                    a.href = url;\r\n                    a.download = \"Formulario de exportación.xlsx\";\r\n                    a.click();\r\n                    // 5. Liberar esta URL de objeto temporal\r\n                    window.URL.revokeObjectURL(url);\r\n\r\n                })\r\n                .catch(e => {\r\n                    Swal.fire({\r\n                        icon: 'error',\r\n                        title: 'Oops...',\r\n                        text: 'No se ha logrado registrar la entrega de insumos',\r\n                        footer: 'Posible error del sistema'\r\n                    })\r\n                })\r\n        },\r\n        //Funciones de la alerta\r\n        countDownChanged(dismissCountDown) {\r\n            this.dismissCountDown = dismissCountDown\r\n        },\r\n        showAlert() {\r\n            this.dismissCountDown = this.dismissSecs\r\n        },\r\n        alerta(color, texto){\r\n            this.mensaje.color = color;\r\n            this.mensaje.texto = texto;\r\n            this.showAlert();\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style>\r\n    body{\r\n        background-color: #eee;\r\n    }\r\n\r\n    .texto{\r\n        text-align: center;\r\n    }\r\n\r\n    .imagen{\r\n        width: 50%;\r\n    }\r\n\r\n    .boton{\r\n        margin: 20px;\r\n        width: 90%;\r\n        border-radius: 12px !important;\r\n        border-color: black !important;\r\n    }\r\n    /* Las animaciones de entrada y salida pueden usar */\r\n    /* funciones de espera y duración diferentes.      */\r\n    .slide-fade-enter-active {\r\n    transition: all .3s ease;\r\n    }\r\n    .slide-fade-leave-active {\r\n    transition: all .8s cubic-bezier(1.0, 0.5, 0.8, 1.0);\r\n    }\r\n    .slide-fade-enter, .slide-fade-leave-to\r\n    /* .slide-fade-leave-active below version 2.1.8 */ {\r\n    transform: translateX(10px);\r\n    opacity: 0;\r\n    }\r\n</style>"]}]}