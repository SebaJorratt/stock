{"remainingRequest":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\inventarioInformatico\\stock\\stock\\src\\views\\insumos.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\inventarioInformatico\\stock\\stock\\src\\views\\insumos.vue","mtime":1648841642252},{"path":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647002043141},{"path":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\babel-loader\\lib\\index.js","mtime":1645539058368},{"path":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647002043141},{"path":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\vue-loader\\lib\\index.js","mtime":1645539059241}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgbmF2YmFyIGZyb20gIi4uL2NvbXBvbmVudHMvbmF2YmFyLnZ1ZSI7DQppbXBvcnQgeyByZXF1aXJlZCwgbWluTGVuZ3RofSBmcm9tICJ2dWVsaWRhdGUvbGliL3ZhbGlkYXRvcnMiOw0KDQppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnDQoNCmZ1bmN0aW9uIGxvYWRGaWxlKHVybCwgY2FsbGJhY2spIHsNCiAgICBQaXpaaXBVdGlscy5nZXRCaW5hcnlDb250ZW50KHVybCwgY2FsbGJhY2spOw0KfQ0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJpbnN1bW9zIiwNCiAgICBjb21wb25lbnRzOiB7DQogICAgICAgIG5hdmJhciwNCiAgICB9LA0KICAgICBkYXRhKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgLy9EYXRvcyBwYXJhIGFncmVnYXIgdW4gbnVldm8gbWVtbyAoaGlzdG9yaWFsKSBjb24gdi1tb2RlbA0KICAgICAgICBjYW50aWRhZFByb2R1Y3RvczogMSwNCiAgICAgICAgcHJvZHVjdG9zOiBbe2tleTogMSwgbm9tUHJvZHVjdG86ICcnLCBjYW50aWRhZDogMCwgc3RvY2s6IDAsIGNvZGlnb0JhcnJhOiAnJywgY29kQmFyOiAnJywgbWFyY2E6ICcnLCB2YWNpbzogJycsIGRlc2NyaXBjaW9uOiAnJ31dLA0KICAgICAgICBwcm9kczogW10sDQogICAgICAgIHByb2R1Y3RvQW50OiAnJywNCiAgICAgICAgaW1hZ2VuZXM6IFtdLA0KICAgICAgICAvL1ZhcmlhYmxlIHBhcmEgbGFzIGRlcGVuZGVuY2lhcyANCiAgICAgICAgZGVwZW5kZW5jaWFzOiBbXSwNCiAgICAgICAgZGVwZW5kZW5jaWE6ICcnLA0KICAgICAgICBjb2RpZ29KYXJkaW46ICcnLA0KICAgICAgICAvL1ZhcmlhYmxlcyBwYXJhIGluZGljYXIgYWwgZnVuY2lvbmFyaW8NCiAgICAgICAgZnVuY2lvbmFyaW9zOiBbXSwNCiAgICAgICAgZnVuY2lvbmFyaW86ICcnLA0KICAgICAgICAvL1ZhcmlhYmxlcyBkZSBsYXMgYWxlcnRhcw0KICAgICAgICBkaXNtaXNzU2VjczogNSwNCiAgICAgICAgZGlzbWlzc0NvdW50RG93bjogMCwNCiAgICAgICAgbWVuc2FqZToge2NvbG9yOiAnJywgdGV4dG86ICcnfSwNCiAgICAgICAgLy9WQVJJQUJMRVMgREUgREVUQUxMRVMNCiAgICAgICAgY29kaWdvOiAnJywNCiAgICAgICAgcHJvZHVjdG86ICcnLA0KICAgICAgICBtYXJjYTogJycsDQogICAgICAgIGRlc2NyaXBjaW9uOiAnJywNCiAgICAgICAgbWVtbzogMSwNCiAgICAgICAgdGlja2V0OiAnJywNCiAgICAgICAgcmVmZXJlbmNpYTogJycsDQogICAgICAgIGltYWdlbjogbnVsbCwNCiAgICAgICAgaW1hZ2VuRGlyOiAnJywNCiAgICAgIH0NCiAgICB9LA0KICAgIHZhbGlkYXRpb25zOnsNCiAgICAgIC8vVmFsaWRhY2lvbmVzIGRlIGxvcyBpbnB1dA0KICAgICAgZGVwZW5kZW5jaWE6IHtyZXF1aXJlZH0sDQogICAgICByZWZlcmVuY2lhOiB7cmVxdWlyZWR9LA0KICAgICAgdGlja2V0OiB7cmVxdWlyZWR9DQogICAgfSwNCiAgICBjb21wdXRlZDogew0KICAgICAgLi4ubWFwU3RhdGUoWyd0b2tlbicsICd1c3VhcmlvREInXSkNCiAgICB9LA0KICAgIGNyZWF0ZWQoKXsNCiAgICAgICAgdGhpcy5jYXJnYXJQcm9kdWN0b3ModHJ1ZSk7DQogICAgICAgIHRoaXMuY2FyZ2FyRGVwZW5kZW5jaWFzKCk7DQogICAgICAgIHRoaXMub2J0ZW5lclVsdGltb01lbW8oKTsNCiAgICAgICAgdGhpcy5vYnRlbmVySW1hZ2VuZXMoKTsNCiAgICB9LA0KICAgIG1ldGhvZHM6ew0KICAgICAgICAvL09idGVuZXIgdWx0aW1vIG1lbW8NCiAgICAgICAgb2J0ZW5lclVsdGltb01lbW8oKXsNCiAgICAgICAgICAgIGxldCBjb25maWcgPSB7DQogICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuYXhpb3MuZ2V0KCdhcGkvb2J0ZW5lclVsdGltb01lbW8nLCBjb25maWcpDQogICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMubWVtbyA9IHJlcy5kYXRhWzBdLm1lbW8NCiAgICAgICAgICAgICAgICBpZih0aGlzLm1lbW8gPT09IG51bGwpew0KICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbW89MDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRhKCdkYW5nZXInLCAnTm8gc2UgaGEgbG9ncmFkbyBvYnRlbmVyIGVsIG1lbW8nKTsNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIC8vTWV0b2RvIHF1ZSBDYXJnYSB0b2RvcyBsb3MgcHJvZHVjdG9zIGRlbCBzaXN0ZW1hDQogICAgICAgIGNhcmdhclByb2R1Y3RvcyhwcmltZXJhKXsNCiAgICAgICAgICAgIGxldCBjb25maWcgPSB7DQogICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuYXhpb3MuZ2V0KCdhcGkvb2J0ZW5lclByb2R1Y3Rvc1NvbG9zJywgY29uZmlnKQ0KICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnByb2RzID0gcmVzLmRhdGE7DQogICAgICAgICAgICAgICAgaWYocHJpbWVyYSl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdG9zWzBdLm5vbVByb2R1Y3RvID0gdGhpcy5wcm9kc1swXS5ub21Qcm9kdWN0bw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Rvc1swXS5zdG9jayA9IHRoaXMucHJvZHNbMF0uc3RvY2sNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbMF0uY29kaWdvQmFycmEgPSB0aGlzLnByb2RzWzBdLmNvZGlnb0JhcnJhDQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdG9zWzBdLmNvZEJhciA9IHRoaXMucHJvZHNbMF0uY29kaWdvQmFycmENCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbMF0ubWFyY2EgPSB0aGlzLnByb2RzWzBdLm1hcmNhDQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdG9zWzBdLmRlc2NyaXBjaW9uID0gdGhpcy5wcm9kc1swXS5kZXNjcmlwY2lvbg0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnByb2R1Y3Rvc1swXS5zdG9jayA9PT0gMCl7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0YSgnZGFuZ2VyJywgJ05vIHNlIGVuY3VlbnRyYSBzdG9jayBkZWwgcHJvZHVjdG8gJyArIHRoaXMucHJvZHVjdG9zWzBdLm5vbVByb2R1Y3RvKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0YSgnZGFuZ2VyJywgJ05vIHNlIGhhbiBwb2RpZG8gY2FyZ2FyIGxvcyBQcm9kdWN0b3MnKTsNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIC8vRnVuY2nDs24gcXVlIHNlIGVuY2FyZ2FyIGRlIGNhcmdhciBsYXMgZGVwZW5kZW5jaWFzDQogICAgICAgIGNhcmdhckRlcGVuZGVuY2lhcygpew0KICAgICAgICAgICAgbGV0IGNvbmZpZyA9IHsNCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLnRva2VuDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5heGlvcy5nZXQoJ2FwaS9vYnRlbmVyRGVwZW5kZW5jaWFzJywgY29uZmlnKQ0KICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmRlcGVuZGVuY2lhcyA9IHJlcy5kYXRhOw0KICAgICAgICAgICAgICAgIHRoaXMuZGVwZW5kZW5jaWEgPSB0aGlzLmRlcGVuZGVuY2lhc1swXS5ub21EZXBlbmRlbmNpYTsNCiAgICAgICAgICAgICAgICB0aGlzLmNvZGlnb0phcmRpbiA9IHJlcy5kYXRhWzBdLmNvZERlcGVuZGVuY2lhDQogICAgICAgICAgICAgICAgdGhpcy5jYXJnYXJGdW5jaW9uYXJpb3MoKTsNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5hbGVydGEoJ2RhbmdlcicsICdObyBzZSBoYW4gcG9kaWRvIGNhcmdhciBsYXMgRGVwZW5kZW5jaWFzJyk7DQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICAvL0Z1bmNpw7NuIHF1ZSBjYXJnYSBsb3MgZnVuY2lvbmFyaW9zIGFsIGNhbWJpYXIgbGEgZGVwZW5kZW5jaWENCiAgICAgICAgY2FtYmlhRGVwKCl7DQogICAgICAgICAgICB0aGlzLmNhcmdhckZ1bmNpb25hcmlvcygpOw0KICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmRlcGVuZGVuY2lhcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLm5vbURlcGVuZGVuY2lhID09IHRoaXMuZGVwZW5kZW5jaWEpOw0KICAgICAgICAgICAgdGhpcy5jb2RpZ29KYXJkaW4gPSB0aGlzLmRlcGVuZGVuY2lhc1tpbmRleF0uY29kRGVwZW5kZW5jaWENCiAgICAgICAgfSwNCiAgICAgICAgLy9GdW5jacOzbiBxdWUgc2UgZW5jYXJnYSBkZSBjYXJnYXIgYSBsb3MgZnVuY2lvbmFyaW9zIGVuY2FyZ2Fkb3MgZGUgbGEgZGVwZW5kZW5jaWEgaW5kaWNhZGENCiAgICAgICAgY2FyZ2FyRnVuY2lvbmFyaW9zKCl7DQogICAgICAgICAgICBsZXQgY29uZmlnID0gew0KICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMudG9rZW4NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmF4aW9zLmdldChgYXBpL29idGVuZXJGdW5jaW9uYXJpb0RlcC8ke3RoaXMuZGVwZW5kZW5jaWF9YCwgY29uZmlnKQ0KICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmZ1bmNpb25hcmlvcyA9IHJlcy5kYXRhOw0KICAgICAgICAgICAgICAgIHRoaXMuZnVuY2lvbmFyaW8gPSB0aGlzLmZ1bmNpb25hcmlvc1swXS5ub21GdW5jaW9uYXJpbzsNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5hbGVydGEoJ2RhbmdlcicsICdObyBzZSBoYW4gcG9kaWRvIGNhcmdhciBsb3MgRnVuY2lvbmFyaW9zJyk7DQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICBidXNjYXJQb3JDb2RpZ28oY29kaWdvQmFycmEsIGtleSwgY29kQmFyKXsNCiAgICAgICAgICAgIHRoaXMuYW50ZXJpb3IoY29kQmFyKQ0KICAgICAgICAgICAgY29uc3QgaW5kZXhBY3R1YWwgPSB0aGlzLnByb2R1Y3Rvcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmtleSA9PSBrZXkpOw0KICAgICAgICAgICAgY29uc3QgcG9zUHJvZCA9IHRoaXMucHJvZHMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5jb2RpZ29CYXJyYSA9PSBjb2RpZ29CYXJyYSkNCiAgICAgICAgICAgIGlmKHBvc1Byb2QgIT09IC0xKXsNCiAgICAgICAgICAgICAgICB0aGlzLmNhbWJpb1Byb2R1Y3RvKHRoaXMucHJvZHNbcG9zUHJvZF0uY29kaWdvQmFycmEsIGtleSkNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdG9zW2luZGV4QWN0dWFsXS5jb2RCYXIgPSB0aGlzLnByb2R1Y3RvQW50DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIC8vRnVuY2nDs24gcXVlIHRlIHBlcm1pdGUgZ3VhcmRhciBlbCB2YWxvciBhbnRlcmlvciBkZWwgc2VsZWN0DQogICAgICAgIGFudGVyaW9yKGNvZEJhcil7DQogICAgICAgICAgICB0aGlzLnByb2R1Y3RvQW50ID0gY29kQmFyDQogICAgICAgIH0sDQogICAgICAgIC8vU2kgc2UgY2FtYmlhIHVuIHByb2R1Y3RvIHNlIGRlYmUgYnVzY2FyIHN1IHN0b2NrDQogICAgICAgIGNhbWJpb1Byb2R1Y3RvKGNvZGlnb0JhcnJhLCBrZXkpew0KICAgICAgICAgICAgY29uc3QgaW5kZXhBY3R1YWwgPSB0aGlzLnByb2R1Y3Rvcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmtleSA9PSBrZXkpOw0KICAgICAgICAgICAgdmFyIHJlcGV0aWRvID0gZmFsc2U7DQogICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpPHRoaXMucHJvZHVjdG9zLmxlbmd0aDsgaSsrKXsNCiAgICAgICAgICAgICAgICBpZihpICE9IGluZGV4QWN0dWFsKXsNCiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5wcm9kdWN0b3NbaV0uY29kQmFyID09PSBjb2RpZ29CYXJyYSl7DQogICAgICAgICAgICAgICAgICAgICAgICByZXBldGlkbyA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZighcmVwZXRpZG8pew0KICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5wcm9kcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmNvZGlnb0JhcnJhID09IGNvZGlnb0JhcnJhKTsNCiAgICAgICAgICAgICAgICBjb25zdCBpbmRleDIgPSB0aGlzLnByb2R1Y3Rvcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmtleSA9PSBrZXkpOw0KICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdG9zW2luZGV4Ml0uc3RvY2sgPSB0aGlzLnByb2RzW2luZGV4XS5zdG9jaw0KICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdG9zW2luZGV4Ml0ubm9tUHJvZHVjdG8gPSB0aGlzLnByb2RzW2luZGV4XS5ub21Qcm9kdWN0bzsNCiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Rvc1tpbmRleDJdLmNvZGlnb0JhcnJhID0gdGhpcy5wcm9kc1tpbmRleF0uY29kaWdvQmFycmENCiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Rvc1tpbmRleDJdLmNvZEJhciA9IHRoaXMucHJvZHNbaW5kZXhdLmNvZGlnb0JhcnJhDQogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbaW5kZXgyXS5tYXJjYSA9IHRoaXMucHJvZHNbaW5kZXhdLm1hcmNhDQogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbaW5kZXgyXS5kZXNjcmlwY2lvbiA9IHRoaXMucHJvZHNbaW5kZXhdLmRlc2NyaXBjaW9uDQogICAgICAgICAgICAgICAgaWYodGhpcy5wcm9kdWN0b3NbaW5kZXgyXS5zdG9jayA8IDEpew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0YSgnZGFuZ2VyJywgJ05vIGhheSBzdG9jayBkaXNwb25pYmxlIHBhcmEgZXN0ZSBwcm9kdWN0bycpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmKHRoaXMucHJvZHVjdG9zW2luZGV4Ml0uY2FudGlkYWQgPiB0aGlzLnByb2R1Y3Rvc1tpbmRleDJdLnN0b2NrKXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbaW5kZXgyXS5jYW50aWRhZCA9IHRoaXMucHJvZHVjdG9zW2luZGV4Ml0uc3RvY2s7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbaW5kZXhBY3R1YWxdLmNvZEJhciA9IHRoaXMucHJvZHVjdG9BbnQNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgLy9TZSBhZ3JlZ2EgdW4gbnVldm8gcG9zaWJsZSBwcm9kdWN0bw0KICAgICAgICAvL0FERU1BUyBkZWJlIHJldmlzYXIgc2kgbG9zIHZhbG9yZXMgYW50ZXJpb3JlcyBlc3RhbiByZXBldGlkb3MNCiAgICAgICAgYWdyZWdhUHJvZHVjdG8oKXsNCiAgICAgICAgICAgIHRoaXMuY2FudGlkYWRQcm9kdWN0b3MrKw0KICAgICAgICAgICAgdmFyIGEgPSAwOw0KICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3MucHVzaCh7a2V5OiB0aGlzLmNhbnRpZGFkUHJvZHVjdG9zLCBub21Qcm9kdWN0bzogJycsIGNhbnRpZGFkOiAwLCBzdG9jazogMCwgY29kaWdvQmFycmE6ICcnLCBjb2RCYXI6ICcnLCBtYXJjYTogJycsIHZhY2lvOiAnJywgZGVzY3JpcGNpb246ICcnfSk7DQogICAgICAgICAgICAvL0J1c2NhIHNpIHVuIHByb2R1Y3RvIHlhIGV4aXN0ZSBlbiBlbiBhbGd1bm8gZGUgbG9zIHNlbGVjdCBoYWJpbGl0YWRvcyANCiAgICAgICAgICAgIHdoaWxlKGEgPCB0aGlzLnByb2RzLmxlbmd0aCl7DQogICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnByb2R1Y3Rvcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmNvZEJhciA9PSB0aGlzLnByb2RzW2FdLmNvZGlnb0JhcnJhKTsNCiAgICAgICAgICAgICAgICAvL1NpIGxvIGVuY3VlbnRyYSBwYXNhIGFsIHNpZ3VpZW50ZSBwcm9kdWN0bw0KICAgICAgICAgICAgICAgIGlmKGluZGV4ICE9IC0xKXsNCiAgICAgICAgICAgICAgICAgICAgYSsrOw0KICAgICAgICAgICAgICAgIH1lbHNleyAvL1NpIGVsIHZhbG9yIHJldG9ybmFkbyBlcyAtMSBzaWduaWZpY2EgcXVlIGVsIHByb2R1Y3RvIHlhIGV4aXN0ZSwgcG9yIGxvIHRhbnRvIGRlYmUgc2VndWlyIGJ1c2NhbmRvDQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdG9zW3RoaXMucHJvZHVjdG9zLmxlbmd0aC0xXS5ub21Qcm9kdWN0byA9IHRoaXMucHJvZHNbYV0ubm9tUHJvZHVjdG8NCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbdGhpcy5wcm9kdWN0b3MubGVuZ3RoLTFdLnN0b2NrID0gdGhpcy5wcm9kc1thXS5zdG9jaw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Rvc1t0aGlzLnByb2R1Y3Rvcy5sZW5ndGgtMV0uY29kaWdvQmFycmEgPSB0aGlzLnByb2RzW2FdLmNvZGlnb0JhcnJhDQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdG9zW3RoaXMucHJvZHVjdG9zLmxlbmd0aC0xXS5jb2RCYXIgPSB0aGlzLnByb2RzW2FdLmNvZGlnb0JhcnJhDQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdG9zW3RoaXMucHJvZHVjdG9zLmxlbmd0aC0xXS5tYXJjYSA9IHRoaXMucHJvZHNbYV0ubWFyY2ENCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbdGhpcy5wcm9kdWN0b3MubGVuZ3RoLTFdLmRlc2NyaXBjaW9uID0gdGhpcy5wcm9kc1thXS5kZXNjcmlwY2lvbg0KICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Rvc1t0aGlzLnByb2R1Y3Rvcy5sZW5ndGgtMV0ua2V5ID0gdGhpcy5jYW50aWRhZFByb2R1Y3Rvcw0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnByb2R1Y3Rvc1t0aGlzLnByb2R1Y3Rvcy5sZW5ndGgtMV0uc3RvY2sgPT09IDApew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGVydGEoJ2RhbmdlcicsICdObyBoYXkgc3RvY2sgZGlzcG9uaWJsZSBwYXJhIGVsIHByb2R1Y3RvICcgKyB0aGlzLnByb2R1Y3Rvc1t0aGlzLnByb2R1Y3Rvcy5sZW5ndGgtMV0ubm9tUHJvZHVjdG8pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmKGEgPT0gdGhpcy5wcm9kcy5sZW5ndGgpew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnRpZGFkUHJvZHVjdG9zLS07DQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdG9zLnNwbGljZSgtMSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRhKCdkYW5nZXInLCdObyBleGlzdGVuIG1hcyBwcm9kdWN0b3MgcGFyYSBhZ3JlZ2FyJykNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSANCiAgICAgICAgfSwNCiAgICAgICAgLy9TZSBxdWl0YSB1biBQcm9kdWN0byBkZSBsb3MgcXVlIHNlcsOhbiBhZ3JlZ2Fkb3MgYWwgc2lzdGVtYQ0KICAgICAgICBxdWl0YXJQcm9kdWN0bygpew0KICAgICAgICAgICAgaWYodGhpcy5wcm9kdWN0b3MubGVuZ3RoID4gMSl7DQogICAgICAgICAgICAgICAgdGhpcy5jYW50aWRhZFByb2R1Y3Rvcy0tOw0KICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdG9zLnNwbGljZSgtMSk7DQogICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0YSgnZGFuZ2VyJywgJ1RpZW5lIHF1ZSBleGlzdGlyIGFsIG1lbm9zIDEgcHJvZHVjdG8nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgLy9JbmRpY2Ftb3MgZWwgbWluaW1vIGRlIGNhbnRpZGFkIHBhcmEgcXVlIG5vIGVzdGUgdmFjaW8gbyBzZWEgbWVub3IgYSAwDQogICAgICAgIGNhbnRNaW4ocHJvZHVjdG8pew0KICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnByb2R1Y3Rvcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmtleSA9PSBwcm9kdWN0byk7DQogICAgICAgICAgICBpZih0aGlzLnByb2R1Y3Rvc1tpbmRleF0uY2FudGlkYWQgPCAxIHx8IHRoaXMucHJvZHVjdG9zW2luZGV4XS5jYW50aWRhZCA9PSAnJyl7DQogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbaW5kZXhdLmNhbnRpZGFkID0gMTsNCiAgICAgICAgICAgIH0gZWxzZSBpZih0aGlzLnByb2R1Y3Rvc1tpbmRleF0uY2FudGlkYWQgPiB0aGlzLnByb2R1Y3Rvc1tpbmRleF0uc3RvY2spew0KICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdG9zW2luZGV4XS5jYW50aWRhZCA9IHRoaXMucHJvZHVjdG9zW2luZGV4XS5zdG9jazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgY29udmVydERhdGVNeXNxbCh5b3VyRGF0ZSl7DQogICAgICAgICAgICB5b3VyRGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0NCiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IHlvdXJEYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkNCiAgICAgICAgICAgIHlvdXJEYXRlID0gbmV3IERhdGUoeW91ckRhdGUuZ2V0VGltZSgpIC0gKG9mZnNldCo2MCoxMDAwKSkNCiAgICAgICAgICAgIHJldHVybiB5b3VyRGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0NCgkJfSwNCiAgICAgICAgZmVjaGFNZW1vKGRhdGUpew0KICAgICAgICAgICAgY29uc3QgZm9ybWF0RGF0ZSA9IChkYXRlKT0+ew0KICAgICAgICAgICAgbGV0IGZvcm1hdHRlZF9kYXRlID0gZGF0ZS5nZXREYXRlKCkgKyAiLSIgKyAoZGF0ZS5nZXRNb250aCgpICsgMSkgKyAiLSIgKyBkYXRlLmdldEZ1bGxZZWFyKCkNCiAgICAgICAgICAgIHJldHVybiBmb3JtYXR0ZWRfZGF0ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgLy9GdW5jacOzbiBxdWUgcGVybWl0ZSBnZW5lcmFyIHVuIGluZm9ybWUgeSBlbnZpYXIgbG9zIGRhdG9zIGRlIHVuIG51ZXZvIEhJU1RPUklBTCANCiAgICAgICAgZ2VuZXJhckluZm9ybWUoKXsNCiAgICAgICAgICAgIHZhciBkdCA9IHRoaXMuY29udmVydERhdGVNeXNxbChuZXcgRGF0ZSgpKQ0KICAgICAgICAgICAgdmFyIHN1bWFTdG9jayA9IDA7DQogICAgICAgICAgICB2YXIgc3VtYSA9IDA7DQogICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5wcm9kdWN0b3MubGVuZ3RoOyBpKyspew0KICAgICAgICAgICAgICAgIHN1bWFTdG9jayA9IHN1bWFTdG9jayArIHRoaXMucHJvZHVjdG9zW2ldLnN0b2NrDQogICAgICAgICAgICAgICAgc3VtYSA9IHN1bWEgKyB0aGlzLnByb2R1Y3Rvc1tpXS5jYW50aWRhZA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc3dhbC5maXJlKHsNCiAgICAgICAgICAgIHRpdGxlOiAnwr9TZWd1cm8gcXVlIGRlc2VhIHJlYWxpemFyIGxhIGVudHJlZ2EgZGUgSW5zdW1vcz8nLA0KICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLA0KICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwNCiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogJyMzMDg1ZDYnLA0KICAgICAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICcjZDMzJywNCiAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdDYW5jZWxhcicsDQogICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ8KhU2khJw0KICAgICAgICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICBpZihzdW1hU3RvY2sgPiAwICYmIHN1bWEgPiAwICl7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29uZmlnID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMudG9rZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmF4aW9zLnBvc3QoJ2FwaS9hZ3JlZ2FIaXN0b3JpYWwnLCB7ZmVjaGE6IGR0LCBub21GdW5jaW9uYXJpbzogdGhpcy5mdW5jaW9uYXJpbywgbm9tRGVwZW5kZW5jaWE6IHRoaXMuZGVwZW5kZW5jaWEsIG1lbW86IHRoaXMubWVtbysxfSwgY29uZmlnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFyZXMuZGF0YS5zcWxNZXNzYWdlKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkhpc3RvcmlhbFByb2R1Y3RvKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN0YXJTdG9jaygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRG9jKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYnRlbmVyVWx0aW1vTWVtbygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnT29wcy4uLicsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ05vIHNlIGhhIGxvZ3JhZG8gY3JlYXIgJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb290ZXI6ICdBbGfDum4gZGF0byBoYSBzaWRvIGluY29ycmVjdG8gdmVyaWZpcXVlbG9zJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnT29wcy4uLicsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ05vIHNlIGhhIGxvZ3JhZG8gcmVnaXN0cmFyIGxhIGVudHJlZ2EgZGUgaW5zdW1vcycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyOiAnUG9zaWJsZSBlcnJvciBkZWwgc2lzdGVtYScNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB9KSANCiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoc3VtYVN0b2NrIDwgMCl7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0YSgnZGFuZ2VyJywgJ05vIHNlIGVuY3VlbnRyYSBzdG9jayBkaXNwb25pYmxlJykNCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0YSgnZGFuZ2VyJywgJ05vIHNlIGhhIGluZ3Jlc2FkbyBuaW5ndW5hIGNhbnRpZGFkJykNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIC8vUmVnaXN0cmEgbG9zIHByb2R1Y3RvcyBkZSBlc3RhIEVOVFJFR0EgREUgSU5TVU1PUyANCiAgICAgICAgSGlzdG9yaWFsUHJvZHVjdG8oKXsNCiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGk8dGhpcy5wcm9kdWN0b3MubGVuZ3RoOyBpKyspew0KICAgICAgICAgICAgICAgIGlmKHRoaXMucHJvZHVjdG9zW2ldLmNhbnRpZGFkID4gMCl7DQogICAgICAgICAgICAgICAgICAgIGxldCBjb25maWcgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMudG9rZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmF4aW9zLnBvc3QoJ2FwaS9hZ3JlZ2FoaXN0UHJvZCcsIHtjYW50aWRhZDogdGhpcy5wcm9kdWN0b3NbaV0uY2FudGlkYWQsIGNvZGlnb0JhcnJhOiB0aGlzLnByb2R1Y3Rvc1tpXS5jb2RCYXJ9LCBjb25maWcpDQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXJlcy5kYXRhLnNxbE1lc3NhZ2Upew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU2UgaGEgcmVnaXN0cmFkbyBsYSBlbnRyZWdhIGRlIGluc3Vtb3MgY29ycmVjdGFtZW50ZScsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NlbGVjY2lvbmUgT2sgcGFyYSBjb250aW51YXInLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ09vcHMuLi4nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdObyBzZSBoYSBsb2dyYWRvIGNyZWFyICcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyOiAnQWxnw7puIGRhdG8gaGEgc2lkbyBpbmNvcnJlY3RvIHZlcmlmaXF1ZWxvcycNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ09vcHMuLi4nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdObyBzZSBoYSBsb2dyYWRvIHJlZ2lzdHJhciBsYSBlbnRyZWdhIGRlIGluc3Vtb3MnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvb3RlcjogJ1Bvc2libGUgZXJyb3IgZGVsIHNpc3RlbWEnDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIC8vUmVzdGEgbG9zIHN0b2NrIGRlIGNhZGEgcHJvZHVjdG8NCiAgICAgICAgcmVzdGFyU3RvY2soKXsNCiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGk8dGhpcy5wcm9kdWN0b3MubGVuZ3RoOyBpKyspew0KICAgICAgICAgICAgICAgIGlmKHRoaXMucHJvZHVjdG9zW2ldLmNhbnRpZGFkID4gMCl7DQogICAgICAgICAgICAgICAgICAgIGxldCBjb25maWcgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMudG9rZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmF4aW9zLnB1dChgYXBpL2FjdHVhbGl6YVN0b2NrLyR7dGhpcy5wcm9kdWN0b3NbaV0uY29kQmFyfWAsIHtjYW50aWRhZDogdGhpcy5wcm9kdWN0b3NbaV0uY2FudGlkYWR9LCBjb25maWcpDQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0dWFsaXphclN0b2NrKCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZW5zYWplID0gJ1Bvc2libGUgZXJyb3IgZGVsIHNpc3RlbWEnOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ09vcHMuLi4nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdObyBzZSBoYSBsb2dyYWRvIHJlZ2lzdHJhciBsYSBlbnRyZWdhIGRlIGluc3Vtb3MnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvb3RlcjogbWVuc2FqZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgLy9BY3R1YWxpemEgbGEgcGFnaW5hIHRyYXMgZ2VuZXJhciB1bmEgZW50cmVnYSBkZSBpbnN1bW9zDQogICAgICAgIGFjdHVhbGl6YXJTdG9jaygpew0KICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaTx0aGlzLnByb2R1Y3Rvcy5sZW5ndGgtMTsgaSsrKXsNCiAgICAgICAgICAgICAgICB0aGlzLmNhbnRpZGFkUHJvZHVjdG9zLS07DQogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3Muc3BsaWNlKC0xKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuY2FyZ2FyUHJvZHVjdG9zKHRydWUpOw0KICAgICAgICB9LA0KICAgICAgICAvL1Blcm1pdGUgdmVyIGxvcyBkZXRhbGxlcyBkZSB1biBwcm9kdWN0byB5IGxvcyBjYXJnYQ0KICAgICAgICBkZXRhbGxlcyhpZCl7DQogICAgICAgICAgICBsZXQgY29uZmlnID0gew0KICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMudG9rZW4NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmF4aW9zLmdldChgYXBpL29idGVuZXJQcm9kdWN0by8ke2lkfWAsIGNvbmZpZykNCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvZGlnbyA9IHJlcy5kYXRhWzBdLmNvZGlnb0JhcnJhOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RvID0gcmVzLmRhdGFbMF0ubm9tUHJvZHVjdG87DQogICAgICAgICAgICAgICAgICAgIHRoaXMubWFyY2EgPSByZXMuZGF0YVswXS5tYXJjYTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXNjcmlwY2lvbiA9IHJlcy5kYXRhWzBdLmRlc2NyaXBjaW9uDQogICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGk8dGhpcy5pbWFnZW5lcy5sZW5ndGg7IGkrKyl7DQogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmltYWdlbmVzW2ldLnNwbGl0KCcuJylbMF0gPT0gdGhpcy5jb2RpZ28pew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VuRGlyID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9kYkltYWdlbmVzLycgKyB0aGlzLmltYWdlbmVzW2ldDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlbkRpciA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvZGJJbWFnZW5lcy9uby1pbWFnZW4ucG5nJw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7DQogICAgICAgICAgICAgICAgICAgIGljb246ICdlcnJvcicsDQogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnT29wcy4uLicsDQogICAgICAgICAgICAgICAgICAgIHRleHQ6ICdObyBzZSBoYSBsb2dyYWRvIGVuY29udHJhciBsb3MgZGF0b3MgZGVsIGVxdWlwbycsDQogICAgICAgICAgICAgICAgICAgIGZvb3RlcjogJ1Bvc2libGUgZXJyb3IgZGVsIHNpc3RlbWEnDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgLy9GdW5jacOzbiBxdWUgb2J0aWVuZSB1bmEgaW1hZ2VuDQogICAgICAgIG9idGVuZXJJbWFnZW5lcygpew0KICAgICAgICAgICAgbGV0IGNvbmZpZyA9IHsNCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLnRva2VuDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgIHRoaXMuYXhpb3MuZ2V0KGBhcGkvb2J0ZW5lckltYWdlbmAsIGNvbmZpZykNCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlbmVzID0gcmVzLmRhdGENCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGVydGEoJ2RhbmdlcicsICdFc3RlIHByb2R1Y3RvIG5vIHBvc2VlIGltYWdlbiBvIG5vIGhhIGNhcmdhZG8gY29ycmVjdGFtZW50ZScpDQogICAgICAgICAgICAgICAgfSkNCg0KICAgICAgICB9LA0KICAgICAgICBzMmFiKHMpIHsNCiAgICAgICAgICAgIHZhciBidWYgPSBuZXcgQXJyYXlCdWZmZXIocy5sZW5ndGgpOw0KICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgVWludDhBcnJheShidWYpOw0KICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpIT1zLmxlbmd0aDsgKytpKSB2aWV3W2ldID0gcy5jaGFyQ29kZUF0KGkpICYgMHhGRjsNCiAgICAgICAgICAgIHJldHVybiBidWY7DQogICAgICAgIH0sDQogICAgICAgIC8vRnVuY2nDs24gcGFyYSBleHBvcnRhciB1biBNRU1PDQogICAgICAgIHJlbmRlckRvYygpIHsNCiAgICAgICAgICAgIGxldCBjb25maWcgPSB7DQogICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBuTWVtbyA9IHRoaXMubWVtbysxDQogICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCkNCiAgICAgICAgICAgIHZhciBkdCA9IGRhdGUuZ2V0RGF0ZSgpICsgIi0iICsgKGRhdGUuZ2V0TW9udGgoKSArIDEpICsgIi0iICsgZGF0ZS5nZXRGdWxsWWVhcigpDQogICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZGVwZW5kZW5jaWFzLmZpbmRJbmRleChpdGVtID0+IGl0ZW0ubm9tRGVwZW5kZW5jaWEgPT0gdGhpcy5kZXBlbmRlbmNpYSk7DQogICAgICAgICAgICB0aGlzLmF4aW9zLnBvc3QoJ2FwaS9vYnRlbmVyTWVtbycsIHtwcm9kdWN0b3M6IHRoaXMucHJvZHVjdG9zLCBkZXBlbmRlbmNpYTogdGhpcy5kZXBlbmRlbmNpYSwgY29kRGVwZW5kZW5jaWE6IHRoaXMuZGVwZW5kZW5jaWFzW2luZGV4XS5jb2REZXBlbmRlbmNpYSwgY29tdW5hOiB0aGlzLmRlcGVuZGVuY2lhc1tpbmRleF0uY29tdW5hLCBmZWNoYTogZHQudG9TdHJpbmcoKSwgcmVmZXJlbmNpYTogdGhpcy5yZWZlcmVuY2lhLCB0aWNrZXQ6IHRoaXMudGlja2V0LCBtZW1vOiBuTWVtb30sIGNvbmZpZykNCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFt0aGlzLnMyYWIocmVzLmRhdGEpXSwge3R5cGU6ICcnfSk7DQogICAgICAgICAgICAgICAgICAgIGxldCB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsgLy8gMy4gQ3JlYSB1biBwdW50byBkZSBVUkwgdGVtcG9yYWwgYWwgb2JqZXRvIEJsb2INCiAgICAgICAgICAgICAgICAgICAgLy8gNC4gUHVlZGUgc2ltdWxhciB1bmEgZ2FtYSBkZSBvcGVyYWNpb25lcyBwYXJhIGVzdGUgb2JqZXRvIGRlIGFyY2hpdm8gZGVzcHXDqXMgZGUgY3JlYXIgdW5hIFVSTCwgcG9yIGVqZW1wbG86IHZpc3RhIHByZXZpYSwgZGVzY2FyZ2FyDQogICAgICAgICAgICAgICAgICAgIGxldCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOw0KICAgICAgICAgICAgICAgICAgICBhLmhyZWYgPSB1cmw7DQogICAgICAgICAgICAgICAgICAgIGEuZG93bmxvYWQgPSAiTUVNTyIgKyBuTWVtbyArICIueGxzeCI7DQogICAgICAgICAgICAgICAgICAgIGEuY2xpY2soKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gNS4gTGliZXJhciBlc3RhIFVSTCBkZSBvYmpldG8gdGVtcG9yYWwNCiAgICAgICAgICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsNCg0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoew0KICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywNCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnT29wcy4uLicsDQogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnTm8gc2UgaGEgbG9ncmFkbyByZWdpc3RyYXIgbGEgZW50cmVnYSBkZSBpbnN1bW9zJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvb3RlcjogJ1Bvc2libGUgZXJyb3IgZGVsIHNpc3RlbWEnDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgLy9GdW5jaW9uZXMgZGUgbGEgYWxlcnRhDQogICAgICAgIGNvdW50RG93bkNoYW5nZWQoZGlzbWlzc0NvdW50RG93bikgew0KICAgICAgICAgICAgdGhpcy5kaXNtaXNzQ291bnREb3duID0gZGlzbWlzc0NvdW50RG93bg0KICAgICAgICB9LA0KICAgICAgICBzaG93QWxlcnQoKSB7DQogICAgICAgICAgICB0aGlzLmRpc21pc3NDb3VudERvd24gPSB0aGlzLmRpc21pc3NTZWNzDQogICAgICAgIH0sDQogICAgICAgIGFsZXJ0YShjb2xvciwgdGV4dG8pew0KICAgICAgICAgICAgdGhpcy5tZW5zYWplLmNvbG9yID0gY29sb3I7DQogICAgICAgICAgICB0aGlzLm1lbnNhamUudGV4dG8gPSB0ZXh0bzsNCiAgICAgICAgICAgIHRoaXMuc2hvd0FsZXJ0KCk7DQogICAgICAgIH0sDQogICAgfSwNCn0NCg=="},{"version":3,"sources":["insumos.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsJA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"insumos.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div class=\"menu\">\r\n        <navbar />\r\n        <transition name=\"slide-fade\">\r\n            <b-container><br>\r\n                <h1 class=\"mt-2\">Entrega de Insumos</h1>\r\n                <b-alert\r\n                :show=\"dismissCountDown\"\r\n                dismissible\r\n                :variant=\"mensaje.color\"\r\n                @dismissed=\"dismissCountDown=0\"\r\n                @dismiss-count-down=\"countDownChanged\"\r\n                >\r\n                {{mensaje.texto}}\r\n                </b-alert>\r\n                <div class=\" card mt-4\">\r\n                    <div class=\"card-header\">\r\n                        <h2>Determine que productos serán enviados a la Dependencia</h2>\r\n                    </div>\r\n                    <div class=\"card-body\">\r\n                        <b-row class=\"mt-2\">\r\n                            <b-col cols=\"12\" md=\"3\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Dependencia</label>\r\n                                <select class=\"form-control\" @change=\"cambiaDep()\" v-model=\"$v.dependencia.$model\">\r\n                                    <option v-for=\"i in dependencias\" :key=\"i.codDependencia\" :value=\"i.nomDependencia\">{{i.nomDependencia}}</option>\r\n                                </select>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"2\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Codigo Jardín</label>\r\n                                <input disabled type=\"text\" class=\"form-control\" id=\"nomFuncionarioAgrega\" aria-describedby=\"emailHelp\" v-model=\"codigoJardin\">\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"3\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Funcionario</label>\r\n                                <select class=\"form-control\" v-model=\"funcionario\">\r\n                                    <option v-for=\"i in funcionarios\" :key=\"i.nomFuncionario\" :value=\"i.nomFuncionario\">{{i.nomFuncionario}}</option>\r\n                                </select>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"2\">\r\n                                <b-button @click=\"agregaProducto()\" variant=\"primary\" class=\"btn-primary btn boton\">Agregar Producto</b-button>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"2\">\r\n                                <b-button @click=\"quitarProducto()\" class=\"btn-danger btn boton\">Quitar Producto</b-button>\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mt-2\">\r\n                            <b-col cols=\"12\" md=\"6\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Referencia</label>\r\n                                <input type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"$v.referencia.$model\">\r\n                                <p class=\"text-danger\" v-if=\"$v.referencia.$error\" >Ingrese la referencia para generar el memo</p>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"6\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Número de Ticket</label>\r\n                                <input type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"$v.ticket.$model\">\r\n                                <p class=\"text-danger\" v-if=\"$v.ticket.$error\" >Ingrese el número de ticket para el memo</p>\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mt-2\" v-for=\"i in productos\" :key=\"i.key\">\r\n                            <b-col cols=\"12\" md=\"2\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Codigo de Barra</label>\r\n                                <input type=\"text\" @input=\"buscarPorCodigo(i.codigoBarra, i.key, i.codBar)\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"i.codigoBarra\"> \r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"3\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Producto</label>\r\n                                <select disabled class=\"form-control\" @click=\"anterior(i.nomProducto)\" @change=\"cambioProducto(i.nomProducto, i.key)\" v-model=\"i.nomProducto\">\r\n                                    <option v-for=\"i in prods\" :key=\"i.codigoBarra\" :value=\"i.nomProducto\">{{i.nomProducto}}</option>\r\n                                </select>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"1\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Cantidad</label>\r\n                                <input type=\"number\" @change=\"cantMin(i.key)\" min=\"1\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"i.cantidad\">\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"1\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Stock</label>\r\n                                <input disabled type=\"number\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"i.stock\">\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"3\">\r\n                                    <label for=\"exampleInputEmail1\" class=\"form-label\">Observaciones</label>\r\n                                    <textarea type=\"text\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" v-model=\"i.descripcion\"></textarea>\r\n                                </b-col>\r\n                            <b-col cols=\"12\" md=\"2\">\r\n                                <b-button @click=\"detalles(i.codBar)\" v-b-modal.modal-1 class=\"btn-success boton\">Detalles Producto</b-button>\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row>\r\n                            <b-button v-b-modal.modal-2 class=\"btn-success btn boton mt-5\">Generar Informe</b-button>\r\n                        </b-row>\r\n                    </div>\r\n                </div>\r\n                <b-modal id=\"modal-2\" size=\"xl\" class=\"modal-xl\" title=\"Preview del MEMO N° \">\r\n                    <div class=\"card-body\">\r\n                        <b-row class=\"mt-2\" v-for=\"i in productos\" :key=\"i.key\">\r\n                            <b-col cols=\"12\" md=\"3\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Nombre del Producto</label>\r\n                                <select disabled class=\"form-control\" @click=\"anterior(i.nomProducto)\" @change=\"cambioProducto(i.nomProducto, i.key)\" v-model=\"i.nomProducto\">\r\n                                    <option v-for=\"i in prods\" :key=\"i.codigoBarra\" :value=\"i.nomProducto\">{{i.nomProducto}}</option>\r\n                                </select>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"2\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Cantidad</label>\r\n                                <input disabled type=\"number\" @change=\"cantMin(i.key)\" min=\"1\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"i.cantidad\">\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"3\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Marca del Producto</label>\r\n                                <input disabled type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"i.marca\">\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"4\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Observacion</label>\r\n                                <input disabled type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"i.descripcion\">\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row>\r\n                            <b-button @click=\"generarInforme()\" class=\"btn-success btn boton mt-5\">Generar MEMO</b-button>\r\n                        </b-row>\r\n                    </div>\r\n                </b-modal>\r\n                <b-modal id=\"modal-1\" size=\"lg\" title=\"Detalles del Producto\">\r\n                    <div class=\"card-body\">\r\n                            <b-row class=\"mt-2\">\r\n                                <b-col cols=\"12\" md=\"4\">\r\n                                    <label for=\"exampleInputEmail1\" class=\"form-label\">Codigo de Barras</label>\r\n                                    <input disabled type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"codigo\">\r\n                                </b-col>\r\n                                <b-col cols=\"12\" md=\"4\">\r\n                                    <label for=\"exampleInputEmail1\" class=\"form-label\">Nombre</label>\r\n                                    <input disabled type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"producto\">\r\n                                </b-col>\r\n                                <b-col cols=\"12\" md=\"4\">\r\n                                    <label for=\"exampleInputEmail1\" class=\"form-label\">Marca</label>\r\n                                    <input disabled type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"marca\">\r\n                                </b-col>\r\n                            </b-row>\r\n                            <b-row class=\"mt-4\">\r\n                                <b-col cols=\"12\" md=\"12\">\r\n                                    <label for=\"exampleInputEmail1\" class=\"form-label\">Descripcion</label>\r\n                                    <textarea disabled type=\"text\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" v-model=\"descripcion\"></textarea>\r\n                                </b-col>\r\n                            </b-row>\r\n                            <b-row class=\"mt-5\">\r\n                                <b-col cols=\"12\" md=\"12\">\r\n                                    <img :src=\"imagenDir\" id=\"imagenEdita\" width=\"75%\">\r\n                                </b-col>\r\n                            </b-row>\r\n                        </div>\r\n                </b-modal>\r\n            </b-container>\r\n        </transition>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport navbar from \"../components/navbar.vue\";\r\nimport { required, minLength} from \"vuelidate/lib/validators\";\r\n\r\nimport { mapState } from 'vuex'\r\n\r\nfunction loadFile(url, callback) {\r\n    PizZipUtils.getBinaryContent(url, callback);\r\n}\r\nexport default {\r\n    name: \"insumos\",\r\n    components: {\r\n        navbar,\r\n    },\r\n     data() {\r\n      return {\r\n        //Datos para agregar un nuevo memo (historial) con v-model\r\n        cantidadProductos: 1,\r\n        productos: [{key: 1, nomProducto: '', cantidad: 0, stock: 0, codigoBarra: '', codBar: '', marca: '', vacio: '', descripcion: ''}],\r\n        prods: [],\r\n        productoAnt: '',\r\n        imagenes: [],\r\n        //Variable para las dependencias \r\n        dependencias: [],\r\n        dependencia: '',\r\n        codigoJardin: '',\r\n        //Variables para indicar al funcionario\r\n        funcionarios: [],\r\n        funcionario: '',\r\n        //Variables de las alertas\r\n        dismissSecs: 5,\r\n        dismissCountDown: 0,\r\n        mensaje: {color: '', texto: ''},\r\n        //VARIABLES DE DETALLES\r\n        codigo: '',\r\n        producto: '',\r\n        marca: '',\r\n        descripcion: '',\r\n        memo: 1,\r\n        ticket: '',\r\n        referencia: '',\r\n        imagen: null,\r\n        imagenDir: '',\r\n      }\r\n    },\r\n    validations:{\r\n      //Validaciones de los input\r\n      dependencia: {required},\r\n      referencia: {required},\r\n      ticket: {required}\r\n    },\r\n    computed: {\r\n      ...mapState(['token', 'usuarioDB'])\r\n    },\r\n    created(){\r\n        this.cargarProductos(true);\r\n        this.cargarDependencias();\r\n        this.obtenerUltimoMemo();\r\n        this.obtenerImagenes();\r\n    },\r\n    methods:{\r\n        //Obtener ultimo memo\r\n        obtenerUltimoMemo(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get('api/obtenerUltimoMemo', config)\r\n            .then(res => {\r\n                this.memo = res.data[0].memo\r\n                if(this.memo === null){\r\n                    this.memo=0;\r\n                }\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se ha logrado obtener el memo');\r\n            })\r\n        },\r\n        //Metodo que Carga todos los productos del sistema\r\n        cargarProductos(primera){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get('api/obtenerProductosSolos', config)\r\n            .then(res => {\r\n                this.prods = res.data;\r\n                if(primera){\r\n                    this.productos[0].nomProducto = this.prods[0].nomProducto\r\n                    this.productos[0].stock = this.prods[0].stock\r\n                    this.productos[0].codigoBarra = this.prods[0].codigoBarra\r\n                    this.productos[0].codBar = this.prods[0].codigoBarra\r\n                    this.productos[0].marca = this.prods[0].marca\r\n                    this.productos[0].descripcion = this.prods[0].descripcion\r\n                    if(this.productos[0].stock === 0){\r\n                        this.alerta('danger', 'No se encuentra stock del producto ' + this.productos[0].nomProducto)\r\n                    }\r\n                }\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se han podido cargar los Productos');\r\n            })\r\n        },\r\n        //Función que se encargar de cargar las dependencias\r\n        cargarDependencias(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get('api/obtenerDependencias', config)\r\n            .then(res => {\r\n                this.dependencias = res.data;\r\n                this.dependencia = this.dependencias[0].nomDependencia;\r\n                this.codigoJardin = res.data[0].codDependencia\r\n                this.cargarFuncionarios();\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se han podido cargar las Dependencias');\r\n            })\r\n        },\r\n        //Función que carga los funcionarios al cambiar la dependencia\r\n        cambiaDep(){\r\n            this.cargarFuncionarios();\r\n            const index = this.dependencias.findIndex(item => item.nomDependencia == this.dependencia);\r\n            this.codigoJardin = this.dependencias[index].codDependencia\r\n        },\r\n        //Función que se encarga de cargar a los funcionarios encargados de la dependencia indicada\r\n        cargarFuncionarios(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get(`api/obtenerFuncionarioDep/${this.dependencia}`, config)\r\n            .then(res => {\r\n                this.funcionarios = res.data;\r\n                this.funcionario = this.funcionarios[0].nomFuncionario;\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se han podido cargar los Funcionarios');\r\n            })\r\n        },\r\n        buscarPorCodigo(codigoBarra, key, codBar){\r\n            this.anterior(codBar)\r\n            const indexActual = this.productos.findIndex(item => item.key == key);\r\n            const posProd = this.prods.findIndex(item => item.codigoBarra == codigoBarra)\r\n            if(posProd !== -1){\r\n                this.cambioProducto(this.prods[posProd].codigoBarra, key)\r\n            }else{\r\n                this.productos[indexActual].codBar = this.productoAnt\r\n            }\r\n        },\r\n        //Función que te permite guardar el valor anterior del select\r\n        anterior(codBar){\r\n            this.productoAnt = codBar\r\n        },\r\n        //Si se cambia un producto se debe buscar su stock\r\n        cambioProducto(codigoBarra, key){\r\n            const indexActual = this.productos.findIndex(item => item.key == key);\r\n            var repetido = false;\r\n            for(var i = 0; i<this.productos.length; i++){\r\n                if(i != indexActual){\r\n                    if(this.productos[i].codBar === codigoBarra){\r\n                        repetido = true;\r\n                    }\r\n                }\r\n            }\r\n            if(!repetido){\r\n                const index = this.prods.findIndex(item => item.codigoBarra == codigoBarra);\r\n                const index2 = this.productos.findIndex(item => item.key == key);\r\n                this.productos[index2].stock = this.prods[index].stock\r\n                this.productos[index2].nomProducto = this.prods[index].nomProducto;\r\n                this.productos[index2].codigoBarra = this.prods[index].codigoBarra\r\n                this.productos[index2].codBar = this.prods[index].codigoBarra\r\n                this.productos[index2].marca = this.prods[index].marca\r\n                this.productos[index2].descripcion = this.prods[index].descripcion\r\n                if(this.productos[index2].stock < 1){\r\n                    this.alerta('danger', 'No hay stock disponible para este producto')\r\n                }\r\n                if(this.productos[index2].cantidad > this.productos[index2].stock){\r\n                    this.productos[index2].cantidad = this.productos[index2].stock;\r\n                }\r\n            }else{\r\n                this.productos[indexActual].codBar = this.productoAnt\r\n                \r\n            }\r\n        },\r\n        //Se agrega un nuevo posible producto\r\n        //ADEMAS debe revisar si los valores anteriores estan repetidos\r\n        agregaProducto(){\r\n            this.cantidadProductos++\r\n            var a = 0;\r\n            this.productos.push({key: this.cantidadProductos, nomProducto: '', cantidad: 0, stock: 0, codigoBarra: '', codBar: '', marca: '', vacio: '', descripcion: ''});\r\n            //Busca si un producto ya existe en en alguno de los select habilitados \r\n            while(a < this.prods.length){\r\n                const index = this.productos.findIndex(item => item.codBar == this.prods[a].codigoBarra);\r\n                //Si lo encuentra pasa al siguiente producto\r\n                if(index != -1){\r\n                    a++;\r\n                }else{ //Si el valor retornado es -1 significa que el producto ya existe, por lo tanto debe seguir buscando\r\n                    this.productos[this.productos.length-1].nomProducto = this.prods[a].nomProducto\r\n                    this.productos[this.productos.length-1].stock = this.prods[a].stock\r\n                    this.productos[this.productos.length-1].codigoBarra = this.prods[a].codigoBarra\r\n                    this.productos[this.productos.length-1].codBar = this.prods[a].codigoBarra\r\n                    this.productos[this.productos.length-1].marca = this.prods[a].marca\r\n                    this.productos[this.productos.length-1].descripcion = this.prods[a].descripcion\r\n                    this.productos[this.productos.length-1].key = this.cantidadProductos\r\n                    if(this.productos[this.productos.length-1].stock === 0){\r\n                        this.alerta('danger', 'No hay stock disponible para el producto ' + this.productos[this.productos.length-1].nomProducto)\r\n                    }\r\n                    break;\r\n                }\r\n                if(a == this.prods.length){\r\n                    this.cantidadProductos--;\r\n                    this.productos.splice(-1);\r\n                    this.alerta('danger','No existen mas productos para agregar')\r\n                    break;\r\n                }\r\n            } \r\n        },\r\n        //Se quita un Producto de los que serán agregados al sistema\r\n        quitarProducto(){\r\n            if(this.productos.length > 1){\r\n                this.cantidadProductos--;\r\n                this.productos.splice(-1);\r\n            }else{\r\n                this.alerta('danger', 'Tiene que existir al menos 1 producto');\r\n            }\r\n        },\r\n        //Indicamos el minimo de cantidad para que no este vacio o sea menor a 0\r\n        cantMin(producto){\r\n            const index = this.productos.findIndex(item => item.key == producto);\r\n            if(this.productos[index].cantidad < 1 || this.productos[index].cantidad == ''){\r\n                this.productos[index].cantidad = 1;\r\n            } else if(this.productos[index].cantidad > this.productos[index].stock){\r\n                this.productos[index].cantidad = this.productos[index].stock;\r\n            }\r\n        },\r\n        convertDateMysql(yourDate){\r\n            yourDate.toISOString().split('T')[0]\r\n            const offset = yourDate.getTimezoneOffset()\r\n            yourDate = new Date(yourDate.getTime() - (offset*60*1000))\r\n            return yourDate.toISOString().split('T')[0]\r\n\t\t},\r\n        fechaMemo(date){\r\n            const formatDate = (date)=>{\r\n            let formatted_date = date.getDate() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getFullYear()\r\n            return formatted_date;\r\n            }\r\n        },\r\n        //Función que permite generar un informe y enviar los datos de un nuevo HISTORIAL \r\n        generarInforme(){\r\n            var dt = this.convertDateMysql(new Date())\r\n            var sumaStock = 0;\r\n            var suma = 0;\r\n            for(var i = 0; i < this.productos.length; i++){\r\n                sumaStock = sumaStock + this.productos[i].stock\r\n                suma = suma + this.productos[i].cantidad\r\n            }\r\n            swal.fire({\r\n            title: '¿Seguro que desea realizar la entrega de Insumos?',\r\n            type: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            cancelButtonText: 'Cancelar',\r\n            confirmButtonText: '¡Si!'\r\n            }).then((result) => {\r\n                if (result.value) {\r\n                    if(sumaStock > 0 && suma > 0 ){\r\n                        let config = {\r\n                            headers: {\r\n                                token: this.token\r\n                            }\r\n                        }\r\n                        this.axios.post('api/agregaHistorial', {fecha: dt, nomFuncionario: this.funcionario, nomDependencia: this.dependencia, memo: this.memo+1}, config)\r\n                        .then(res => {\r\n                        if(!res.data.sqlMessage){\r\n                            this.HistorialProducto();\r\n                            this.restarStock();\r\n                            this.renderDoc();\r\n                            this.obtenerUltimoMemo();\r\n                        }else{\r\n                            Swal.fire({\r\n                            icon: 'error',\r\n                            title: 'Oops...',\r\n                            text: 'No se ha logrado crear ',\r\n                            footer: 'Algún dato ha sido incorrecto verifiquelos'\r\n                            })\r\n                        }\r\n                        })\r\n                        .catch(e => {\r\n                        Swal.fire({\r\n                            icon: 'error',\r\n                            title: 'Oops...',\r\n                            text: 'No se ha logrado registrar la entrega de insumos',\r\n                            footer: 'Posible error del sistema'\r\n                        })\r\n                        }) \r\n                    }else if(sumaStock < 0){\r\n                        this.alerta('danger', 'No se encuentra stock disponible')\r\n                    }else{\r\n                        this.alerta('danger', 'No se ha ingresado ninguna cantidad')\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        //Registra los productos de esta ENTREGA DE INSUMOS \r\n        HistorialProducto(){\r\n            for(var i = 0; i<this.productos.length; i++){\r\n                if(this.productos[i].cantidad > 0){\r\n                    let config = {\r\n                        headers: {\r\n                            token: this.token\r\n                        }\r\n                    }\r\n                    this.axios.post('api/agregahistProd', {cantidad: this.productos[i].cantidad, codigoBarra: this.productos[i].codBar}, config)\r\n                        .then(res => {\r\n                        if(!res.data.sqlMessage){\r\n                            Swal.fire(\r\n                            'Se ha registrado la entrega de insumos correctamente',\r\n                            'Seleccione Ok para continuar',\r\n                            'success'\r\n                            )\r\n                        }else{\r\n                            Swal.fire({\r\n                            icon: 'error',\r\n                            title: 'Oops...',\r\n                            text: 'No se ha logrado crear ',\r\n                            footer: 'Algún dato ha sido incorrecto verifiquelos'\r\n                            })\r\n                        }\r\n                        })\r\n                        .catch(e => {\r\n                        Swal.fire({\r\n                            icon: 'error',\r\n                            title: 'Oops...',\r\n                            text: 'No se ha logrado registrar la entrega de insumos',\r\n                            footer: 'Posible error del sistema'\r\n                        })\r\n                        })\r\n                }\r\n            }\r\n        },\r\n        //Resta los stock de cada producto\r\n        restarStock(){\r\n            for(var i = 0; i<this.productos.length; i++){\r\n                if(this.productos[i].cantidad > 0){\r\n                    let config = {\r\n                        headers: {\r\n                            token: this.token\r\n                        }\r\n                    }\r\n                    this.axios.put(`api/actualizaStock/${this.productos[i].codBar}`, {cantidad: this.productos[i].cantidad}, config)\r\n                        .then(res => {\r\n                            this.actualizarStock();\r\n                        })\r\n                        .catch(e => {\r\n                            var mensaje = 'Posible error del sistema';\r\n                            Swal.fire({\r\n                            icon: 'error',\r\n                            title: 'Oops...',\r\n                            text: 'No se ha logrado registrar la entrega de insumos',\r\n                            footer: mensaje\r\n                            })\r\n                        })\r\n                }\r\n            }\r\n        },\r\n        //Actualiza la pagina tras generar una entrega de insumos\r\n        actualizarStock(){\r\n            for(var i = 0; i<this.productos.length-1; i++){\r\n                this.cantidadProductos--;\r\n                this.productos.splice(-1);\r\n            }\r\n            this.cargarProductos(true);\r\n        },\r\n        //Permite ver los detalles de un producto y los carga\r\n        detalles(id){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get(`api/obtenerProducto/${id}`, config)\r\n                .then(res => {\r\n                    this.codigo = res.data[0].codigoBarra;\r\n                    this.producto = res.data[0].nomProducto;\r\n                    this.marca = res.data[0].marca;\r\n                    this.descripcion = res.data[0].descripcion\r\n                    for(var i = 0; i<this.imagenes.length; i++){\r\n                        if(this.imagenes[i].split('.')[0] == this.codigo){\r\n                            this.imagenDir = 'http://localhost:3000/dbImagenes/' + this.imagenes[i]\r\n                            break;\r\n                        }else{\r\n                            this.imagenDir = 'http://localhost:3000/dbImagenes/no-imagen.png'\r\n                        }\r\n                    }\r\n                })\r\n                .catch(e => {\r\n                    Swal.fire({\r\n                    icon: 'error',\r\n                    title: 'Oops...',\r\n                    text: 'No se ha logrado encontrar los datos del equipo',\r\n                    footer: 'Posible error del sistema'\r\n                    })\r\n                })\r\n        },\r\n        //Función que obtiene una imagen\r\n        obtenerImagenes(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n             this.axios.get(`api/obtenerImagen`, config)\r\n                .then(res => {\r\n                    this.imagenes = res.data\r\n                })\r\n                .catch(e => {\r\n                    this.alerta('danger', 'Este producto no posee imagen o no ha cargado correctamente')\r\n                })\r\n\r\n        },\r\n        s2ab(s) {\r\n            var buf = new ArrayBuffer(s.length);\r\n            var view = new Uint8Array(buf);\r\n            for (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\r\n            return buf;\r\n        },\r\n        //Función para exportar un MEMO\r\n        renderDoc() {\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            var nMemo = this.memo+1\r\n            var date = new Date()\r\n            var dt = date.getDate() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getFullYear()\r\n            const index = this.dependencias.findIndex(item => item.nomDependencia == this.dependencia);\r\n            this.axios.post('api/obtenerMemo', {productos: this.productos, dependencia: this.dependencia, codDependencia: this.dependencias[index].codDependencia, comuna: this.dependencias[index].comuna, fecha: dt.toString(), referencia: this.referencia, ticket: this.ticket, memo: nMemo}, config)\r\n                .then(res => {\r\n                    var blob = new Blob([this.s2ab(res.data)], {type: ''});\r\n                    let url = window.URL.createObjectURL(blob); // 3. Crea un punto de URL temporal al objeto Blob\r\n                    // 4. Puede simular una gama de operaciones para este objeto de archivo después de crear una URL, por ejemplo: vista previa, descargar\r\n                    let a = document.createElement(\"a\");\r\n                    a.href = url;\r\n                    a.download = \"MEMO\" + nMemo + \".xlsx\";\r\n                    a.click();\r\n                    // 5. Liberar esta URL de objeto temporal\r\n                    window.URL.revokeObjectURL(url);\r\n\r\n                })\r\n                .catch(e => {\r\n                    Swal.fire({\r\n                        icon: 'error',\r\n                        title: 'Oops...',\r\n                        text: 'No se ha logrado registrar la entrega de insumos',\r\n                        footer: 'Posible error del sistema'\r\n                    })\r\n                })\r\n        },\r\n        //Funciones de la alerta\r\n        countDownChanged(dismissCountDown) {\r\n            this.dismissCountDown = dismissCountDown\r\n        },\r\n        showAlert() {\r\n            this.dismissCountDown = this.dismissSecs\r\n        },\r\n        alerta(color, texto){\r\n            this.mensaje.color = color;\r\n            this.mensaje.texto = texto;\r\n            this.showAlert();\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style>\r\n    body{\r\n        background-color: #eee;\r\n    }\r\n\r\n    .texto{\r\n        text-align: center;\r\n    }\r\n\r\n    .imagen{\r\n        width: 50%;\r\n    }\r\n\r\n    .boton{\r\n        margin: 20px;\r\n        width: 90%;\r\n        border-radius: 12px !important;\r\n        border-color: black !important;\r\n    }\r\n    /* Las animaciones de entrada y salida pueden usar */\r\n    /* funciones de espera y duración diferentes.      */\r\n    .slide-fade-enter-active {\r\n    transition: all .3s ease;\r\n    }\r\n    .slide-fade-leave-active {\r\n    transition: all .8s cubic-bezier(1.0, 0.5, 0.8, 1.0);\r\n    }\r\n    .slide-fade-enter, .slide-fade-leave-to\r\n    /* .slide-fade-leave-active below version 2.1.8 */ {\r\n    transform: translateX(10px);\r\n    opacity: 0;\r\n    }\r\n</style>"]}]}