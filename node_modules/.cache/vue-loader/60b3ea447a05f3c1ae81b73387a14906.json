{"remainingRequest":"D:\\inventarioInformatico\\inventario\\inventario\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\inventarioInformatico\\inventario\\inventario\\src\\views\\equipos.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\inventarioInformatico\\inventario\\inventario\\src\\views\\equipos.vue","mtime":1645473178973},{"path":"D:\\inventarioInformatico\\inventario\\inventario\\node_modules\\css-loader\\dist\\cjs.js","mtime":1644510056270},{"path":"D:\\inventarioInformatico\\inventario\\inventario\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1644510072741},{"path":"D:\\inventarioInformatico\\inventario\\inventario\\node_modules\\postcss-loader\\src\\index.js","mtime":1644510064515},{"path":"D:\\inventarioInformatico\\inventario\\inventario\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1644510051457},{"path":"D:\\inventarioInformatico\\inventario\\inventario\\node_modules\\vue-loader\\lib\\index.js","mtime":1644510072741}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubWVudXsKICBwYWRkaW5nOiAzMHB4Owp9Cgpib2R5ewogIGJhY2tncm91bmQtY29sb3I6ICNlZWU7Cn0KCi5ib3RvbnsKICBtYXJnaW46IDIwcHg7CiAgd2lkdGg6IDkwJTsKICBib3JkZXItcmFkaXVzOiAxMnB4OwogIGJvcmRlci1jb2xvcjogYmxhY2s7Cn0K"},{"version":3,"sources":["equipos.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqlCA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"equipos.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"about\">\r\n    <navbar />\r\n    <b-container>\r\n        <div class=\"menu\">\r\n          <h1 v-if=\"pestaña == 'editar'\">Editar Equipo</h1>\r\n          <h1 v-else-if=\"pestaña == 'enviar'\">Asignar Equipo</h1>\r\n          <h1 v-else-if=\"pestaña == 'equiposact'\">Listado de Equipos con Usuario</h1>\r\n          <h1 v-else-if=\"pestaña == 'equiposNoAct'\">Listado de Equipos sin Usuario</h1>\r\n          <h1 v-else-if=\"pestaña == 'equiposBaja'\">Listado de Equipos Dados de Baja</h1>\r\n          <h1 v-else-if=\"pestaña == 'historial'\">Historial del Equipo</h1>\r\n          <h1 v-else-if=\"pestaña == 'word'\">Exportar a Documanto Word</h1>\r\n          <b-alert\r\n            :show=\"dismissCountDown\"\r\n            dismissible\r\n            :variant=\"mensaje.color\"\r\n            @dismissed=\"dismissCountDown=0\"\r\n            @dismiss-count-down=\"countDownChanged\"\r\n          >\r\n            {{mensaje.texto}}\r\n          </b-alert>  \r\n            <br>\r\n            <b-row v-if=\"botones === 'si'\">\r\n              <b-col cols=\"12\" md=\"4\">\r\n                <div class=\"mb-1\">\r\n                  <b-button @click=\"MostrarEquiposAct()\" class=\"btn-success boton\">Equipos con Usuario</b-button>\r\n                </div>\r\n              </b-col>\r\n              <b-col cols=\"12\" md=\"4\">\r\n                <div class=\"mb-1\">\r\n                  <b-button @click=\"EquiposBuenEstado()\" class=\"btn-warning boton\">Equipos sin Usuario</b-button>\r\n                </div>\r\n              </b-col>\r\n              <b-col cols=\"12\" md=\"4\">\r\n                <div class=\"mb-1\">\r\n                  <b-button @click=\"EquiposMalEstado()\" class=\"btn-danger boton\">Equipos dados de Baja</b-button>\r\n                </div>\r\n              </b-col>\r\n            </b-row>\r\n            <!-- Tabla de equipos con dueños que estan en buen estado -->\r\n            <table class=\"table table-striped table-dark table-responsive-lg table-responsive-md\" id=\"tablaConDueño\" v-if=\"pestaña === 'equiposact'\">\r\n              <thead>\r\n                <tr>\r\n                  <th scope=\"col\">Id</th>\r\n                  <th scope=\"col\">Tipo</th>\r\n                  <th scope=\"col\">N° Serie</th>\r\n                  <th scope=\"col\">Codigo</th>\r\n                  <th scope=\"col\">Estado</th>\r\n                  <th scope=\"col\">Jardin</th>\r\n                  <th scope=\"col\">Usuario</th>\r\n                  <th scope=\"col\">Zona</th>\r\n                  <th scope=\"col\">Fecha Asignación</th>\r\n                  <th scope=\"col\">Mostrar Equipo</th>\r\n                  <th scope=\"col\">Historial</th>\r\n                  <th scope=\"col\" v-if=\"activo\">Quitar Equipo</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"i in equiposAct\" :key=\"i.codHistorial\">\r\n                  <td scope=\"row\">{{i.codHistorial}}</td>\r\n                  <td>{{i.tipoEquipo}}</td>\r\n                  <td>{{i.serie}}</td>\r\n                  <td>{{i.codEquipo}}</td>\r\n                  <td>{{i.estado}}</td>\r\n                  <td>{{i.nomJardin}}</td>\r\n                  <td>{{i.nombre}}</td>\r\n                  <td>{{i.zona}}</td>\r\n                  <td>{{i.fechaInicio}}</td>\r\n                  <td>\r\n                    <b-button @click=\"Acteditar(i.codHistorial, true)\" class=\"btn-warning btn-sm\" style=\"border-color: white;\">Mostrar Mas</b-button>\r\n                  </td>\r\n                  <td>\r\n                    <b-button @click=\"ActHistorial(i.codHistorial, true)\" class=\"btn-sm\" style=\"border-color: white;\">Historial</b-button>\r\n                  </td>\r\n                  <td v-if=\"activo\">\r\n                    <b-button @click=\"quitar(i.codHistorial, i.estado)\" class=\"btn-danger btn-sm\" style=\"border-color: white;\">Quitar</b-button>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <br v-if=\"pestaña === 'equiposact'\"><div class=\"mb-1\">\r\n              <b-button @click=\"exportar(1)\" v-if=\"pestaña === 'equiposact'\" class=\"btn-success boton\">Exportar</b-button>\r\n            </div>\r\n            <!-- Tabla de equipos sin dueños que estan en buen estado -->\r\n            <table class=\"table table-striped table-dark table-responsive-lg table-responsive-md\" id=\"tablaSinDueño\" v-if=\"pestaña === 'equiposNoAct'\">\r\n              <thead>\r\n                <tr>\r\n                  <th scope=\"col\">Equipo</th>\r\n                  <th scope=\"col\">Tipo</th>\r\n                  <th scope=\"col\">N° Serie</th>\r\n                  <th scope=\"col\">Codigo</th>\r\n                  <th scope=\"col\">Marca</th>\r\n                  <th scope=\"col\">Modelo</th>\r\n                  <th scope=\"col\">Enviar Equipo</th>\r\n                  <th scope=\"col\">Historial</th>\r\n                  <th scope=\"col\">Mostrar Equipo</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"i in equiposBuenEstado\" :key=\"i.corrEquipo\">\r\n                  <td scope=\"row\">{{i.corrEquipo}}</td>\r\n                  <td>{{i.tipoEquipo}}</td>\r\n                  <td>{{i.serie}}</td>\r\n                  <td>{{i.codEquipo}}</td>\r\n                  <td>{{i.nomMarca}}</td>\r\n                  <td>{{i.modelo}}</td>\r\n                  <td>\r\n                    <b-button @click=\"Enviar(i.corrEquipo)\" class=\"btn-success btn-sm\" style=\"border-color: white;\">Asignar Equipo</b-button>\r\n                  </td>\r\n                  <td>\r\n                    <b-button @click=\"ActHistorial(i.corrEquipo, false)\" class=\"btn-sm\" style=\"border-color: white;\">Historial</b-button>\r\n                  </td>\r\n                  <td>\r\n                    <b-button @click=\"Acteditar(i.corrEquipo, false)\" class=\"btn-warning btn-sm\" style=\"border-color: white;\">Mostrar Mas</b-button>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <br v-if=\"pestaña === 'equiposNoAct'\"><div class=\"mb-1\">\r\n              <b-button @click=\"exportar(2)\" v-if=\"pestaña === 'equiposNoAct'\" class=\"btn-success boton\">Exportar</b-button>\r\n            </div>\r\n            <!-- Tabla de equipos sin dueños que estan en MAL estado -->\r\n            <table class=\"table table-striped table-dark table-responsive-lg table-responsive-md\" id=\"tablaBajas\" v-if=\"pestaña === 'equiposBaja'\">\r\n              <thead>\r\n                <tr>\r\n                  <th scope=\"col\">Equipo</th>\r\n                  <th scope=\"col\">Tipo</th>\r\n                  <th scope=\"col\">N° Serie</th>\r\n                  <th scope=\"col\">Codigo</th>\r\n                  <th scope=\"col\">Marca</th>\r\n                  <th scope=\"col\">Modelo</th>\r\n                  <th scope=\"col\">Mostrar Equipo</th>\r\n                  <th scope=\"col\">Historial</th>\r\n                  <th scope=\"col\">Exportar</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"i in equiposMalEstado\" :key=\"i.corrEquipo\">\r\n                  <td scope=\"row\">{{i.corrEquipo}}</td>\r\n                  <td>{{i.tipoEquipo}}</td>\r\n                  <td>{{i.serie}}</td>\r\n                  <td>{{i.codEquipo}}</td>\r\n                  <td>{{i.nomMarca}}</td>\r\n                  <td>{{i.modelo}}</td>\r\n                  <td>\r\n                    <b-button @click=\"Acteditar(i.corrEquipo, false)\" class=\"btn-warning btn-sm\" style=\"border-color: white;\">Mostrar Mas</b-button>\r\n                  </td>\r\n                  <td>\r\n                    <b-button @click=\"ActHistorial(i.corrEquipo, false)\" class=\"btn-sm\" style=\"border-color: white;\">Historial</b-button>\r\n                  </td>\r\n                  <td>\r\n                    <b-button @click=\"Export2Doc('exportContent', 'Informe' + i.codEquipo)\" class=\"btn-success btn-sm\" style=\"border-color: white;\">Exportar</b-button>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <br v-if=\"pestaña === 'equiposBaja'\"><div class=\"mb-1\">\r\n              <b-button @click=\"exportar(3)\" v-if=\"pestaña === 'equiposBaja'\" class=\"btn-success boton\">Exportar</b-button>\r\n            </div>\r\n            <!-- Editar un Equipo -->\r\n              <div class=\"card\" v-if=\"pestaña === 'editar'\" style=\"border-color: black;\">\r\n                <div class=\"card-body\">\r\n                 <b-row>\r\n                  <b-col cols=\"12\" md=\"4\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">Codigo equipo</label>\r\n                      <input type=\"text\" class=\"form-control\" id=\"codEquipoEdita\" aria-describedby=\"emailHelp\" v-model=\"$v.codigo.$model\">\r\n                      <p class=\"text-danger\" v-if=\"$v.codigo.$error\">Es necesario ingresar un codigo</p>\r\n                    </div>\r\n                  </b-col>\r\n                  <b-col cols=\"12\" md=\"4\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">Modelo equipo</label>\r\n                      <input type=\"text\" class=\"form-control\" id=\"modeloEdita\" aria-describedby=\"emailHelp\" v-model=\"$v.modelo.$model\">\r\n                      <p class=\"text-danger\" v-if=\"$v.modelo.$error\">Es necesario ingresar un modelo</p>\r\n                    </div>\r\n                  </b-col>\r\n                  <b-col cols=\"12\" md=\"4\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">Tipo de equipo</label> \r\n                      <label @click=\"CambioTipo()\" for=\"exampleInputEmail1\" v-if=\"tipoMostrar === 'si'\" style=\"color: #35ACF1;\" class=\"form-label\">&nbsp; (Crear Nuevo Tipo?)</label>\r\n                      <label @click=\"CambioTipo()\" for=\"exampleInputEmail1\" v-if=\"tipoMostrar === 'no'\" style=\"color: #35ACF1;\" class=\"form-label\">&nbsp; (Revisar ya existentes)</label>\r\n                      <select class=\"form-control\" v-model=\"$v.tipo.$model\" v-if=\"tipoMostrar === 'si'\">\r\n                        <option v-for=\"i in tipos\" :key=\"i.tipoEquipo\">{{i.tipoEquipo}}</option>\r\n                      </select>\r\n                      <input type=\"text\" class=\"form-control\" id=\"tiponewEdita\" aria-describedby=\"emailHelp\" v-if=\"tipoMostrar === 'no'\" v-model=\"$v.tipoNew.$model\">\r\n                      <div v-if=\"tipoMostrar === 'no'\">\r\n                        <p class=\"text-danger\" v-if=\"$v.tipoNew.$error\">Es necesario ingresar el nombre del tipo</p>\r\n                      </div>\r\n                    </div>\r\n                  </b-col>\r\n                </b-row>\r\n                <b-row>\r\n                  <b-col cols=\"12\" md=\"6\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">N° Serie Equipo</label>\r\n                      <input type=\"text\" class=\"form-control\" id=\"serieEdita\" aria-describedby=\"emailHelp\" v-model=\"$v.serie.$model\">\r\n                      <p class=\"text-danger\" v-if=\"$v.serie.$error\">Es necesario ingresar un número de serie</p>\r\n                    </div>\r\n                  </b-col>\r\n                  <b-col cols=\"12\" md=\"6\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">Marca equipo</label>\r\n                      <label @click=\"CambioTipo()\" for=\"exampleInputEmail1\" v-if=\"tipoMostrar === 'si'\" style=\"color: #35ACF1;\" class=\"form-label\">&nbsp; (Crear Nueva Marca?)</label>\r\n                      <label @click=\"CambioTipo()\" for=\"exampleInputEmail1\" v-if=\"tipoMostrar === 'no'\" style=\"color: #35ACF1;\" class=\"form-label\">&nbsp; (Revisar ya existentes)</label>\r\n                      <select class=\"form-control\" v-model=\"$v.marca.$model\"  v-if=\"tipoMostrar === 'si'\">\r\n                        <option v-for=\"i in marcas\" :key=\"i.nomMarca\">{{i.nomMarca}}</option>\r\n                      </select>\r\n                      <input type=\"text\" class=\"form-control\" id=\"marcanewEdita\" aria-describedby=\"emailHelp\" v-if=\"tipoMostrar === 'no'\" v-model=\"$v.marcaNew.$model\">\r\n                      <div v-if=\"tipoMostrar === 'no'\">\r\n                        <p class=\"text-danger\" v-if=\"$v.marcaNew.$error\" >Es necesario ingresar el nombre de la marca</p>\r\n                      </div>\r\n                    </div>\r\n                  </b-col>\r\n                </b-row>\r\n                <b-row>\r\n                  <b-col cols=\"12\" md=\"6\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">Estado de Equipo</label>\r\n                      <select class=\"form-control\" v-model=\"$v.estado.$model\">\r\n                        <option disabled value=\"\">Seleccione un estado posible</option>\r\n                        <option>Bueno</option>\r\n                        <option>Regular</option>\r\n                        <option>Malo</option>\r\n                        <option>Baja</option>\r\n                      </select>\r\n                      <p class=\"text-danger\" v-if=\"$v.estado.$error\">Es necesario indicar el estado del equipo</p>\r\n                    </div>\r\n                  </b-col>\r\n                  <b-col cols=\"12\" md=\"6\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">Condicion Equipo</label>\r\n                      <textarea type=\"text\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" v-model=\"$v.condicion.$model\"></textarea>\r\n                    </div>\r\n                  </b-col>\r\n                </b-row>\r\n                <b-row v-if=\"tipoMostrar === 'si'\">\r\n                  <b-col cols=\"12\" md=\"6\">\r\n                    <div class=\"mb-3\">\r\n                      <b-button @click=\"EditarEquipo()\" class=\"btn-success botonmostrar boton\">Editar Equipo</b-button>\r\n                    </div>\r\n                  </b-col>  \r\n                  <b-col cols=\"12\" md=\"6\">\r\n                    <div class=\"mb-3\">\r\n                      <b-button @click=\"Volver()\" class=\"botonmostrar boton\">Volver</b-button>\r\n                    </div>\r\n                  </b-col>  \r\n                </b-row>\r\n                <b-row v-if=\"tipoMostrar === 'no'\">\r\n                  <b-col cols=\"12\" md=\"4\">\r\n                    <div class=\"mb-3\">\r\n                      <b-button @click=\"agregaTipo()\" class=\"btn-success botonmostrar boton\">Agregar Tipo</b-button>\r\n                    </div>\r\n                  </b-col>\r\n                  <b-col cols=\"12\" md=\"4\">\r\n                    <div class=\"mb-3\">\r\n                      <b-button @click=\"agregaMarca()\" class=\"btn-success botonmostrar boton\">Agregar Marca</b-button>\r\n                    </div>\r\n                  </b-col>\r\n                  <b-col cols=\"12\" md=\"4\">\r\n                    <div class=\"mb-3\">\r\n                      <b-button @click=\"Volver()\" class=\"botonmostrar boton\">Volver</b-button>\r\n                    </div>\r\n                  </b-col>  \r\n                </b-row>\r\n              </div>\r\n            </div>\r\n            <!-- Enviar un Equipo -->\r\n            <div class=\"card\" v-if=\"pestaña === 'enviar'\" style=\"border-color: black;\">\r\n                <div class=\"card-body\">\r\n                 <b-row>\r\n                  <b-col cols=\"12\" md=\"2\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">Numero del equipo</label>\r\n                      <input disabled type=\"text\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" v-model=\"$v.numero.$model\">\r\n                    </div>\r\n                  </b-col>\r\n                  <b-col cols=\"12\" md=\"2\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">Zona del equipo</label>\r\n                      <input type=\"text\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" v-model=\"$v.zona.$model\">\r\n                    </div>\r\n                  </b-col>\r\n                  <b-col cols=\"12\" md=\"4\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">Nombre del Jardin</label>\r\n                      <select class=\"form-control\" v-model=\"$v.nombre.$model\" id=\"nomJardin\">\r\n                        <option v-for=\"i in nombres\" :key=\"i.nomJardin\" :value=\"i.nomJardin\">{{i.nomJardin}}</option>\r\n                      </select>\r\n                    </div>\r\n                  </b-col>\r\n                  <b-col cols=\"12\" md=\"4\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">Dueño del equipo</label>\r\n                      <select class=\"form-control\" v-model=\"$v.dueño.$model\">\r\n                        <option v-for=\"i in dueños\" :key=\"i.nombre\" :value=\"i.nombre\">{{i.nombre}}</option>\r\n                      </select>\r\n                    </div>\r\n                  </b-col>\r\n                </b-row>\r\n                <b-row>\r\n                  <b-col cols=\"12\" md=\"6\">\r\n                    <div class=\"mb-3\">\r\n                      <b-button @click=\"Volver()\" href=\"#\" class=\"botonmostrar boton\">Volver al listado</b-button>\r\n                    </div>\r\n                  </b-col>  \r\n                  <b-col cols=\"12\" md=\"6\">\r\n                    <div class=\"mb-3\">\r\n                      <b-button @click=\"EnviarEquipo()\" class=\"btn-success botonmostrar boton\">Enviar Equipo</b-button>\r\n                    </div>\r\n                  </b-col>  \r\n                </b-row>\r\n              </div>\r\n            </div>\r\n            <!-- Historial de un Equipo -->\r\n            <div class=\"row\">\r\n              <b-button @click=\"Volver()\" class=\"botonAgregar\" v-if=\"pestaña === 'historial'\" style=\"border-color: black;\">Volver al listado de Equipos</b-button>\r\n            </div>  <br v-if=\"pestaña === 'historial'\">\r\n            <div class=\"row\">\r\n                <table class=\"table table-striped table-dark table-responsive-lg table-responsive-md\" id=\"historialEquipo\" v-if=\"pestaña === 'historial'\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th scope=\"col\">Id</th>\r\n                      <th scope=\"col\">Codigo Equipo</th>\r\n                      <th scope=\"col\">Zona</th>\r\n                      <th scope=\"col\">Jardin</th>\r\n                      <th scope=\"col\">Usuario</th>\r\n                      <th scope=\"col\">Desde</th>\r\n                      <th scope=\"col\">Hasta</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"i in historial\" :key=\"i.codHistorial\">\r\n                      <td scope=\"row\">{{i.codHistorial}}</td>\r\n                      <td>{{i.codEquipo}}</td>\r\n                      <td>{{i.zona}}</td>\r\n                      <td>{{i.nomJardin}}</td>\r\n                      <td>{{i.nombre}}</td>\r\n                      <td>{{i.fechaInicio}}</td>\r\n                      <td>{{i.fecha}}</td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n                <br><div class=\"mb-1\">\r\n                  <b-button @click=\"exportar(4)\" v-if=\"pestaña === 'historial'\" class=\"btn-success boton\">Exportar</b-button>\r\n                </div>\r\n            </div>\r\n            <!-- Vista de Exportación -->\r\n            <div class=\"card\" style=\"border-color: black;\" v-if=\"pestaña === 'word'\">\r\n                <div class=\"card-body\">\r\n                 <b-row>\r\n                  <b-col cols=\"12\" md=\"6\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">Tipo del equipo</label>\r\n                      <input type=\"text\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" v-model=\"$v.tipoExportar.$model\">\r\n                      <p class=\"text-danger\" v-if=\"$v.tipoExportar.$error\" >Es necesario ingresar el tipo del equipo</p>\r\n                    </div>\r\n                  </b-col>\r\n                  <b-col cols=\"12\" md=\"6\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">Clasificación</label>\r\n                      <input type=\"text\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" v-model=\"$v.clasificacionExportar.$model\">\r\n                      <p class=\"text-danger\" v-if=\"$v.clasificacionExportar.$error\" >Es necesario ingresar la clasificación del equipo</p>\r\n                    </div>\r\n                  </b-col>\r\n                 </b-row>\r\n                 <b-row>\r\n                  <b-col cols=\"12\" md=\"6\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">Ubicación del Equipo</label>\r\n                      <input type=\"text\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" v-model=\"$v.ubicacionExportar.$model\">\r\n                      <p class=\"text-danger\" v-if=\"$v.ubicacionExportar.$error\" >Es necesario ingresar la ubicación del equipo</p>\r\n                    </div>\r\n                  </b-col>\r\n                  <b-col cols=\"12\" md=\"6\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">Encargado del Informe</label>\r\n                      <input type=\"text\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" v-model=\"$v.duenoExportar.$model\">\r\n                      <p class=\"text-danger\" v-if=\"$v.duenoExportar.$error\" >Es necesario ingresar al usuario del equipo</p>\r\n                    </div>\r\n                  </b-col>\r\n                </b-row>\r\n                <b-row>\r\n                  <b-col cols=\"12\" md=\"12\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">Introducción</label>\r\n                      <textarea type=\"text\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" v-model=\"$v.Introduccion.$model\"></textarea>\r\n                      <p class=\"text-danger\" v-if=\"$v.Introduccion.$error\" >Es necesario ingresar una introduccion de mínimo 500 caracteres</p>\r\n                    </div>\r\n                  </b-col>\r\n                </b-row>\r\n                <b-row>\r\n                  <b-col cols=\"12\" md=\"12\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">Objetivo</label>\r\n                      <textarea type=\"text\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" v-model=\"$v.objetivo.$model\"></textarea>\r\n                      <p class=\"text-danger\" v-if=\"$v.objetivo.$error\" >Es necesario ingresar una introduccion de mínimo 500 caracteres</p>\r\n                    </div>\r\n                  </b-col>\r\n                </b-row>\r\n                <b-row>\r\n                  <b-col cols=\"12\" md=\"12\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">Deficiencias generales observadas</label>\r\n                      <textarea type=\"text\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" v-model=\"$v.deficiencias.$model\"></textarea>\r\n                      <p class=\"text-danger\" v-if=\"$v.deficiencias.$error\" >Es necesario ingresar una introduccion de mínimo 500 caracteres</p>\r\n                    </div>\r\n                  </b-col>\r\n                </b-row>\r\n                <b-row>\r\n                  <b-col cols=\"12\" md=\"6\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">Usuario del Equipo</label>\r\n                      <input type=\"text\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" v-model=\"$v.Usuario.$model\">\r\n                      <p class=\"text-danger\" v-if=\"$v.Usuario.$error\" >Es necesario ingresar una introduccion de mínimo 500 caracteres</p>\r\n                    </div>\r\n                  </b-col>\r\n                  <b-col cols=\"12\" md=\"6\">\r\n                    <div class=\"mb-3\">\r\n                      <label for=\"exampleInputEmail1\" class=\"form-label\">Dirección del Usuario</label>\r\n                      <input type=\"text\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" v-model=\"$v.Direccion.$model\">\r\n                      <p class=\"text-danger\" v-if=\"$v.Direccion.$error\" >Es necesario ingresar una introduccion de mínimo 500 caracteres</p>\r\n                    </div>\r\n                  </b-col>\r\n                </b-row>\r\n                <b-row>\r\n                  <b-col cols=\"12\" md=\"6\">\r\n                    <div class=\"mb-3\">\r\n                      <b-button @click=\"Volver()\" href=\"#\" class=\"botonmostrar boton\">Volver al listado</b-button>\r\n                    </div>\r\n                  </b-col>  \r\n                  <b-col cols=\"12\" md=\"6\">\r\n                    <div class=\"mb-3\">\r\n                      <b-button @click=\"Exportar()\" class=\"btn-success botonmostrar boton\">Generar Informe</b-button>\r\n                    </div>\r\n                  </b-col>  \r\n                </b-row>\r\n              </div>\r\n            </div>\r\n        </div>\r\n    </b-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport navbar from \"../components/navbar.vue\";\r\n\r\nimport { required, minLength} from \"vuelidate/lib/validators\";\r\nimport 'jquery/dist/jquery.min.js';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport \"datatables.net-dt/js/dataTables.dataTables\";\r\nimport \"datatables.net-dt/css/jquery.dataTables.min.css\";\r\nimport $ from 'jquery'; \r\n\r\nimport * as XLSX from 'xlsx/xlsx.mjs';\r\n\r\n/* load 'fs' for readFile and writeFile support */\r\nimport * as fs from 'fs';\r\nXLSX.set_fs(fs);\r\n\r\n/* load the codepage support library for extended support with older formats  */\r\nimport * as cpexcel from 'xlsx/dist/cpexcel.full.mjs';\r\nXLSX.set_cptable(cpexcel);\r\n\r\nimport { mapState } from 'vuex'\r\n\r\nexport default {\r\n  name: \"about\",\r\n  components: {\r\n    navbar,\r\n  },\r\n  data() {\r\n      return {\r\n        //Listas utilizadas para el manejo de tablas\r\n        equiposAct: [],\r\n        corrEquipos: [],\r\n        equiposBuenEstado: [],\r\n        equiposMalEstado: [],\r\n        historial: [],\r\n        //Pestaña que indica la vista actual\r\n        pestaña: 'equiposact',\r\n        tipoMostrar: 'si',\r\n        botones: 'si',\r\n        selected: '',\r\n        //Datos de editar\r\n        corr: '',\r\n        codigo: '',\r\n        modelo: '',\r\n        tipo: '',\r\n        tipos: [],\r\n        tipoNew: '',\r\n        serie: '',\r\n        marca: '',\r\n        marcaNew: '',\r\n        marcas: [],\r\n        estado: '',\r\n        condicion: '',\r\n        numero: '',\r\n        zona: '',\r\n        nombre: '',\r\n        //Arreglo para añadir los datos a los select\r\n        nombres: [],\r\n        dueño: '',\r\n        dueños: [],\r\n        //Variables de las alertas\r\n        dismissSecs: 5,\r\n        dismissCountDown: 0,\r\n        mensaje: {color: '', texto: ''},\r\n        activo: true,\r\n        //VARIABLES DE EXPORTACION\r\n        tipoExportar: '',\r\n        clasificacionExportar: '',\r\n        ubicacionExportar: '',\r\n        duenoExportar: '',\r\n        Introduccion: '',\r\n        objetivo: '',\r\n        deficiencias: '',\r\n        Usuario: '',\r\n        Direccion: ''\r\n      }\r\n    },\r\n    validations:{\r\n      //Validaciones de los input\r\n      codigo:{required},\r\n      modelo:{required},\r\n      tipo:{required},\r\n      tipoNew:{required},\r\n      serie:{required},\r\n      marca:{required},\r\n      marcaNew:{required},\r\n      estado:{required},\r\n      condicion:{required},\r\n      numero:{required},\r\n      zona:{required},\r\n      nombre:{required},\r\n      dueño:{required},\r\n      tipoExportar: {required},\r\n      clasificacionExportar: {required},\r\n      ubicacionExportar: {required},\r\n      duenoExportar: {required},\r\n      Introduccion: {required, minLength: minLength(500)},\r\n      objetivo: {required, minLength: minLength(500)},\r\n      deficiencias: {required, minLength: minLength(500)},\r\n      Usuario: {required},\r\n      Direccion: {required},\r\n    },\r\n    computed: {\r\n      ...mapState(['token', 'usuarioDB'])\r\n    },\r\n    created(){\r\n      //Iniciamos las funciones que se encargan de cargar los datos apenas se inicie la ruta\r\n      this.listarEquiposAct();\r\n      this.nombresJardin();\r\n      this.listarDueños();\r\n      this.obtenerTipos();\r\n      this.obtenerMarcas();\r\n      this.verificar();\r\n    },\r\n    methods: {\r\n      exportar(num) {\r\n        let data = [];\r\n        var filename = \"planilla\";\r\n        if(num === 1){\r\n          var arreglado = this.equiposAct.map( item => { \r\n            return { ID: item.codHistorial , Tipo : item.tipoEquipo, Serie : item.serie, Estado : item.estado, CodigoEquipo : item.codEquipo,  Dependencia : item.nomJardin, CodigoDependencia : item.codJardin, Usuario : item.nombre, Zona : item.zona}; \r\n          });\r\n          data = XLSX.utils.json_to_sheet(arreglado);\r\n          filename = 'Equipos con Usuario'\r\n        }else if(num === 2){\r\n          var arreglado = this.equiposBuenEstado.map( item => { \r\n            return { ID: item.corrEquipo , Tipo : item.tipoEquipo, Serie : item.serie, CodigoEquipo : item.codEquipo,  Marca : item.nomMarca, Modelo : item.modelo}; \r\n          });\r\n          data = XLSX.utils.json_to_sheet(arreglado);\r\n          filename = 'Equipos sin Usuario'\r\n        }else if(num === 3){\r\n          var arreglado = this.equiposMalEstado.map( item => { \r\n            return { ID: item.corrEquipo , Tipo : item.tipoEquipo, Serie : item.serie, CodigoEquipo : item.codEquipo,  Marca : item.nomMarca, Modelo : item.modelo}; \r\n          });\r\n          data = XLSX.utils.json_to_sheet(arreglado);\r\n          filename = 'Equipos dados de Baja'\r\n        }else if(num === 4){\r\n          var arreglado = this.historial.map( item => { \r\n            return { ID: item.codHistorial , Codigo : item.codEquipo, Zona : item.zona, Dependencia : item.nomJardin,  Usuario : item.nombre, Desde : item.fechaInicio, Hasta : item.fecha}; \r\n          });\r\n          data = XLSX.utils.json_to_sheet(arreglado);\r\n          if(arreglado[0]){\r\n            filename = 'Historial Equipo ' + arreglado[0].Codigo\r\n          }else{\r\n            filename = 'Historial Equipo'\r\n          }\r\n        }\r\n        const workbook = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(workbook, data, filename);\r\n        XLSX.writeFile(workbook, `${filename}.xlsx`);\r\n      },\r\n      alerta(color, texto){\r\n        this.mensaje.color = color;\r\n        this.mensaje.texto = texto;\r\n        this.showAlert();\r\n      },\r\n      verificar(){\r\n        if(this.usuarioDB.data[0].tipoUsuario == 0){\r\n          this.activo = false;\r\n        }\r\n      },\r\n      //Activamos la vista de editar\r\n      Acteditar(id, activo){\r\n        this.pestaña = 'editar'\r\n        this.botones = 'no'\r\n        $('#tablaSinDueño').DataTable().destroy();\r\n        $('#tablaBajas').DataTable().destroy();\r\n        $('#tablaConDueño').DataTable().destroy();\r\n        //Obtenemos el correlativo del equipo, si estamos en la vista de Equipos con dueño (activo=true) tendremos que buscarlo en el arreglo paralelo por la posición\r\n        if(activo){\r\n          const index = this.equiposAct.findIndex(item => item.codHistorial == id);\r\n          var corrEqp = this.corrEquipos[index]\r\n        }else{\r\n          var corrEqp = id;\r\n        }\r\n        //Llamamos a la función que nos permite cargar los datos del equipo a editar\r\n        this.obtenerEqpEditar(corrEqp)\r\n      },\r\n      //Activamos la vista de historial\r\n      ActHistorial(id, activo){\r\n        this.pestaña = 'historial'\r\n        this.botones = 'no'\r\n        $('#tablaSinDueño').DataTable().destroy();\r\n        $('#tablaBajas').DataTable().destroy();\r\n        $('#tablaConDueño').DataTable().destroy();\r\n        $(\"#historialEquipo\").DataTable()\r\n        //Obtenemos el correlativo del equipo, si estamos en la vista de Equipos con dueño (activo=true) tendremos que buscarlo en el arreglo paralelo por la posición\r\n        if(activo){\r\n          const index = this.equiposAct.findIndex(item => item.codHistorial == id);\r\n          this.corr = this.corrEquipos[index]\r\n        }else{\r\n          this.corr = id;\r\n        }\r\n        //Llamamos a la función que nos permite cargar los datos del equipo a editar\r\n        this.obtHistorial()\r\n      },\r\n\r\n      //Función que permite cargar el historial de un equipo\r\n      obtHistorial(){\r\n        let config = {\r\n          headers: {\r\n            token: this.token\r\n          }\r\n        }\r\n        this.axios.get(`api/HistEquipo/${this.corr}`, config)\r\n          .then(res => {\r\n            this.historial = res.data;\r\n          })\r\n          .catch(e => {\r\n            this.alerta('danger', 'No se ha podido cargar el historial');\r\n        })\r\n      },\r\n      //Función que obtiene todos los tipos\r\n      obtenerTipos(){\r\n        let config = {\r\n          headers: {\r\n            token: this.token\r\n          }\r\n        }\r\n        this.axios.get('api/tipos', config)\r\n          .then(res => {\r\n            this.tipos = res.data;\r\n          })\r\n          .catch(e => {\r\n            this.alerta('danger', 'No se han podido cargar los tipos');\r\n        })\r\n      },\r\n      //Función que obtiene todos las marcas\r\n      obtenerMarcas(){\r\n        let config = {\r\n          headers: {\r\n            token: this.token\r\n          }\r\n        }\r\n        this.axios.get('api/marcas', config)\r\n          .then(res => {\r\n            this.marcas = res.data;\r\n          })\r\n          .catch(e => {\r\n            this.alerta('danger', 'No se han podido cargar las marcas');\r\n        })\r\n      },\r\n      //Funcion que obtiene los datos del equipo a editar\r\n      obtenerEqpEditar(id){\r\n        let config = {\r\n          headers: {\r\n            token: this.token\r\n          }\r\n        }\r\n        this.axios.get(`api/datosEqp/${id}`, config)\r\n          .then(res => {\r\n            this.corr = res.data[0].corrEquipo;\r\n            this.codigo = res.data[0].codEquipo;\r\n            this.modelo = res.data[0].modelo;\r\n            this.tipo = res.data[0].tipoEquipo;\r\n            this.serie = res.data[0].serie;\r\n            this.marca = res.data[0].nomMarca;\r\n            this.estado = res.data[0].estado;\r\n            this.condicion = res.data[0].condicion;\r\n          })\r\n          .catch(e => {\r\n            Swal.fire({\r\n              icon: 'error',\r\n              title: 'Oops...',\r\n              text: 'No se ha podido ingresar a los datos de este equipo',\r\n              footer: 'Posible error del sistema'\r\n            })\r\n            this.botones = 'si';\r\n            this.pestaña = 'equiposact';\r\n          })\r\n      },\r\n      convertDateMysql(yourDate){\r\n        yourDate.toISOString().split('T')[0]\r\n        const offset = yourDate.getTimezoneOffset()\r\n        yourDate = new Date(yourDate.getTime() - (offset*60*1000))\r\n        return yourDate.toISOString().split('T')[0]\r\n\t\t  },\r\n      //Funcion que quita un equipo a un funcionario\r\n      quitar(id, estado){ \r\n        var dt = this.convertDateMysql(new Date())\r\n        swal.fire({\r\n            title: '¿Seguro que desea quitar el equipo?',\r\n            type: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            cancelButtonText: 'Cancelar',\r\n            confirmButtonText: '¡Si!'\r\n        }).then((result) => {\r\n          if (result.value) {\r\n            let config = {\r\n              headers: {\r\n                token: this.token\r\n              }\r\n            }\r\n            this.axios.put(`api/actualizaHistorial/${id}`, {fecha: dt}, config)\r\n              .then(res => {\r\n                const index = this.equiposAct.findIndex(item => item.codHistorial == res.data);\r\n                this.equiposAct.splice(index, 1)\r\n                this.corrEquipos.splice(index, 1)\r\n                Swal.fire(\r\n                  'Se ha quitado un equipo al funcionario!',\r\n                  'Seleccione Ok para continuar',\r\n                  'success'\r\n                )\r\n              })\r\n              .catch(e => {\r\n                var mensaje = 'Posible error del sistema';\r\n                if(e.response.data.mensaje){\r\n                  mensaje = e.response.data.mensaje;\r\n                }\r\n                Swal.fire({\r\n                  icon: 'error',\r\n                  title: 'Oops...',\r\n                  text: 'No se ha podido quitar el equipo a su funcionario',\r\n                  footer: mensaje\r\n                })\r\n              })\r\n          }\r\n        });\r\n      },\r\n      //Muestra la vista de los equipos con un dueño actual\r\n      MostrarEquiposAct(){\r\n        $('#tablaSinDueño').DataTable().destroy();\r\n        $('#tablaBajas').DataTable().destroy();\r\n        $('#tablaConDueño').DataTable();\r\n        this.pestaña = 'equiposact'\r\n        this.listarEquiposAct();\r\n      },\r\n      //Ingresa los datos al arreglo que utilizara la tabla de Equipo con dueños\r\n      listarEquiposAct(){\r\n        let config = {\r\n          headers: {\r\n            token: this.token\r\n          }\r\n        }\r\n        this.axios.get('api/equiposConDueno', config)\r\n          .then(res => {\r\n            this.equiposAct = res.data;\r\n            this.llenarCorrelativos();\r\n          })\r\n          .catch(e => {\r\n            this.alerta('danger', 'No se han podido cargar los equipos con Dueño');\r\n          })\r\n      },\r\n      //Llena el arreglo paralelo de correlativos de Equipos con dueño\r\n      llenarCorrelativos(){\r\n        for(var i = 0; i<this.equiposAct.length; i++){\r\n          this.corrEquipos.push(this.equiposAct[i].corrEquipo)\r\n        }\r\n      },\r\n      //Define la vista de Equipos sin un dueño actual\r\n      EquiposBuenEstado(){\r\n        $('#tablaConDueño').DataTable().destroy();\r\n        $('#tablaBajas').DataTable().destroy();\r\n        $('#tablaSinDueño').DataTable();\r\n        this.pestaña = 'equiposNoAct'\r\n        this.listarEquiposBuenEstado();\r\n      },\r\n      //Ingresa los datos al arreglo que utilizara la tabla de Equipo sin dueños\r\n      listarEquiposBuenEstado(){\r\n        let config = {\r\n          headers: {\r\n            token: this.token\r\n          }\r\n        }\r\n         this.axios.get('api/equiposSinDueno', config)\r\n          .then(res => {\r\n            this.equiposBuenEstado = res.data;\r\n          })\r\n          .catch(e => {\r\n            this.alerta('danger', 'No se han podido cargar los equipos sin Dueño');\r\n          })\r\n      },\r\n      //Define la vista de Equipos dados de baja\r\n      EquiposMalEstado(){\r\n        $('#tablaConDueño').DataTable().destroy();\r\n        $('#tablaSinDueño').DataTable().destroy();\r\n        $('#tablaBajas').DataTable()\r\n        this.pestaña = 'equiposBaja'\r\n        this.listarEquiposMalEstado();\r\n      },\r\n      //Ingresa los datos al arreglo que utilizara la tabla de Equipo dados de baja\r\n      listarEquiposMalEstado(){\r\n        let config = {\r\n          headers: {\r\n            token: this.token\r\n          }\r\n        }\r\n        this.axios.get('api/equiposBaja', config)\r\n          .then(res => {\r\n            this.equiposMalEstado = res.data;\r\n          })\r\n          .catch(e => {\r\n            this.alerta('danger', 'No se han podido cargar los equipos dados de baja');\r\n        })\r\n      },\r\n      //Función que agrega un nuevo Tipo y retorna true o false\r\n      agregaTipo(){\r\n        let config = {\r\n          headers: {\r\n            token: this.token\r\n          }\r\n        }\r\n        this.$v.$touch()\r\n        if(!this.$v.tipoNew.$invalid){\r\n          this.axios.post('api/agregaTipo', {tipoEquipo: this.tipoNew}, config)\r\n            .then(res => {\r\n              if(!res.data.sqlMessage){\r\n                Swal.fire(\r\n                  'Se ha generado un nuevo tipo de equipo ',\r\n                  'Seleccione Ok para continuar',\r\n                  'success'\r\n                )\r\n                this.tipoMostrar = 'si';\r\n                this.obtenerTipos();\r\n              }else{\r\n                Swal.fire({\r\n                  icon: 'error',\r\n                  title: 'Oops...',\r\n                  text: 'No se ha creado este nuevo tipo',\r\n                  footer: 'Nombre ya se encuentra registrado'\r\n                })\r\n              }\r\n            })\r\n            .catch(e => {\r\n              Swal.fire({\r\n                icon: 'error',\r\n                title: 'Oops...',\r\n                text: 'No se ha creado este nuevo tipo',\r\n                footer: 'Posible error del sistema'\r\n              })\r\n          })\r\n        }else{\r\n          this.alerta('danger', 'Porfavor ingrese un nuevo tipo');\r\n        }\r\n      },\r\n      //Función que agrega una nueva marca\r\n      agregaMarca(){\r\n        let config = {\r\n          headers: {\r\n            token: this.token\r\n          }\r\n        }\r\n        this.$v.$touch()\r\n        if(!this.$v.marcaNew.$invalid){\r\n          this.axios.post('api/agregaMarca', {nomMarca: this.marcaNew}, config)\r\n            .then(res => {\r\n              if(!res.data.sqlMessage){\r\n                Swal.fire(\r\n                  'Se ha generado una nueva marca ',\r\n                  'Seleccione Ok para continuar',\r\n                  'success'\r\n                )\r\n                this.tipoMostrar = 'si';\r\n                this.obtenerMarcas();\r\n              }else{\r\n                Swal.fire({\r\n                  icon: 'error',\r\n                  title: 'Oops...',\r\n                  text: 'No se ha creado esta nueva marca',\r\n                  footer: 'Nombre ya se encuentra registrado'\r\n                })\r\n              }\r\n            })\r\n            .catch(e => {\r\n              Swal.fire({\r\n                icon: 'error',\r\n                title: 'Oops...',\r\n                text: 'No se ha logrado crear esta nueva marca',\r\n                footer: 'Posible error del sistema'\r\n              })\r\n          })\r\n        }else{\r\n          this.alerta('danger', 'Porfavor ingrese un nombre para la marca');\r\n        }\r\n      },\r\n      //Función que permite editar un equipo algunos datos son requeridos se usa Vualidate ($v.) para verificar si cumplen las condiciones\r\n      EditarEquipo(){\r\n        let config = {\r\n          headers: {\r\n            token: this.token\r\n          }\r\n        }\r\n        this.$v.$touch()\r\n        if(!this.$v.codigo.$invalid && !this.$v.modelo.$invalid && !this.$v.serie.$invalid && !this.$v.condicion.$invalid){\r\n          this.axios.put(`api/actualizaEquipo/${this.corr}`, {codEquipo: this.codigo, modelo: this.modelo, serie: this.serie, estado: this.estado, condicion: this.condicion, tipoEquipo: this.tipo, nomMarca: this.marca}, config)\r\n            .then(res => {\r\n              if(!res.data.sqlMessage){\r\n                Swal.fire(\r\n                  'Se ha editado al equipo satisfactoriamente',\r\n                  'Seleccione Ok para continuar',\r\n                  'success'\r\n                )\r\n              }else{\r\n                Swal.fire({\r\n                  icon: 'error',\r\n                  title: 'Oops...',\r\n                  text: 'No se ha actualizado el equipo',\r\n                  footer: 'Dato repetido asegurese de que el codigo o n° de serie no existan'\r\n                })\r\n              }\r\n            })\r\n            .catch(e => {\r\n              this.alerta('danger', 'No se ha logrado editar al equipo');\r\n          })\r\n        }else{\r\n          this.alerta('danger', 'Porfavor ingrese todos los datos requeridos');\r\n        }\r\n      },\r\n      //Se reinicia la ruta para regresar a la pantalla Principal\r\n      Volver(){\r\n        $('#historialEquipo').DataTable().destroy();\r\n        this.pestaña = 'equiposact'\r\n        this.botones = 'si'\r\n        this.listarEquiposAct();\r\n      },\r\n      //Determina la vista para enviar un equipo a un nuevo dueño, recibe la id del equipo en cuestion\r\n      Enviar(id){\r\n        this.pestaña = 'enviar'\r\n        this.botones = 'no'\r\n        this.numero = id\r\n        $('#tablaSinDueño').DataTable().destroy();\r\n        $('#tablaBajas').DataTable().destroy();\r\n        $('#tablaConDueño').DataTable().destroy();\r\n      },\r\n      //Carga todos los jardines de la base de datos\r\n      nombresJardin(){\r\n        let config = {\r\n          headers: {\r\n            token: this.token\r\n          }\r\n        }\r\n        this.axios.get('api/dependencias', config)\r\n          .then(res => {\r\n            this.nombres = res.data;\r\n            this.nombre = res.data[0].nomJardin\r\n          })\r\n          .catch(e => {\r\n            this.alerta('danger', 'No se han podido cargar los nombres de los jardines');\r\n        })\r\n      },\r\n      //Carga todos los funcionarios de la base de datos\r\n      listarDueños(){\r\n        let config = {\r\n          headers: {\r\n            token: this.token\r\n          }\r\n        }\r\n        this.axios.get('api/funcionarios', config)\r\n          .then(res => {\r\n            this.dueños = res.data;\r\n            this.dueño = res.data[0].nombre\r\n          })\r\n          .catch(e => {\r\n            this.alerta('danger', 'No se han podido cargar los nombres de los Funcionarios');\r\n        })\r\n      },\r\n      //Función que envia un equipo con un nuevo dueño\r\n      EnviarEquipo(){\r\n        var dt = this.convertDateMysql(new Date())\r\n        swal.fire({\r\n            title: '¿Seguro que desea asignar este equipo al usuario ' + this.dueño + '?',\r\n            type: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            cancelButtonText: 'Cancelar',\r\n            confirmButtonText: '¡Si!'\r\n        }).then((result) => {\r\n          if (result.value) {\r\n            let config = {\r\n              headers: {\r\n                token: this.token\r\n              }\r\n            }\r\n            this.axios.post('api/agregaHistorial', {zona: this.zona, nombre: this.dueño, nomJardin: this.nombre, corrEquipo: this.numero, fechaInicio: dt}, config)\r\n              .then(res => {\r\n                Swal.fire(\r\n                  'Se ha asignado un equipo al funcionario ' + this.dueño +'!',\r\n                  'Seleccione Ok para continuar',\r\n                  'success'\r\n                )\r\n                //location.reload();\r\n              })\r\n              .catch(e => {\r\n                Swal.fire({\r\n                  icon: 'error',\r\n                  title: 'Oops...',\r\n                  text: 'No se ha podido enviar el equipo',\r\n                  footer: 'Posible error del sistema'\r\n                })\r\n              })\r\n            }\r\n          })\r\n      },\r\n      countDownChanged(dismissCountDown) {\r\n        this.dismissCountDown = dismissCountDown\r\n      },\r\n      showAlert() {\r\n        this.dismissCountDown = this.dismissSecs\r\n      },\r\n      //Funcion que cambiara entre un tipo existente y uno nuevo\r\n      CambioTipo(){\r\n        if(this.tipoMostrar === 'no'){\r\n          this.tipoMostrar = 'si'\r\n        }else{\r\n          this.tipoMostrar = 'no'\r\n        }\r\n      },\r\n      Export2Doc(){\r\n        this.pestaña = 'word'\r\n        this.botones = 'no'\r\n        $('#tablaSinDueño').DataTable().destroy();\r\n        $('#tablaBajas').DataTable().destroy();\r\n        $('#tablaConDueño').DataTable().destroy();\r\n      }\r\n    },\r\n    //Prepara las tablas como Datatables de JQuery\r\n    async mounted(){\r\n      await $('#tablaConDueño').DataTable()\r\n      await $('#tablaSinDueño').DataTable();\r\n      await $(\"#tablaBajas\").DataTable()\r\n      await $(\"#historialEquipo\").DataTable()\r\n    },\r\n    watch: {\r\n      equiposAct(val) {\r\n        if(this.pestaña === 'equiposact'){\r\n          $('#tablaConDueño').DataTable().destroy();\r\n          this.$nextTick(()=> {\r\n            $('#tablaConDueño').DataTable()\r\n          });\r\n        }\r\n      },\r\n      equiposBuenEstado(val) {\r\n        if(this.pestaña === 'equiposNoAct'){\r\n          $('#tablaSinDueño').DataTable().destroy();\r\n          this.$nextTick(()=> {\r\n            $('#tablaSinDueño').DataTable()\r\n          });\r\n        }\r\n      },\r\n      equiposMalEstado(val) {\r\n        if(this.pestaña === 'equiposBaja'){\r\n          $('#tablaBajas').DataTable().destroy();\r\n          this.$nextTick(()=> {\r\n            $('#tablaBajas').DataTable()\r\n          });\r\n        }\r\n      },\r\n      historial(val) {\r\n        if(this.pestaña === 'historial'){\r\n          $('#historialEquipo').DataTable().destroy();\r\n          this.$nextTick(()=> {\r\n            $('#historialEquipo').DataTable()\r\n          });\r\n        }\r\n      }\r\n    }\r\n};\r\n\r\n\r\n</script>\r\n\r\n<style>\r\n  .menu{\r\n    padding: 30px;\r\n  }\r\n\r\n  body{\r\n    background-color: #eee;\r\n  }\r\n\r\n  .boton{\r\n    margin: 20px;\r\n    width: 90%;\r\n    border-radius: 12px;\r\n    border-color: black;\r\n  }\r\n</style>"]}]}