{"remainingRequest":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\inventarioInformatico\\stock\\stock\\src\\views\\bodegas.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\inventarioInformatico\\stock\\stock\\src\\views\\bodegas.vue","mtime":1647627634761},{"path":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647002043141},{"path":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\babel-loader\\lib\\index.js","mtime":1645539058368},{"path":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647002043141},{"path":"D:\\inventarioInformatico\\stock\\stock\\node_modules\\vue-loader\\lib\\index.js","mtime":1645539059241}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgbmF2YmFyIGZyb20gIi4uL2NvbXBvbmVudHMvbmF2YmFyLnZ1ZSI7DQppbXBvcnQgeyByZXF1aXJlZCwgbWluTGVuZ3RofSBmcm9tICJ2dWVsaWRhdGUvbGliL3ZhbGlkYXRvcnMiOw0KDQppbXBvcnQgJ2pxdWVyeS9kaXN0L2pxdWVyeS5taW4uanMnOw0KaW1wb3J0ICdib290c3RyYXAvZGlzdC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MnOw0KaW1wb3J0ICJkYXRhdGFibGVzLm5ldC1kdC9qcy9kYXRhVGFibGVzLmRhdGFUYWJsZXMiDQppbXBvcnQgImRhdGF0YWJsZXMubmV0LWR0L2Nzcy9qcXVlcnkuZGF0YVRhYmxlcy5taW4uY3NzIg0KaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JzsgDQoNCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAiYWJvdXQiLA0KICAgIGNvbXBvbmVudHM6IHsNCiAgICAgICAgbmF2YmFyLA0KICAgIH0sDQogICAgZGF0YSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIC8vRGF0b3MgcGFyYSBhZ3JlZ2FyIHVuIG51ZXZvIG1lbW8gKGhpc3RvcmlhbCkgY29uIHYtbW9kZWwNCiAgICAgICAgcGVzdGHDsWE6ICdib2RlZ2FzJywNCiAgICAgICAgYWdyZWdhcjogJ25vJywNCiAgICAgICAgYm9kZWdhczogW10sDQogICAgICAgIG9yZGVuZXM6IFtdLA0KICAgICAgICBkZXRhbGxlT3JkZW46IFtdLA0KICAgICAgICBlbnZpYXI6IFtdLA0KICAgICAgICBpbWFnZW5lczogW10sDQogICAgICAgIC8vVmFyaWFibGVzIGRlbCBBR1JFR0FSDQogICAgICAgIG51ZXZhQm9kZWdhOiAnJywNCiAgICAgICAgLy9WYXJpYWJsZSBwYXJhIHJlY29ub2NlciB1bmEgYm9kZWdhDQogICAgICAgIG5vbUJvZGVnYTogJycsDQogICAgICAgIC8vRGF0b3MgcGFyYSBhZ3JlZ2FyIHVuYSBudWV2YSBPcmRlbiBkZSBDb21wcmEgY29uIHYtbW9kZWwNCiAgICAgICAgYm9kZWdhQ3JlYXI6ICcnLA0KICAgICAgICBwcm92ZWVkb3I6ICcnLA0KICAgICAgICBudWV2YU9yZGVuOiAnJywNCiAgICAgICAgY2FudGlkYWRQcm9kdWN0b3M6IDEsDQogICAgICAgIHByb2R1Y3RvczogW3trZXk6IDEsIG5vbVByb2R1Y3RvOiAnJywgY2FudGlkYWQ6IDAsIHN0b2NrOiAwLCBzdG9ja0NyaXRpY286IDAsIGNvZGlnb0JhcnJhOiAnJywgY29kQmFyOiAnJywgbWFyY2E6ICcnfV0sDQogICAgICAgIHByb2RzOiBbXSwNCiAgICAgICAgcHJvZHVjdG9BbnQ6ICcnLA0KICAgICAgICAvL1ZBUklBQkxFUyBERSBERVRBTExFUw0KICAgICAgICBjb2RpZ286ICcnLA0KICAgICAgICBwcm9kdWN0bzogJycsDQogICAgICAgIG1hcmNhOiAnJywNCiAgICAgICAgZGVzY3JpcGNpb246ICcnLA0KICAgICAgICBpbWFnZW46IG51bGwsDQogICAgICAgIGltYWdlbkRpcjogJycsDQogICAgICAgIC8vVkFSSUFCTEVTIFBBUkEgQUdSRUdBUiBVTiBOVUVWTyBQUk9EVUNUTw0KICAgICAgICBwcm9kdWN0b0FHUkVHQURPOiAnJywNCiAgICAgICAgbm9tYnJlUHJvZHVjdG9BR1JFR0FETzogJycsDQogICAgICAgIHN0b2NrQUdSRUdBRE86ICcnLA0KICAgICAgICBzdG9ja0NyaXRpY29BR1JFR0FETzogJycsDQogICAgICAgIHByb2R1Y3Rvc0FHUkVHQVI6IFtdLA0KICAgICAgICBjb2RpZ29BR1JFR0FSOiAnJywNCiAgICAgICAgLy9WYXJpYWJsZXMgZGUgbGFzIGFsZXJ0YXMNCiAgICAgICAgZGlzbWlzc1NlY3M6IDUsDQogICAgICAgIGRpc21pc3NDb3VudERvd246IDAsDQogICAgICAgIG1lbnNhamU6IHtjb2xvcjogJycsIHRleHRvOiAnJ30sDQogICAgICB9DQogICAgfSwNCiAgICB2YWxpZGF0aW9uczp7DQogICAgICAgIC8vVmFsaWRhY2lvbmVzIGRlIGxvcyBpbnB1dA0KICAgICAgICBudWV2YUJvZGVnYTp7cmVxdWlyZWR9LA0KICAgICAgICBwcm92ZWVkb3I6e3JlcXVpcmVkfSwNCiAgICAgICAgbnVldmFPcmRlbjp7cmVxdWlyZWR9LA0KICAgICAgICBzdG9ja0FHUkVHQURPOntyZXF1aXJlZH0sDQogICAgICAgIHN0b2NrQ3JpdGljb0FHUkVHQURPOntyZXF1aXJlZH0sDQogICAgICAgIG5vbWJyZVByb2R1Y3RvQUdSRUdBRE86e3JlcXVpcmVkfQ0KICAgIH0sDQogICAgY29tcHV0ZWQ6IHsNCiAgICAgIC4uLm1hcFN0YXRlKFsndG9rZW4nLCAndXN1YXJpb0RCJ10pDQogICAgfSwNCiAgICBjcmVhdGVkKCl7DQogICAgICAgIHRoaXMuY2FyZ2FyQm9kZWdhcygpOw0KICAgICAgICB0aGlzLm9idGVuZXJJbWFnZW5lcygpOw0KICAgIH0sDQogICAgbWV0aG9kczp7DQogICAgICAgIC8vTUVUT0RPUyBQQVJBIEdFTkVSQVIgTEFTIE9SREVORVMgREUgQ09NUFJBDQogICAgICAgIC8vTWV0b2RvIHF1ZSBDYXJnYSB0b2RvcyBsb3MgcHJvZHVjdG9zIGRlbCBzaXN0ZW1hDQogICAgICAgIGNhcmdhclByb2R1Y3RvcyhwcmltZXJhKXsNCiAgICAgICAgICAgIGxldCBjb25maWcgPSB7DQogICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuYXhpb3MuZ2V0KGBhcGkvb2J0ZW5lclByb2R1Y3Rvc0JvZGVnYS8ke3RoaXMuYm9kZWdhQ3JlYXJ9YCwgY29uZmlnKQ0KICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnByb2RzID0gcmVzLmRhdGE7DQogICAgICAgICAgICAgICAgaWYocHJpbWVyYSl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdG9zWzBdLm5vbVByb2R1Y3RvID0gdGhpcy5wcm9kc1swXS5ub21Qcm9kdWN0bw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Rvc1swXS5zdG9jayA9IHRoaXMucHJvZHNbMF0uc3RvY2tCb2RlZ2ENCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbMF0uc3RvY2tDcml0aWNvID0gdGhpcy5wcm9kc1swXS5zdG9ja0NyaXRpY28NCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbMF0uY29kaWdvQmFycmEgPSB0aGlzLnByb2RzWzBdLmNvZGlnb0JhcnJhDQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdG9zWzBdLmNvZEJhciA9IHRoaXMucHJvZHNbMF0uY29kaWdvQmFycmENCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbMF0ubWFyY2EgPSB0aGlzLnByb2RzWzBdLm1hcmNhDQogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMucHJvZHVjdG9zWzBdLnN0b2NrIDwgdGhpcy5wcm9kdWN0b3NbMF0uc3RvY2tDcml0aWNvKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMucHJvZHVjdG9zWzBdLnN0b2NrID09PSAwKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0YSgnZGFuZ2VyJywgJ05vIGhheSBzdG9jayBkaXNwb25pYmxlIGVuIGJvZGVnYSBwYXJhIGVsIHByb2R1Y3RvICcgKyB0aGlzLnByb2R1Y3Rvc1swXS5ub21Qcm9kdWN0bykNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5hbGVydGEoJ2RhbmdlcicsICdObyBzZSBoYW4gcG9kaWRvIGNhcmdhciBsb3MgUHJvZHVjdG9zJyk7DQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICAvL0Z1bmNpw7NuIHF1ZSBjYXJnYSBsb3MgcHJvZHVjdG9zIGRlIHVuYSBib2RlZ2EgcGFyYSB0cmFzZmVyaXIgcHJvZHVjdG9zIGEgRGlyZWNjacOzbiBSZWdpb25hbA0KICAgICAgICBjYXJnYXJQcm9kdWN0b3NCb2RlZ2EoKXsNCiAgICAgICAgICAgIGxldCBjb25maWcgPSB7DQogICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuYXhpb3MuZ2V0KGBhcGkvb2J0ZW5lclByb2R1Y3Rvc0JvZGVnYS8ke3RoaXMubm9tQm9kZWdhfWAsIGNvbmZpZykNCiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaTxyZXMuZGF0YS5sZW5ndGg7IGkrKyl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZW52aWFyLnB1c2goe2NvZGlnb0JhcnJhOiByZXMuZGF0YVtpXS5jb2RpZ29CYXJyYSwgbm9tUHJvZHVjdG86IHJlcy5kYXRhW2ldLm5vbVByb2R1Y3RvLCBzdG9jazogcmVzLmRhdGFbaV0uc3RvY2ssIHN0b2NrQm9kZWdhOiByZXMuZGF0YVtpXS5zdG9ja0JvZGVnYSwgY2FudGlkYWQ6IDEsIHN0b2NrQ3JpdGljbzogcmVzLmRhdGFbaV0uc3RvY2tDcml0aWNvfSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRhKCdkYW5nZXInLCAnTm8gc2UgaGFuIHBvZGlkbyBjYXJnYXIgbG9zIFByb2R1Y3RvcycpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgLy9GVU5DScOTTiBRVUUgQ0FSR0EgVE9ET1MgTE9TIFBST0RVQ1RPUyBQQVJBIEFHUkVHQVJMTyBBIFVOQSBOVUVWQSBCT0RFR0ENCiAgICAgICAgY2FyZ2FyVE9ET1NQUk9EVUNUT1MoKXsNCiAgICAgICAgICAgIGxldCBjb25maWcgPSB7DQogICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuYXhpb3MuZ2V0KGBhcGkvb2J0ZW5lclByb2R1Y3Rvc1NvbG9zYCwgY29uZmlnKQ0KICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Rvc0FHUkVHQVIgPSByZXMuZGF0YTsNCiAgICAgICAgICAgICAgICB0aGlzLm5vbWJyZVByb2R1Y3RvQUdSRUdBRE8gPSB0aGlzLnByb2R1Y3Rvc0FHUkVHQVJbMF0ubm9tUHJvZHVjdG87DQogICAgICAgICAgICAgICAgdGhpcy5jb2RpZ29BR1JFR0FSID0gdGhpcy5wcm9kdWN0b3NBR1JFR0FSWzBdLmNvZGlnb0JhcnJhOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0YSgnZGFuZ2VyJywgJ05vIHNlIGhhbiBwb2RpZG8gY2FyZ2FyIGxvcyBQcm9kdWN0b3MnKTsNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIC8vRnVuY2nDs24gcXVlIHBlcm1pdGUgcmUtY2FyZ2FyIGxvcyBwcm9kdWN0b3MgYWwgbW9tZW50byBkZSBjYW1iaWFyIGxhIGJvZGVnYSBlbiBsYSB2aXN0YSBkZSByZWxsZW5hciBCb2RlZ2ENCiAgICAgICAgY2FtYmlhQm9kZWdhKCl7DQogICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpPHRoaXMucHJvZHVjdG9zLmxlbmd0aC0xOyBpKyspew0KICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdG9zLnNwbGljZSgtMSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuY2FyZ2FyUHJvZHVjdG9zKHRydWUpDQogICAgICAgIH0sDQogICAgICAgIGJ1c2NhclBvckNvZGlnbyhjb2RpZ29CYXJyYSwga2V5LCBjb2RCYXIpew0KICAgICAgICAgICAgdGhpcy5hbnRlcmlvcihjb2RCYXIpDQogICAgICAgICAgICBjb25zdCBpbmRleEFjdHVhbCA9IHRoaXMucHJvZHVjdG9zLmZpbmRJbmRleChpdGVtID0+IGl0ZW0ua2V5ID09IGtleSk7DQogICAgICAgICAgICBjb25zdCBwb3NQcm9kID0gdGhpcy5wcm9kcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmNvZGlnb0JhcnJhID09IGNvZGlnb0JhcnJhKQ0KICAgICAgICAgICAgaWYocG9zUHJvZCAhPT0gLTEpew0KICAgICAgICAgICAgICAgIHRoaXMuY2FtYmlvUHJvZHVjdG8odGhpcy5wcm9kc1twb3NQcm9kXS5jb2RpZ29CYXJyYSwga2V5KQ0KICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbaW5kZXhBY3R1YWxdLmNvZEJhciA9IHRoaXMucHJvZHVjdG9BbnQNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgLy9GdW5jacOzbiBxdWUgdGUgcGVybWl0ZSBndWFyZGFyIGVsIHZhbG9yIGFudGVyaW9yIGRlbCBzZWxlY3QNCiAgICAgICAgYW50ZXJpb3IoY29kQmFyKXsNCiAgICAgICAgICAgIHRoaXMucHJvZHVjdG9BbnQgPSBjb2RCYXINCiAgICAgICAgfSwNCiAgICAgICAgLy9TaSBzZSBjYW1iaWEgdW4gcHJvZHVjdG8gc2UgZGViZSBidXNjYXIgc3Ugc3RvY2sNCiAgICAgICAgY2FtYmlvUHJvZHVjdG8oY29kaWdvQmFycmEsIGtleSl7DQogICAgICAgICAgICBjb25zdCBpbmRleEFjdHVhbCA9IHRoaXMucHJvZHVjdG9zLmZpbmRJbmRleChpdGVtID0+IGl0ZW0ua2V5ID09IGtleSk7DQogICAgICAgICAgICB2YXIgcmVwZXRpZG8gPSBmYWxzZTsNCiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGk8dGhpcy5wcm9kdWN0b3MubGVuZ3RoOyBpKyspew0KICAgICAgICAgICAgICAgIGlmKGkgIT0gaW5kZXhBY3R1YWwpew0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnByb2R1Y3Rvc1tpXS5jb2RCYXIgPT09IGNvZGlnb0JhcnJhKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGV0aWRvID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmKCFyZXBldGlkbyl7DQogICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnByb2RzLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uY29kaWdvQmFycmEgPT0gY29kaWdvQmFycmEpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4MiA9IHRoaXMucHJvZHVjdG9zLmZpbmRJbmRleChpdGVtID0+IGl0ZW0ua2V5ID09IGtleSk7DQogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbaW5kZXgyXS5zdG9jayA9IHRoaXMucHJvZHNbaW5kZXhdLnN0b2NrQm9kZWdhDQogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbaW5kZXgyXS5zdG9ja0NyaXRpY28gPSB0aGlzLnByb2RzW2luZGV4XS5zdG9ja0NyaXRpY28NCiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Rvc1tpbmRleDJdLm5vbVByb2R1Y3RvID0gdGhpcy5wcm9kc1tpbmRleF0ubm9tUHJvZHVjdG87DQogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbaW5kZXgyXS5jb2RpZ29CYXJyYSA9IHRoaXMucHJvZHNbaW5kZXhdLmNvZGlnb0JhcnJhDQogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbaW5kZXgyXS5jb2RCYXIgPSB0aGlzLnByb2RzW2luZGV4XS5jb2RpZ29CYXJyYQ0KICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdG9zW2luZGV4Ml0ubWFyY2EgPSB0aGlzLnByb2RzW2luZGV4XS5tYXJjYQ0KICAgICAgICAgICAgICAgIGlmKHRoaXMucHJvZHVjdG9zW2luZGV4Ml0uY2FudGlkYWQgPiB0aGlzLnByb2R1Y3Rvc1tpbmRleDJdLnN0b2NrKXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbaW5kZXgyXS5jYW50aWRhZCA9IHRoaXMucHJvZHVjdG9zW2luZGV4Ml0uc3RvY2s7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmKHRoaXMucHJvZHVjdG9zW2luZGV4Ml0uc3RvY2sgKyB0aGlzLnByb2R1Y3Rvc1tpbmRleDJdLmNhbnRpZGFkIDwgdGhpcy5wcm9kdWN0b3NbaW5kZXgyXS5zdG9ja0NyaXRpY28pew0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnByb2R1Y3Rvc1tpbmRleDJdLnN0b2NrKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRhKCdkYW5nZXInLCAnRWwgZXhpc3RlIHN0b2NrIGVuIGJvZGVnYSBwYXJhIGVsIHByb2R1Y3RvICcgKyB0aGlzLnByb2R1Y3Rvc1tpbmRleDJdLm5vbVByb2R1Y3RvKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRhKCdkYW5nZXInLCAnRWwgc3RvY2sgcXVlIGV4aXN0ZSBhY3R1YWxtZW50ZSBlbiBib2RlZ2EgZGVsIHByb2R1Y3RvICInICsgdGhpcy5wcm9kdWN0b3NbaW5kZXgyXS5ub21Qcm9kdWN0byArICciIGVzIGluZmVyaW9yIGFsIHN0b2NrIGNyw610aWNvJykNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Rvc1tpbmRleEFjdHVhbF0uY29kQmFyID0gdGhpcy5wcm9kdWN0b0FudCAgDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIC8vU2UgYWdyZWdhIHVuIG51ZXZvIHBvc2libGUgcHJvZHVjdG8NCiAgICAgICAgLy9BREVNQVMgZGViZSByZXZpc2FyIHNpIGxvcyB2YWxvcmVzIGFudGVyaW9yZXMgZXN0YW4gcmVwZXRpZG9zDQogICAgICAgIGFncmVnYVByb2R1Y3RvKCl7DQogICAgICAgICAgICB0aGlzLmNhbnRpZGFkUHJvZHVjdG9zKysNCiAgICAgICAgICAgIHZhciBhID0gMDsNCiAgICAgICAgICAgIHRoaXMucHJvZHVjdG9zLnB1c2goe2tleTogdGhpcy5jYW50aWRhZFByb2R1Y3Rvcywgbm9tUHJvZHVjdG86ICcnLCBjYW50aWRhZDogMCwgc3RvY2s6IDAsIGNvZGlnb0JhcnJhOiAnJywgY29kQmFyOiAnJywgbWFyY2E6ICcnfSk7DQogICAgICAgICAgICB3aGlsZShhIDwgdGhpcy5wcm9kcy5sZW5ndGgpew0KICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5wcm9kdWN0b3MuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5jb2RCYXIgPT0gdGhpcy5wcm9kc1thXS5jb2RpZ29CYXJyYSk7DQogICAgICAgICAgICAgICAgaWYoaW5kZXggIT0gLTEpew0KICAgICAgICAgICAgICAgICAgICBhKys7DQogICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdG9zW3RoaXMucHJvZHVjdG9zLmxlbmd0aC0xXS5ub21Qcm9kdWN0byA9IHRoaXMucHJvZHNbYV0ubm9tUHJvZHVjdG8NCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbdGhpcy5wcm9kdWN0b3MubGVuZ3RoLTFdLnN0b2NrID0gdGhpcy5wcm9kc1thXS5zdG9ja0JvZGVnYQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Rvc1t0aGlzLnByb2R1Y3Rvcy5sZW5ndGgtMV0uc3RvY2tDcml0aWNvID0gdGhpcy5wcm9kc1thXS5zdG9ja0NyaXRpY28NCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NbdGhpcy5wcm9kdWN0b3MubGVuZ3RoLTFdLmNvZGlnb0JhcnJhID0gdGhpcy5wcm9kc1thXS5jb2RpZ29CYXJyYQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Rvc1t0aGlzLnByb2R1Y3Rvcy5sZW5ndGgtMV0uY29kQmFyID0gdGhpcy5wcm9kc1thXS5jb2RpZ29CYXJyYQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Rvc1t0aGlzLnByb2R1Y3Rvcy5sZW5ndGgtMV0ubWFyY2EgPSB0aGlzLnByb2RzW2FdLm1hcmNhDQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdG9zW3RoaXMucHJvZHVjdG9zLmxlbmd0aC0xXS5rZXkgPSB0aGlzLmNhbnRpZGFkUHJvZHVjdG9zDQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZihhID09IHRoaXMucHJvZHMubGVuZ3RoKXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW50aWRhZFByb2R1Y3Rvcy0tOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Rvcy5zcGxpY2UoLTEpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0YSgnZGFuZ2VyJywnTm8gZXhpc3RlbiBtYXMgcHJvZHVjdG9zIHBhcmEgYWdyZWdhcicpDQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gDQogICAgICAgICAgICBpZih0aGlzLnByb2R1Y3Rvc1t0aGlzLnByb2R1Y3Rvcy5sZW5ndGgtMV0uc3RvY2sgPCB0aGlzLnByb2R1Y3Rvc1t0aGlzLnByb2R1Y3Rvcy5sZW5ndGgtMV0uc3RvY2tDcml0aWNvICYmIGEgIT0gdGhpcy5wcm9kcy5sZW5ndGgpew0KICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRhKCdkYW5nZXInLCAnRWwgc3RvY2sgcXVlIGV4aXN0ZSBhY3R1YWxtZW50ZSBlbiBib2RlZ2EgZGVsIHByb2R1Y3RvICInICsgdGhpcy5wcm9kdWN0b3NbdGhpcy5wcm9kdWN0b3MubGVuZ3RoLTFdLm5vbVByb2R1Y3RvICsgJyIgZXMgaW5mZXJpb3IgYWwgc3RvY2sgY3LDrXRpY28nKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvL1NlIHF1aXRhIHVuIFByb2R1Y3RvIGRlIGxvcyBxdWUgc2Vyw6FuIGFncmVnYWRvcyBhbCBzaXN0ZW1hDQogICAgICAgIHF1aXRhclByb2R1Y3RvKCl7DQogICAgICAgICAgICBpZih0aGlzLnByb2R1Y3Rvcy5sZW5ndGggPiAxKXsNCiAgICAgICAgICAgICAgICB0aGlzLmNhbnRpZGFkUHJvZHVjdG9zLS07DQogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3Muc3BsaWNlKC0xKTsNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRhKCdkYW5nZXInLCAnVGllbmUgcXVlIGV4aXN0aXIgYWwgbWVub3MgMSBwcm9kdWN0bycpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvL0luZGljYW1vcyBlbCBtaW5pbW8gZGUgY2FudGlkYWQgcGFyYSBxdWUgbm8gZXN0ZSB2YWNpbyBvIHNlYSBtZW5vciBhIDANCiAgICAgICAgY2FudE1pbihwcm9kdWN0byl7DQogICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMucHJvZHVjdG9zLmZpbmRJbmRleChpdGVtID0+IGl0ZW0ua2V5ID09IHByb2R1Y3RvKTsNCiAgICAgICAgICAgIGlmKHRoaXMucHJvZHVjdG9zW2luZGV4XS5jYW50aWRhZCA8IDAgfHwgdGhpcy5wcm9kdWN0b3NbaW5kZXhdLmNhbnRpZGFkID09ICcnKXsNCiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Rvc1tpbmRleF0uY2FudGlkYWQgPSAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYodGhpcy5wcm9kdWN0b3NbaW5kZXhdLnN0b2NrICsgcGFyc2VJbnQodGhpcy5wcm9kdWN0b3NbaW5kZXhdLmNhbnRpZGFkKSA8IHRoaXMucHJvZHVjdG9zW2luZGV4XS5zdG9ja0NyaXRpY28pew0KICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRhKCdkYW5nZXInLCAnRWwgc3RvY2sgcXVlIGV4aXN0ZSBhY3R1YWxtZW50ZSBlbiBib2RlZ2EgZGVsIHByb2R1Y3RvICInICsgdGhpcy5wcm9kdWN0b3NbaW5kZXhdLm5vbVByb2R1Y3RvICsgJyIgZXMgaW5mZXJpb3IgYWwgc3RvY2sgY3LDrXRpY28gaW5ncmVzZSBtYXMgY2FudGlkYWQgcGFyYSBjdW1wbGlyIGNvbiBlbCBzdG9jayBDcsOtdGljbycpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIC8vSW5kaWNhbW9zIGVsIG1pbmltbyBkZSBjYW50aWRhZCBwYXJhIHF1ZSBubyBlc3RlIHZhY2lvIG8gc2VhIG1lbm9yIGEgMA0KICAgICAgICBjYW50TWluQm9kZWdhKHByb2R1Y3RvKXsNCiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5lbnZpYXIuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5jb2RpZ29CYXJyYSA9PSBwcm9kdWN0byk7DQogICAgICAgICAgICBpZih0aGlzLmVudmlhcltpbmRleF0uY2FudGlkYWQgPCAwKXsNCiAgICAgICAgICAgICAgICB0aGlzLmVudmlhcltpbmRleF0uY2FudGlkYWQgPSAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYodGhpcy5lbnZpYXJbaW5kZXhdLnN0b2NrQm9kZWdhIC0gcGFyc2VJbnQodGhpcy5lbnZpYXJbaW5kZXhdLmNhbnRpZGFkKSA8IHRoaXMuZW52aWFyW2luZGV4XS5zdG9ja0NyaXRpY28pew0KICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRhKCdkYW5nZXInLCAnU2kgcmVhbGl6YSBlc3RhIGFjY2nDs24gZWwgc3RvY2sgZW4gYm9kZWdhIGRlbCBwcm9kdWN0byAiJyArIHRoaXMuZW52aWFyW2luZGV4XS5ub21Qcm9kdWN0byArICciIHNlcmEgaW5mZXJpb3IgYWwgc3RvY2sgY3LDrXRpY28nKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvL0Z1bmNpw7NuIHF1ZSBtYW5lamEgdmFsb3JlcyBkZWwgaW5wdXQgZGUgc3RvY2sgZGUgYm9kZWdhIFBBUkEgQUdSRUdBUiBVTiBQUk9EVUNUTyBBIFVOQSBOVUVWQSBCT0RFR0ENCiAgICAgICAgY2FudE1pbkJvZGVnYUFncmVnYXIoKXsNCiAgICAgICAgICAgIGlmKHRoaXMuc3RvY2tBR1JFR0FETyA8IDApew0KICAgICAgICAgICAgICAgIHRoaXMuc3RvY2tBR1JFR0FETyA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZih0aGlzLnN0b2NrQUdSRUdBRE8gPCB0aGlzLnN0b2NrQ3JpdGljb0FHUkVHQURPKXsNCiAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0YSgnZGFuZ2VyJywgJ0VsIHN0b2NrIHF1ZSBlc3RhIGluZ3Jlc2FuZG8gZXMgbWVub3IgYWwgY3JpdGljbyBwYXJhIGxhIGJvZGVnYSAnICsgdGhpcy5ub21Cb2RlZ2EpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGNhbnRNaW5Dcml0aWNvQUdSRUdBUigpew0KICAgICAgICAgICAgaWYodGhpcy5zdG9ja0NyaXRpY29BR1JFR0FETyA8IDApew0KICAgICAgICAgICAgICAgIHRoaXMuc3RvY2tDcml0aWNvQUdSRUdBRE8gPSAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYodGhpcy5zdG9ja0NyaXRpY29BR1JFR0FETyA+IHRoaXMuc3RvY2tBR1JFR0FETyApew0KICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRhKCdkYW5nZXInLCAnRWwgc3RvY2sgcXVlIGVzdGEgaW5ncmVzYW5kbyBlcyBtZW5vciBhbCBjcml0aWNvIHBhcmEgbGEgYm9kZWdhICcgKyB0aGlzLm5vbUJvZGVnYSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgLy9QZXJtaXRlIHZlciBsb3MgZGV0YWxsZXMgZGUgdW4gcHJvZHVjdG8geSBsb3MgY2FyZ2ENCiAgICAgICAgZGV0YWxsZXMoaWQpew0KICAgICAgICAgICAgbGV0IGNvbmZpZyA9IHsNCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLnRva2VuDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5heGlvcy5nZXQoYGFwaS9vYnRlbmVyUHJvZHVjdG8vJHtpZH1gLCBjb25maWcpDQogICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2RpZ28gPSByZXMuZGF0YVswXS5jb2RpZ29CYXJyYTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0byA9IHJlcy5kYXRhWzBdLm5vbVByb2R1Y3RvOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcmNhID0gcmVzLmRhdGFbMF0ubWFyY2E7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzY3JpcGNpb24gPSByZXMuZGF0YVswXS5kZXNjcmlwY2lvbg0KICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpPHRoaXMuaW1hZ2VuZXMubGVuZ3RoOyBpKyspew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5pbWFnZW5lc1tpXS5zcGxpdCgnLicpWzBdID09IHRoaXMuY29kaWdvKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlbkRpciA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvZGJJbWFnZW5lcy8nICsgdGhpcy5pbWFnZW5lc1tpXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWFnZW5EaXIgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2RiSW1hZ2VuZXMvbm8taW1hZ2VuLnBuZycNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoew0KICAgICAgICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLA0KICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ09vcHMuLi4nLA0KICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnTm8gc2UgaGEgbG9ncmFkbyBlbmNvbnRyYXIgbG9zIGRhdG9zIGRlbCBlcXVpcG8nLA0KICAgICAgICAgICAgICAgICAgICBmb290ZXI6ICdQb3NpYmxlIGVycm9yIGRlbCBzaXN0ZW1hJw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIC8vRnVuY2nDs24gcXVlIG9idGllbmUgdW5hIGltYWdlbg0KICAgICAgICBvYnRlbmVySW1hZ2VuZXMoKXsNCiAgICAgICAgICAgIGxldCBjb25maWcgPSB7DQogICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICB0aGlzLmF4aW9zLmdldChgYXBpL29idGVuZXJJbWFnZW5gLCBjb25maWcpDQogICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWFnZW5lcyA9IHJlcy5kYXRhDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRhKCdkYW5nZXInLCAnRXN0ZSBwcm9kdWN0byBubyBwb3NlZSBpbWFnZW4gbyBubyBoYSBjYXJnYWRvIGNvcnJlY3RhbWVudGUnKQ0KICAgICAgICAgICAgICAgIH0pDQoNCiAgICAgICAgfSwNCiAgICAgICAgY29udmVydERhdGVNeXNxbCh5b3VyRGF0ZSl7DQogICAgICAgICAgICB5b3VyRGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0NCiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IHlvdXJEYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkNCiAgICAgICAgICAgIHlvdXJEYXRlID0gbmV3IERhdGUoeW91ckRhdGUuZ2V0VGltZSgpIC0gKG9mZnNldCo2MCoxMDAwKSkNCiAgICAgICAgICAgIHJldHVybiB5b3VyRGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0NCgkJfSwNCiAgICAgICAgLy9GdW5jacOzbiBxdWUgcGVybWl0ZSBnZW5lcmFyIHVuIGluZm9ybWUgeSBlbnZpYXIgbG9zIGRhdG9zIGRlIHVuIG51ZXZvIEhJU1RPUklBTCANCiAgICAgICAgZ2VuZXJhckluZm9ybWUoKXsNCiAgICAgICAgICAgIHZhciBkdCA9IHRoaXMuY29udmVydERhdGVNeXNxbChuZXcgRGF0ZSgpKQ0KICAgICAgICAgICAgdmFyIHN1bWFTdG9ja0JvZGVnYSA9IDA7DQogICAgICAgICAgICB2YXIgc3VtYSA9IDA7DQogICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5wcm9kdWN0b3MubGVuZ3RoOyBpKyspew0KICAgICAgICAgICAgICAgIHN1bWFTdG9ja0JvZGVnYSA9IHN1bWFTdG9ja0JvZGVnYSArIHRoaXMucHJvZHVjdG9zW2ldLnN0b2NrDQogICAgICAgICAgICAgICAgc3VtYSA9IHN1bWEgKyB0aGlzLnByb2R1Y3Rvc1tpXS5jYW50aWRhZA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy4kdi4kdG91Y2goKQ0KICAgICAgICAgICAgaWYoIXRoaXMuJHYubnVldmFPcmRlbi4kaW52YWxpZCAmJiAhdGhpcy4kdi5wcm92ZWVkb3IuJGludmFsaWQpew0KICAgICAgICAgICAgICAgIHN3YWwuZmlyZSh7DQogICAgICAgICAgICAgICAgdGl0bGU6ICfCv1NlZ3VybyBxdWUgZGVzZWEgcmVhbGl6YXIgbGEgb3JkZW4gZGUgY29tcHJhIGEgbGEgYm9kZWdhICcgKyB0aGlzLmJvZGVnYUNyZWFyICsgJz8nLA0KICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywNCiAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLA0KICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogJyMzMDg1ZDYnLA0KICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAnI2QzMycsDQogICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ0NhbmNlbGFyJywNCiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ8KhU2khJw0KICAgICAgICAgICAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZihzdW1hU3RvY2tCb2RlZ2EgPiAwICYmIHN1bWEgPiAwKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29uZmlnID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXhpb3MucG9zdCgnYXBpL2FncmVnYU9yZGVuRW50cmVnYScsIHtjb2RPcmRlbjogdGhpcy5udWV2YU9yZGVuLCBwcm92ZWVkb3I6IHRoaXMucHJvdmVlZG9yLCBmZWNoYTogZHQsIG5vbUJvZGVnYTogdGhpcy5ib2RlZ2FDcmVhcn0sIGNvbmZpZykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFyZXMuZGF0YS5zcWxNZXNzYWdlKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5PUkRFTlByb2R1Y3RvKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3VtYVN0b2NrKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdlcnJvcicsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnT29wcy4uLicsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdObyBzZSBoYSBsb2dyYWRvIGNyZWFyICcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvb3RlcjogJ0FsZ8O6biBkYXRvIGhhIHNpZG8gaW5jb3JyZWN0byB2ZXJpZmlxdWVsb3MnDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdlcnJvcicsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnT29wcy4uLicsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdObyBzZSBoYSBsb2dyYWRvIHJlZ2lzdHJhciBsYSBvcmRlbiBkZSBjb21wcmEnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb290ZXI6ICdQb3NpYmxlIGVycm9yIGRlbCBzaXN0ZW1hJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgDQogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihzdW1hU3RvY2tCb2RlZ2EgPiAwKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0YSgnZGFuZ2VyJywgJ05vIHNlIGVuY3VlbnRyYSBzdG9jayBkaXNwb25pYmxlIGVuIGJvZGVnYScpDQogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0YSgnZGFuZ2VyJywgJ05vIHNlIGhhIGluZ3Jlc2FkbyBuaW5ndW5hIGNhbnRpZGFkJykNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0YSgnZGFuZ2VyJywgJ1BvcmZhdm9yIGluZ3Jlc2UgdG9kb3MgbG9zIGNhbXBvcyByZXF1ZXJpZG9zJykNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgLy9SZWdpc3RyYSBsb3MgcHJvZHVjdG9zIGRlIGxhIE9SREVOIERFIENPTVBSQQ0KICAgICAgICBPUkRFTlByb2R1Y3RvKCl7DQogICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpPHRoaXMucHJvZHVjdG9zLmxlbmd0aDsgaSsrKXsNCiAgICAgICAgICAgICAgICBpZih0aGlzLnByb2R1Y3Rvc1tpXS5jYW50aWRhZCA+IDApew0KICAgICAgICAgICAgICAgICAgICBsZXQgY29uZmlnID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLnRva2VuDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdGhpcy5heGlvcy5wb3N0KCdhcGkvYWdyZWdhT3JkZW5Qcm9kdWN0bycsIHtjYW50aWRhZDogdGhpcy5wcm9kdWN0b3NbaV0uY2FudGlkYWQsIGNvZE9yZGVuOiB0aGlzLm51ZXZhT3JkZW4sIGNvZGlnb0JhcnJhOiB0aGlzLnByb2R1Y3Rvc1tpXS5jb2RCYXJ9LCBjb25maWcpDQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXJlcy5kYXRhLnNxbE1lc3NhZ2Upew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU2UgaGEgcmVnaXN0cmFkbyBsYSBvcmRlbiBkZSBjb21wcmEgc2F0aXNmYWN0b3JpYW1lbnRlJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU2VsZWNjaW9uZSBPayBwYXJhIGNvbnRpbnVhcicsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdPb3BzLi4uJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ05vIHNlIGhhIGxvZ3JhZG8gY3JlYXIgJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyOiAnQWxnw7puIGRhdG8gaGEgc2lkbyBpbmNvcnJlY3RvIHZlcmlmaXF1ZWxvcycNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ09vcHMuLi4nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnTm8gc2UgaGEgbG9ncmFkbyByZWdpc3RyYXIgbGEgb3JkZW4gZGUgY29tcHJhJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyOiAnUG9zaWJsZSBlcnJvciBkZWwgc2lzdGVtYScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQoNCiAgICAgICAgLy9TdW1hIGxvcyBzdG9jayBkZSBCT0RFR0EgZGUgY2FkYSBwcm9kdWN0bw0KICAgICAgICBzdW1hU3RvY2soKXsNCiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGk8dGhpcy5wcm9kdWN0b3MubGVuZ3RoOyBpKyspew0KICAgICAgICAgICAgICAgIGlmKHRoaXMucHJvZHVjdG9zW2ldLmNhbnRpZGFkID4gMCl7DQogICAgICAgICAgICAgICAgICAgIGxldCBjb25maWcgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMudG9rZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmF4aW9zLnB1dChgYXBpL2FjdHVhbGl6YVN0b2NrQm9kZWdhbWFzLyR7dGhpcy5wcm9kdWN0b3NbaV0uY29kQmFyfWAsIHtjYW50aWRhZDogdGhpcy5wcm9kdWN0b3NbaV0uY2FudGlkYWQsIG5vbUJvZGVnYTogdGhpcy5ib2RlZ2FDcmVhcn0sIGNvbmZpZykNCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3R1YWxpemFyU3RvY2soKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lbnNhamUgPSAnUG9zaWJsZSBlcnJvciBkZWwgc2lzdGVtYSc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnT29wcy4uLicsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ05vIHNlIGhhIGxvZ3JhZG8gcmVnaXN0cmFyIGxhIGVudHJlZ2EgZGUgaW5zdW1vcycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyOiBtZW5zYWplDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvL0FjdHVhbGl6YSBsYSBwYWdpbmEgdHJhcyBnZW5lcmFyIHVuYSBvcmRlbiBkZSBjb21wcmENCiAgICAgICAgYWN0dWFsaXphclN0b2NrKCl7DQogICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpPHRoaXMucHJvZHVjdG9zLmxlbmd0aC0xOyBpKyspew0KICAgICAgICAgICAgICAgIHRoaXMuY2FudGlkYWRQcm9kdWN0b3MtLTsNCiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Rvcy5zcGxpY2UoLTEpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5jYXJnYXJQcm9kdWN0b3ModHJ1ZSk7DQogICAgICAgIH0sDQogICAgICAgIC8vRnVuY2nDs24gcGFyYSBjYXJnYXIgbGFzIGJvZGVnYXMgZGVsIHNpc3RlbWENCiAgICAgICAgY2FyZ2FyQm9kZWdhcygpew0KICAgICAgICAgICAgbGV0IGNvbmZpZyA9IHsNCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLnRva2VuDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5heGlvcy5nZXQoJ2FwaS9vYnRlbmVyYm9kZWdhcycsIGNvbmZpZykNCiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5ib2RlZ2FzID0gcmVzLmRhdGE7DQogICAgICAgICAgICAgICAgdGhpcy5ib2RlZ2FDcmVhciA9IHJlcy5kYXRhWzBdLm5vbUJvZGVnYQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0YSgnZGFuZ2VyJywgJ05vIHNlIGhhbiBwb2RpZG8gY2FyZ2FyIGxhcyBib2RlZ2FzJyk7DQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICAvL0Z1bmNpw7NuIHBhcmEgcmVncmVzYXIgYSBsYSB2aXN0YSBwcmluY2lwYWwNCiAgICAgICAgVm9sdmVyKCl7DQogICAgICAgICAgICB0aGlzLnBlc3Rhw7FhID0gJ2JvZGVnYXMnDQogICAgICAgICAgICAkKCcjb3JkZW5lcycpLkRhdGFUYWJsZSgpLmRlc3Ryb3koKQ0KICAgICAgICAgICAgJCgnI2VudmlhcicpLkRhdGFUYWJsZSgpLmRlc3Ryb3koKQ0KICAgICAgICAgICAgdGhpcy5lbnZpYXIgPSBbXQ0KICAgICAgICAgICAgJCgnI2JvZGVnYXMnKS5EYXRhVGFibGUoKQ0KICAgICAgICAgICAgdGhpcy5jYXJnYXJCb2RlZ2FzKCk7DQogICAgICAgIH0sDQogICAgICAgIFZvbHZlck9SRCgpew0KICAgICAgICAgICAgJCgnI2RldGFsbGVPcmRlbicpLkRhdGFUYWJsZSgpLmRlc3Ryb3koKTsNCiAgICAgICAgICAgIHRoaXMucGVzdGHDsWEgPSAnb3JkZW5lcycNCiAgICAgICAgICAgIHRoaXMuY2FyZ2FyT3JkZW5lcygpOw0KICAgICAgICAgICAgJCgnI29yZGVuZXMnKS5EYXRhVGFibGUoKQ0KICAgICAgICB9LA0KICAgICAgICAvL1ZvbHZlciBkZXNkZSBsYSB2aXN0YSBkZSBhZ3JlZ2FyIHVuIG51ZXZvIHByb2R1Y3RvIGEgbGEgdmlzdGEgZGVsIGRlc3BsaWVndWUgZGUgbG9zIHByb2VkdWN0b3MgZGUgdW5hIGJvZGVnYQ0KICAgICAgICBWb2x2ZXJFbnZpYXIoKXsNCiAgICAgICAgICAgIHRoaXMucGVzdGHDsWEgPSAnZW52aWFyJw0KICAgICAgICAgICAgJCgnI2VudmlhcicpLkRhdGFUYWJsZSgpDQogICAgICAgICAgICB0aGlzLmVudmlhciA9IFtdOw0KICAgICAgICAgICAgdGhpcy5jYXJnYXJQcm9kdWN0b3NCb2RlZ2EoKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy9GdW5jaW9uZXMgcGFyYSBjYW1iaWFyIGxhcyB2aXN0YXMNCiAgICAgICAgQWN0QWdyZWdhcigpew0KICAgICAgICAgICAgdGhpcy5hZ3JlZ2FyID0gJ3NpJw0KICAgICAgICB9LA0KICAgICAgICBOb0FncmVnYXIoKXsNCiAgICAgICAgICAgIHRoaXMuYWdyZWdhciA9ICdubycNCiAgICAgICAgfSwNCiAgICAgICAgLy9BY3RpdmFkb3JlcyBkZSB2aXN0YXMgDQogICAgICAgIEFjdE9yZGVuZXMobm9tQm9kZWdhKXsNCiAgICAgICAgICAgIHRoaXMubm9tQm9kZWdhID0gbm9tQm9kZWdhDQogICAgICAgICAgICB0aGlzLnBlc3Rhw7FhID0gJ29yZGVuZXMnDQogICAgICAgICAgICAkKCcjYm9kZWdhcycpLkRhdGFUYWJsZSgpLmRlc3Ryb3koKTsNCiAgICAgICAgICAgICQoJyNvcmRlbmVzJykuRGF0YVRhYmxlKCkNCiAgICAgICAgICAgIHRoaXMuY2FyZ2FyT3JkZW5lcygpOw0KICAgICAgICB9LA0KICAgICAgICBBY3RET3JkZW5lcyhjb2RPcmRlbil7DQogICAgICAgICAgICB0aGlzLmhpc3RvID0gY29kT3JkZW47DQogICAgICAgICAgICB0aGlzLnBlc3Rhw7FhID0gJ2RldGFsbGVPcmRlbic7DQogICAgICAgICAgICAkKCcjb3JkZW5lcycpLkRhdGFUYWJsZSgpLmRlc3Ryb3koKTsNCiAgICAgICAgICAgICQoJyNkZXRhbGxlT3JkZW4nKS5EYXRhVGFibGUoKQ0KICAgICAgICAgICAgdGhpcy5jYXJnYXJEZXRhbGxlT3JkZW4oKTsNCiAgICAgICAgfSwNCiAgICAgICAgQWN0Q3JlYXIoKXsNCiAgICAgICAgICAgIHRoaXMucGVzdGHDsWEgPSAnY3JlYXInDQogICAgICAgICAgICB0aGlzLmFncmVnYXIgPSAnbm8nDQogICAgICAgICAgICAkKCcjYm9kZWdhcycpLkRhdGFUYWJsZSgpLmRlc3Ryb3koKTsNCiAgICAgICAgICAgIHRoaXMuY2FyZ2FyUHJvZHVjdG9zKHRydWUpOw0KICAgICAgICB9LA0KICAgICAgICBBY3RQcm9kdWN0b3Mobm9tQm9kZWdhKXsNCiAgICAgICAgICAgIHRoaXMubm9tQm9kZWdhID0gbm9tQm9kZWdhDQogICAgICAgICAgICB0aGlzLnBlc3Rhw7FhID0gJ2VudmlhcicNCiAgICAgICAgICAgICQoJyNib2RlZ2FzJykuRGF0YVRhYmxlKCkuZGVzdHJveSgpOw0KICAgICAgICAgICAgJCgnI2VudmlhcicpLkRhdGFUYWJsZSgpDQogICAgICAgICAgICB0aGlzLmNhcmdhclByb2R1Y3Rvc0JvZGVnYSgpOw0KICAgICAgICB9LA0KICAgICAgICBBY3RBZ3JlZ2FyUHJvZCgpew0KICAgICAgICAgICAgdGhpcy5wZXN0YcOxYSA9ICdhZ3JlZ2FyUHJvZHVjdG8nDQogICAgICAgICAgICAkKCcjZW52aWFyJykuRGF0YVRhYmxlKCkuZGVzdHJveSgpOw0KICAgICAgICAgICAgdGhpcy5jYXJnYXJUT0RPU1BST0RVQ1RPUygpOw0KICAgICAgICAgICAgdGhpcy5wcm9kdWN0b0FHUkVHQURPID0gJyc7DQogICAgICAgICAgICB0aGlzLnN0b2NrQ3JpdGljb0FHUkVHQURPID0gMTsNCiAgICAgICAgICAgIHRoaXMuc3RvY2tBR1JFR0FETyA9IDE7DQogICAgICAgIH0sDQogICAgICAgIC8vRnVuY2lvbmVzIGRlIEFHUkVHQVINCiAgICAgICAgYWdyZWdhQm9kZWdhKCl7DQogICAgICAgICAgICB0aGlzLiR2LiR0b3VjaCgpDQogICAgICAgICAgICBpZighdGhpcy4kdi5udWV2YUJvZGVnYS4kaW52YWxpZCl7DQogICAgICAgICAgICAgICAgbGV0IGNvbmZpZyA9IHsNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMudG9rZW4NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLmF4aW9zLnBvc3QoJ2FwaS9hZ3JlZ2FCb2RlZ2EnLCB7bm9tQm9kZWdhOiB0aGlzLm51ZXZhQm9kZWdhfSwgY29uZmlnKQ0KICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXJlcy5kYXRhLnNxbE1lc3NhZ2Upew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm9kZWdhcy5wdXNoKHtub21Cb2RlZ2E6IHRoaXMubnVldmFCb2RlZ2F9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU2UgaGEgcmVnaXN0cmFkbyBsYSBib2RlZ2Egc2F0aXNmYWN0b3JpYW1lbnRlJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU2VsZWNjaW9uZSBPayBwYXJhIGNvbnRpbnVhcicsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdPb3BzLi4uJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ05vIHNlIGhhIGxvZ3JhZG8gY3JlYXIgbGEgbnVldmEgYm9kZWdhICInICsgdGhpcy5udWV2YUJvZGVnYSArICciIC4nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb290ZXI6ICdFbCBub21icmUgZGUgbGEgYm9kZWdhIHlhIGV4aXN0ZSBlbiBlbCBzaXN0ZW1hJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdlcnJvcicsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnT29wcy4uLicsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdObyBzZSBoYSBsb2dyYWRvIHJlZ2lzdHJhciBsYSBudWV2YSBib2RlZ2EnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb290ZXI6ICdQb3NpYmxlIGVycm9yIGRlbCBzaXN0ZW1hJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgdGhpcy5hbGVydGEoJ2RhbmdlcicsICdQb3JmYXZvciBpbmdyZXNlIHVuIG5vbWJyZSBwYXJhIGxhIG51ZXZhIGJvZGVnYScpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIC8vVEFCTEEgREUgT1JERU5FUyBRVUUgUE9TRUUgVU5BIEJPREVHQQ0KICAgICAgICBjYXJnYXJPcmRlbmVzKCl7DQogICAgICAgICAgICBsZXQgY29uZmlnID0gew0KICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMudG9rZW4NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmF4aW9zLmdldChgYXBpL29idGVuZXJPcmRlbmVzQm9kZWdhLyR7dGhpcy5ub21Cb2RlZ2F9YCwgY29uZmlnKQ0KICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLm9yZGVuZXMgPSByZXMuZGF0YTsNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5hbGVydGEoJ2RhbmdlcicsICdObyBzZSBoYSBsb2dyYWRvIGNhcmdhciBsYSBvcmRlbicpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgLy9DYXJnYXIgbG9zIGRldGFsbGVzIGRlIHVuYSBvcmRlbg0KICAgICAgICBjYXJnYXJEZXRhbGxlT3JkZW4oKXsNCiAgICAgICAgICAgIGxldCBjb25maWcgPSB7DQogICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuYXhpb3MuZ2V0KGBhcGkvb2J0ZW5lck9yZGVuLyR7dGhpcy5oaXN0b31gLCBjb25maWcpDQogICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuZGV0YWxsZU9yZGVuID0gcmVzLmRhdGE7DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRhKCdkYW5nZXInLCAnTm8gc2UgaGEgbG9ncmFkbyBjYXJnYXIgZWwgZGV0YWxsZSBkZSB1bmEgb3JkZW4nKTsNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIC8vRnVuY2nDs24gcXVlIGVudmlhIHVuIHN0b2NrIGRlc2RlIGJvZGVnYSBhIERpcmVjY2nDs24gUmVnaW9uYWwNCiAgICAgICAgRW52aWFyRGlyZWNjaW9uKGNvZGlnb0JhcnJhLCBjYW50aWRhZCwgc3RvY2tCb2RlZ2Epew0KICAgICAgICAgICAgaWYoc3RvY2tCb2RlZ2EgPiAwKXsNCiAgICAgICAgICAgICAgICBzd2FsLmZpcmUoew0KICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ8K/U2VndXJvIHF1ZSBkZXNlYSBlbnZpYXIgZWwgc3RvY2sgZGUgbGEgYm9kZWdhIGNvbiB1bmEgY2FudGlkYWQgZGUgIicgKyBjYW50aWRhZCArICciIGEgZGlyZWNjacOzbiByZWdpb25hbCBwYXJhIGVsIHByb2R1Y3RvIGRlIGNvZGlnbzogIicgKyBjb2RpZ29CYXJyYSArICciPycsDQogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywNCiAgICAgICAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAnIzMwODVkNicsDQogICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAnI2QzMycsDQogICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdDYW5jZWxhcicsDQogICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnwqFTaSEnDQogICAgICAgICAgICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb25maWcgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXhpb3MucHV0KGBhcGkvYWN0dWFsaXphU3RvY2tCb2RlZ2EvJHtjb2RpZ29CYXJyYX1gLCB7Y2FudGlkYWQ6IHBhcnNlSW50KGNhbnRpZGFkKSwgbm9tQm9kZWdhOiB0aGlzLm5vbUJvZGVnYX0sIGNvbmZpZykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVjaWJpckRpcmVjY2lvbihjb2RpZ29CYXJyYSwgY2FudGlkYWQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVuc2FqZSA9ICdQb3NpYmxlIGVycm9yIGRlbCBzaXN0ZW1hJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdPb3BzLi4uJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdObyBzZSBoYSBsb2dyYWRvIHRyYXNwYXNhciBsb3Mgc3RvY2tzJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvb3RlcjogbWVuc2FqZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0YSgnZGFuZ2VyJywgJ0VsIHN0b2NrIGFjdHVhbCBwYXJhIGVzdGUgcHJvZHVjdG8gZW4gbGEgYm9kZWdhIGVzIDAnKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvL0Z1bmNpw7NuIHF1ZSBwZXJtaXRlIGFjdHVhbGl6YXIgZWwgc3RvY2sgZGUgdW4gcHJvZHVjdG8gZW4gbGEgZGlyZWNjacOzbiBSZWdpb25hbA0KICAgICAgICByZWNpYmlyRGlyZWNjaW9uKGNvZGlnb0JhcnJhLCBjYW50aWRhZCl7DQogICAgICAgICAgICBsZXQgY29uZmlnID0gew0KICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMudG9rZW4NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmF4aW9zLnB1dChgYXBpL2FjdHVhbGl6YVN0b2NrbWFzLyR7Y29kaWdvQmFycmF9YCwge2NhbnRpZGFkOiBjYW50aWRhZH0sIGNvbmZpZykNCiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU2UgaGEgcmVhbGl6YWRvIHVuIHRyYXNwYXNvIGRlIHN0b2NrIGEgRGlyZWNjacOzbiBSZWdpb25hbCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NlbGVjY2lvbmUgT2sgcGFyYSBjb250aW51YXInLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJw0KICAgICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3R1YWxpemFyU3RvY2tzUHJvZHVjdG9Cb2RlZ2EoY29kaWdvQmFycmEsIGNhbnRpZGFkKQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVuc2FqZSA9ICdQb3NpYmxlIGVycm9yIGRlbCBzaXN0ZW1hJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7DQogICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLA0KICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdPb3BzLi4uJywNCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdObyBzZSBoYSBsb2dyYWRvIHJlY2liaXIgZWwgc3RvY2sgZW4gZGlyZWNjacOzbiByZWdpb25hbCcsDQogICAgICAgICAgICAgICAgICAgICAgICBmb290ZXI6IG1lbnNhamUNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIC8vRnVuY2nDs24gcXVlIGFjdHVhbGl6YSBsb3Mgc3RvY2sgZW4gbGEgdmlzdGEgZGUgbGEgcMOhZ2luYQ0KICAgICAgICBhY3R1YWxpemFyU3RvY2tzUHJvZHVjdG9Cb2RlZ2EoY29kaWdvQmFycmEsIGNhbnRpZGFkKXsNCiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5lbnZpYXIuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5jb2RpZ29CYXJyYSA9PSBjb2RpZ29CYXJyYSk7DQogICAgICAgICAgICB0aGlzLmVudmlhcltpbmRleF0uc3RvY2tCb2RlZ2EgPSB0aGlzLmVudmlhcltpbmRleF0uc3RvY2tCb2RlZ2EgLSBwYXJzZUludChjYW50aWRhZCkNCiAgICAgICAgICAgIHRoaXMuZW52aWFyW2luZGV4XS5zdG9jayA9IHRoaXMuZW52aWFyW2luZGV4XS5zdG9jayArIHBhcnNlSW50KGNhbnRpZGFkKQ0KICAgICAgICB9LA0KICAgICAgICAvL0ZVTkNJw5NOIFFVRSBCVVNDQSBVTiBDT0RJR08gREUgTEEgVklTVEEgREUgQUdSRUdBUiBQUk9EVUNUTyBBIFVOQSBCT0RFR0EgDQogICAgICAgIGJ1c2NhckNvZGlnb0FHUkVHQURPKCl7DQogICAgICAgICAgICBjb25zdCBwb3NQcm9kID0gdGhpcy5wcm9kdWN0b3NBR1JFR0FSLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uY29kaWdvQmFycmEgPT0gdGhpcy5wcm9kdWN0b0FHUkVHQURPKQ0KICAgICAgICAgICAgaWYocG9zUHJvZCAhPT0gLTEpew0KICAgICAgICAgICAgICAgIHRoaXMubm9tYnJlUHJvZHVjdG9BR1JFR0FETyA9IHRoaXMucHJvZHVjdG9zQUdSRUdBUltwb3NQcm9kXS5ub21Qcm9kdWN0bw0KICAgICAgICAgICAgICAgIHRoaXMuY29kaWdvQUdSRUdBUiA9IHRoaXMucHJvZHVjdG9zQUdSRUdBUltwb3NQcm9kXS5jb2RpZ29CYXJyYTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgLy9GdW5jaW9uIHF1ZSBQRVJNSVRFIEFHUkVHQVIgdW4gUHJvZHVjdG8gYSB1bmEgQm9kZWdhIHJlY2llbnRlLg0KICAgICAgICBhZ3JlZ2FyUFJPRFVDVE9CT0RFR0EoKXsNCiAgICAgICAgICAgIGxldCBjb25maWcgPSB7DQogICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuYXhpb3MucG9zdCgnYXBpL2FncmVnYVByb2R1Y3RvQm9kZWdhJywge3N0b2NrQm9kZWdhOiB0aGlzLnN0b2NrQUdSRUdBRE8sIHN0b2NrQ3JpdGljbzogdGhpcy5zdG9ja0NyaXRpY29BR1JFR0FETywgbm9tQm9kZWdhOiB0aGlzLm5vbUJvZGVnYSwgY29kaWdvQmFycmE6IHRoaXMuY29kaWdvQUdSRUdBUn0sIGNvbmZpZykNCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIGlmKCFyZXMuZGF0YS5zcWxNZXNzYWdlKXsNCiAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKA0KICAgICAgICAgICAgICAgICAgICAgICAgJ1NlIGhhIGdlbmVyYWRvIHVuIG51ZXZvIFByb2R1Y3RvJywNCiAgICAgICAgICAgICAgICAgICAgICAgICdTZWxlY2Npb25lIE9rIHBhcmEgY29udGludWFyJywNCiAgICAgICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJw0KICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7DQogICAgICAgICAgICAgICAgICAgIGljb246ICdlcnJvcicsDQogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnT29wcy4uLicsDQogICAgICAgICAgICAgICAgICAgIHRleHQ6ICdDb2RpZ28geWEgZXhpc3RlbnRlIGVuIGJvZGVnYScsDQogICAgICAgICAgICAgICAgICAgIGZvb3RlcjogJ0Vycm9yIGNvbiBlbCBpbmdyZXNvIGRlbCBQcm9kdWN0bycNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7DQogICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLA0KICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdPb3BzLi4uJywNCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdObyBzZSBoYSBjcmVhZG8gZXN0ZSBudWV2byB0aXBvJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvb3RlcjogJ1Bvc2libGUgZXJyb3IgZGVsIHNpc3RlbWEnDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgLy9GdW5jaW9uZXMgZGUgbGFzIGFsZXJ0YXMNCiAgICAgICAgY291bnREb3duQ2hhbmdlZChkaXNtaXNzQ291bnREb3duKSB7DQogICAgICAgICAgICB0aGlzLmRpc21pc3NDb3VudERvd24gPSBkaXNtaXNzQ291bnREb3duDQogICAgICAgIH0sDQogICAgICAgIHNob3dBbGVydCgpIHsNCiAgICAgICAgICAgIHRoaXMuZGlzbWlzc0NvdW50RG93biA9IHRoaXMuZGlzbWlzc1NlY3MNCiAgICAgICAgfSwNCiAgICAgICAgYWxlcnRhKGNvbG9yLCB0ZXh0byl7DQogICAgICAgICAgICB0aGlzLm1lbnNhamUuY29sb3IgPSBjb2xvcjsNCiAgICAgICAgICAgIHRoaXMubWVuc2FqZS50ZXh0byA9IHRleHRvOw0KICAgICAgICAgICAgdGhpcy5zaG93QWxlcnQoKTsNCiAgICAgICAgfSwNCiAgICB9LA0KICAgIGFzeW5jIG1vdW50ZWQoKXsNCiAgICAgIGF3YWl0ICQoJyNib2RlZ2FzJykuRGF0YVRhYmxlKCkNCiAgICAgIGF3YWl0ICQoJyNvcmRlbmVzJykuRGF0YVRhYmxlKCkNCiAgICAgIGF3YWl0ICQoJyNkZXRhbGxlT3JkZW4nKS5EYXRhVGFibGUoKQ0KICAgICAgYXdhaXQgJCgnI2VudmlhcicpLkRhdGFUYWJsZSgpDQogICAgfSwNCiAgICB3YXRjaDogew0KICAgICAgYm9kZWdhcyh2YWwpIHsNCiAgICAgICAgaWYodGhpcy5wZXN0YcOxYSA9PT0gJ2JvZGVnYXMnKXsNCiAgICAgICAgICAkKCcjYm9kZWdhcycpLkRhdGFUYWJsZSgpLmRlc3Ryb3koKTsNCiAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKT0+IHsNCiAgICAgICAgICAgICQoJyNib2RlZ2FzJykuRGF0YVRhYmxlKCkNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIG9yZGVuZXModmFsKSB7DQogICAgICAgIGlmKHRoaXMucGVzdGHDsWEgPT09ICdvcmRlbmVzJyl7DQogICAgICAgICAgJCgnI29yZGVuZXMnKS5EYXRhVGFibGUoKS5kZXN0cm95KCk7DQogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCk9PiB7DQogICAgICAgICAgICAkKCcjb3JkZW5lcycpLkRhdGFUYWJsZSgpDQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBkZXRhbGxlT3JkZW4odmFsKSB7DQogICAgICAgIGlmKHRoaXMucGVzdGHDsWEgPT09ICdkZXRhbGxlT3JkZW4nKXsNCiAgICAgICAgICAkKCcjZGV0YWxsZU9yZGVuJykuRGF0YVRhYmxlKCkuZGVzdHJveSgpOw0KICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpPT4gew0KICAgICAgICAgICAgJCgnI2RldGFsbGVPcmRlbicpLkRhdGFUYWJsZSgpDQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBlbnZpYXIodmFsKSB7DQogICAgICAgIGlmKHRoaXMucGVzdGHDsWEgPT09ICdlbnZpYXInKXsNCiAgICAgICAgICAkKCcjZW52aWFyJykuRGF0YVRhYmxlKCkuZGVzdHJveSgpOw0KICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpPT4gew0KICAgICAgICAgICAgJCgnI2VudmlhcicpLkRhdGFUYWJsZSgpDQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQp9DQo="},{"version":3,"sources":["bodegas.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyRA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bodegas.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div class=\"menu\">\r\n        <navbar />\r\n        <b-container><br>\r\n            <h1 class=\"mt-2\">Administración de Bodegas</h1>\r\n            <h2 class=\"mt-1\" v-if=\"pestaña === 'bodegas'\"> Listado de Bodegas</h2>\r\n            <h2 class=\"mt-1\" v-if=\"pestaña === 'ordenes'\"> Listado de Ordenes de la Bodega: {{nomBodega}}</h2>\r\n            <b-alert\r\n              :show=\"dismissCountDown\"\r\n              dismissible\r\n              :variant=\"mensaje.color\"\r\n              @dismissed=\"dismissCountDown=0\"\r\n              @dismiss-count-down=\"countDownChanged\"\r\n              >\r\n              {{mensaje.texto}}\r\n            </b-alert>\r\n            <div class=\"mt-1\">\r\n                <b-row v-if=\"pestaña === 'bodegas'\">\r\n                    <b-col cols=\"12\" md=\"6\">\r\n                        <b-button @click=\"ActCrear()\" class=\"btn-success btn boton mt-5\">Rellenar Bodega</b-button>\r\n                    </b-col>\r\n                    <b-col cols=\"12\" md=\"6\" v-if=\"agregar === 'no'\">\r\n                        <b-button @click=\"ActAgregar()\" variant=\"primary\" class=\"btn boton mt-5\">Agregar Bodega</b-button>\r\n                    </b-col>\r\n                    <b-col cols=\"12\" md=\"6\" v-if=\"agregar === 'si'\">\r\n                        <b-button @click=\"NoAgregar()\" class=\"btn boton mt-5\">No Agregar</b-button>\r\n                    </b-col>\r\n                </b-row>\r\n                <div v-if=\"pestaña === 'bodegas'\">\r\n                    <b-row class=\"m-4\" v-if=\"agregar === 'si'\">\r\n                        <b-col cols=\"12\" md=\"6\">\r\n                            <label for=\"exampleInputEmail1\" class=\"form-label\">Nueva Bodega</label>\r\n                            <input type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"$v.nuevaBodega.$model\">\r\n                            <p class=\"text-danger\" v-if=\"$v.nuevaBodega.$error\">Debe Ingresar el nombre de la Bodega</p>\r\n                        </b-col>\r\n                        <b-col cols=\"12\" md=\"6\">\r\n                            <b-button @click=\"agregaBodega()\" variant=\"primary\" class=\"btn boton mt-5\">Agregar Bodega</b-button>\r\n                        </b-col>\r\n                    </b-row>\r\n                </div>\r\n                <table class=\"table table-striped table-dark table-responsive-lg table-responsive-md\" id=\"bodegas\" v-if=\"pestaña === 'bodegas'\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th scope=\"col\">Nombre de la Bodega</th>\r\n                      <th scope=\"col\">Enviar a Dirección</th>\r\n                      <th scope=\"col\">Ordenes de Compra</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"i in bodegas\" :key=\"i.nomBodega\">\r\n                      <td scope=\"row\">{{i.nomBodega}}</td>\r\n                      <td><b-button @click=\"ActProductos(i.nomBodega)\" class=\"btn-warning btn-sm\" style=\"border-color: white;\">Enviar</b-button></td>\r\n                      <td><b-button @click=\"ActOrdenes(i.nomBodega)\" class=\"btn-success btn-sm\" style=\"border-color: white;\">Ordenes</b-button></td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n                <b-button @click=\"Volver()\" class=\"btn boton mt-5\" v-if=\"pestaña === 'crear'\">Volver al Listado de Bodegas</b-button>\r\n                <div class=\" card mt-4\" v-if=\"pestaña === 'crear'\">\r\n                    <div class=\"card-header\">\r\n                        <h2>Determine que productos serán enviados a la Bodega</h2>\r\n                    </div>\r\n                    <div class=\"card-body\">\r\n                        <b-row class=\"mt-2\">\r\n                            <b-col cols=\"12\" md=\"3\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Bodega</label>\r\n                                <select @change=\"cambiaBodega()\" class=\"form-control\" v-model=\"bodegaCrear\">\r\n                                    <option v-for=\"i in bodegas\" :key=\"i.nomBodega\" :value=\"i.nomBodega\">{{i.nomBodega}}</option>\r\n                                </select>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"2\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Proveedor</label>\r\n                                <input type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"$v.proveedor.$model\">\r\n                                <p class=\"text-danger\" v-if=\"$v.proveedor.$error\">Debe Ingresar el proveedor</p>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"3\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Numero de Orden</label>\r\n                                <input type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"$v.nuevaOrden.$model\">\r\n                                <p class=\"text-danger\" v-if=\"$v.nuevaOrden.$error\">Debe Ingresar el numero de la Orden</p>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"2\">\r\n                                <b-button @click=\"agregaProducto()\" variant=\"primary\" class=\"btn-primary btn boton\">Agregar Producto</b-button>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"2\">\r\n                                <b-button @click=\"quitarProducto()\" class=\"btn-danger btn boton\">Quitar Producto</b-button>\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mt-2\" v-for=\"i in productos\" :key=\"i.key\">\r\n                            <b-col cols=\"12\" md=\"3\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Codigo de Barra</label>\r\n                                <input type=\"text\" @input=\"buscarPorCodigo(i.codigoBarra, i.key, i.codBar)\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"i.codigoBarra\"> \r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"3\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Producto</label>\r\n                                <select disabled class=\"form-control\" @click=\"anterior(i.nomProducto)\" @change=\"cambioProducto(i.nomProducto, i.key)\" v-model=\"i.nomProducto\">\r\n                                    <option v-for=\"i in prods\" :key=\"i.codBar\" :value=\"i.nomProducto\">{{i.nomProducto}}</option>\r\n                                </select>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"1\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Cantidad</label>\r\n                                <input type=\"number\" @change=\"cantMin(i.key)\" min=\"1\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"i.cantidad\">\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"2\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Stock en Bodega</label>\r\n                                <input disabled type=\"number\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"i.stock\">\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"1\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Critico</label>\r\n                                <input disabled type=\"number\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"i.stockCritico\">\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"2\">\r\n                                <b-button @click=\"detalles(i.codBar)\" v-b-modal.modal-1 class=\"btn-success boton\">Detalles Producto</b-button>\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row>\r\n                            <b-col cols=\"12\" md=\"6\">\r\n                                <b-button @click=\"generarInforme()\" class=\"btn-success btn boton mt-5\">Generar Orden de Compra</b-button>\r\n                            </b-col> \r\n                            <b-col cols=\"12\" md=\"6\">\r\n                                <b-button @click=\"sumaStock()\" class=\"btn-success btn boton mt-5\">Compra en Caja Menor</b-button>\r\n                            </b-col> \r\n                        </b-row>\r\n                    </div>\r\n                </div>\r\n                <b-modal id=\"modal-1\" size=\"lg\" title=\"Detalles del Producto\">\r\n                    <div class=\"card-body\">\r\n                        <b-row class=\"mt-2\">\r\n                            <b-col cols=\"12\" md=\"4\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Codigo de Barras</label>\r\n                                <input disabled type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"codigo\">\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"4\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Nombre</label>\r\n                                <input disabled type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"producto\">\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"4\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Marca</label>\r\n                                <input disabled type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"marca\">\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mt-4\">\r\n                            <b-col cols=\"12\" md=\"12\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Descripcion</label>\r\n                                <textarea disabled type=\"text\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" v-model=\"descripcion\"></textarea>\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mt-5\">\r\n                            <b-col cols=\"12\" md=\"12\">\r\n                                <img :src=\"imagenDir\" id=\"imagenEdita\">\r\n                            </b-col>\r\n                        </b-row>\r\n                    </div>\r\n                </b-modal>\r\n\r\n                <b-row v-if=\"pestaña === 'ordenes'\">\r\n                    <b-col cols=\"12\" md=\"12\">\r\n                        <b-button @click=\"Volver()\" class=\"btn btn boton mt-5\">Volver al Listado de Bodegas</b-button>\r\n                    </b-col>\r\n                </b-row>\r\n                <table class=\"table table-striped table-dark table-responsive-lg table-responsive-md\" id=\"ordenes\" v-if=\"pestaña === 'ordenes'\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th scope=\"col\">Codigo de Orden</th>\r\n                      <th scope=\"col\">Bodega</th>\r\n                      <th scope=\"col\">Proveedor</th>\r\n                      <th scope=\"col\">Fecha</th>\r\n                      <th scope=\"col\">Ver al Detalle</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"i in ordenes\" :key=\"i.codOrden\">\r\n                      <td scope=\"row\">{{i.codOrden}}</td>\r\n                      <td>{{i.nomBodega}}</td>\r\n                      <td>{{i.proveedor}}</td>\r\n                      <td>{{i.fecha}}</td>\r\n                      <td><b-button @click=\"ActDOrdenes(i.codOrden)\" class=\"btn-success btn-sm\" style=\"border-color: white;\">Detalles</b-button></td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n\r\n                <b-row v-if=\"pestaña === 'detalleOrden'\">\r\n                    <b-col cols=\"12\" md=\"12\">\r\n                        <b-button @click=\"VolverORD()\" class=\"btn btn boton mt-5\">Volver al Historial</b-button>\r\n                    </b-col>\r\n                </b-row>\r\n                <table class=\"table table-striped table-dark table-responsive-lg table-responsive-md\" id=\"detalleOrden\" v-if=\"pestaña === 'detalleOrden'\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th scope=\"col\">ID</th>\r\n                      <th scope=\"col\">Codigo Barra</th>\r\n                      <th scope=\"col\">Producto</th>\r\n                      <th scope=\"col\">Cantidad</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"i in detalleOrden\" :key=\"i.corrOrdenProducto\">\r\n                      <td scope=\"row\">{{i.corrOrdenProducto}}</td>\r\n                      <td>{{i.codigoBarra}}</td>\r\n                      <td>{{i.nomProducto}}</td>\r\n                      <td>{{i.cantidad}}</td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n\r\n                <b-row v-if=\"pestaña === 'enviar'\">\r\n                    <b-col cols=\"12\" md=\"6\">\r\n                        <b-button @click=\"Volver()\" class=\"btn btn boton mt-5\">Volver al Listado de Bodegas</b-button>\r\n                    </b-col>\r\n                    <b-col cols=\"12\" md=\"6\">\r\n                        <b-button @click=\"ActAgregarProd()\" class=\"btn btn-success boton mt-5\">Agregar nuevo Producto</b-button>\r\n                    </b-col>\r\n                </b-row>\r\n                <table class=\"table table-striped table-dark table-responsive-lg table-responsive-md\" id=\"enviar\" v-if=\"pestaña === 'enviar'\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th scope=\"col\">Codigo Barra</th>\r\n                      <th scope=\"col\">Nombre Producto</th>\r\n                      <th scope=\"col\">Stock Regional</th>\r\n                      <th scope=\"col\">Stock Bodega</th>\r\n                      <th scope=\"col\">Cantidad</th>\r\n                      <th scope=\"col\">Stock Critico</th>\r\n                      <th scope=\"col\">Enviar a Dirección</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"i in enviar\" :key=\"i.codigoBarra\">\r\n                      <td scope=\"row\">{{i.codigoBarra}}</td>\r\n                      <td>{{i.nomProducto}}</td>\r\n                      <td>{{i.stock}}</td>\r\n                      <td>{{i.stockBodega}}</td>\r\n                      <td><input type=\"number\" @change=\"cantMinBodega(i.codigoBarra)\" min=\"1\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"i.cantidad\"></td>\r\n                      <td>{{i.stockCritico}}</td>\r\n                      <td><b-button @click=\"EnviarDireccion(i.codigoBarra, i.cantidad, i.stockBodega)\" class=\"btn-success btn-sm\" style=\"border-color: white;\">Enviar</b-button></td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n\r\n                <b-row v-if=\"pestaña === 'agregarProducto'\">\r\n                    <b-col cols=\"12\" md=\"12\">\r\n                        <b-button @click=\"VolverEnviar()\" class=\"btn btn boton mt-5\">Volver al Listado de Bodegas</b-button>\r\n                    </b-col>\r\n                </b-row>\r\n                <div class=\"card mt-5\" v-if=\"pestaña === 'agregarProducto'\" style=\"border-color: black;\">\r\n                    <div class=\"card-header\">\r\n                        <h2>Agrega un Nuevo Producto a Bodega: {{nomBodega}}</h2>\r\n                    </div>\r\n                    <div class=\"card-body\">\r\n                        <b-row class=\"mt-2\">\r\n                            <b-col cols=\"12\" md=\"4\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Codigo del Producto</label>\r\n                                <input type=\"text\" @input=\"buscarCodigoAGREGADO()\" class=\"form-control\" aria-describedby=\"emailHelp\" v-model=\"$v.productoAGREGADO.$model\">\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"3\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Producto</label>\r\n                                <select disabled class=\"form-control\" v-model=\"$v.nombreProductoAGREGADO.$model\">\r\n                                    <option v-for=\"i in productosAGREGAR\" :key=\"i.codigoBarra\" :value=\"i.nomProducto\">{{i.nomProducto}}</option>\r\n                                </select>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"2\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Stock Bodega</label>\r\n                                <input type=\"number\" class=\"form-control\" @change=\"cantMinBodegaAgregar()\" aria-describedby=\"emailHelp\" v-model=\"$v.stockAGREGADO.$model\">\r\n                                <p class=\"text-danger\" v-if=\"$v.stockAGREGADO.$error\" >Es necesario ingresar este stock</p>\r\n                            </b-col>\r\n                            <b-col cols=\"12\" md=\"2\">\r\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Stock Critico</label>\r\n                                <input type=\"number\" class=\"form-control\" @change=\"cantMinCriticoAGREGAR()\" aria-describedby=\"emailHelp\" v-model=\"$v.stockCriticoAGREGADO.$model\">\r\n                                <p class=\"text-danger\" v-if=\"$v.stockCriticoAGREGADO.$error\" >Es necesario ingresar este stock</p>\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mt-2\">\r\n                            <b-col cols=\"12\" md=\"12\">\r\n                                <b-button @click=\"agregarPRODUCTOBODEGA()\" class=\"btn btn-success boton mt-5\">Agregar Producto</b-button>\r\n                            </b-col>\r\n                        </b-row>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </b-container>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport navbar from \"../components/navbar.vue\";\r\nimport { required, minLength} from \"vuelidate/lib/validators\";\r\n\r\nimport 'jquery/dist/jquery.min.js';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport \"datatables.net-dt/js/dataTables.dataTables\"\r\nimport \"datatables.net-dt/css/jquery.dataTables.min.css\"\r\nimport $ from 'jquery'; \r\n\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n    name: \"about\",\r\n    components: {\r\n        navbar,\r\n    },\r\n    data() {\r\n      return {\r\n        //Datos para agregar un nuevo memo (historial) con v-model\r\n        pestaña: 'bodegas',\r\n        agregar: 'no',\r\n        bodegas: [],\r\n        ordenes: [],\r\n        detalleOrden: [],\r\n        enviar: [],\r\n        imagenes: [],\r\n        //Variables del AGREGAR\r\n        nuevaBodega: '',\r\n        //Variable para reconocer una bodega\r\n        nomBodega: '',\r\n        //Datos para agregar una nueva Orden de Compra con v-model\r\n        bodegaCrear: '',\r\n        proveedor: '',\r\n        nuevaOrden: '',\r\n        cantidadProductos: 1,\r\n        productos: [{key: 1, nomProducto: '', cantidad: 0, stock: 0, stockCritico: 0, codigoBarra: '', codBar: '', marca: ''}],\r\n        prods: [],\r\n        productoAnt: '',\r\n        //VARIABLES DE DETALLES\r\n        codigo: '',\r\n        producto: '',\r\n        marca: '',\r\n        descripcion: '',\r\n        imagen: null,\r\n        imagenDir: '',\r\n        //VARIABLES PARA AGREGAR UN NUEVO PRODUCTO\r\n        productoAGREGADO: '',\r\n        nombreProductoAGREGADO: '',\r\n        stockAGREGADO: '',\r\n        stockCriticoAGREGADO: '',\r\n        productosAGREGAR: [],\r\n        codigoAGREGAR: '',\r\n        //Variables de las alertas\r\n        dismissSecs: 5,\r\n        dismissCountDown: 0,\r\n        mensaje: {color: '', texto: ''},\r\n      }\r\n    },\r\n    validations:{\r\n        //Validaciones de los input\r\n        nuevaBodega:{required},\r\n        proveedor:{required},\r\n        nuevaOrden:{required},\r\n        stockAGREGADO:{required},\r\n        stockCriticoAGREGADO:{required},\r\n        nombreProductoAGREGADO:{required}\r\n    },\r\n    computed: {\r\n      ...mapState(['token', 'usuarioDB'])\r\n    },\r\n    created(){\r\n        this.cargarBodegas();\r\n        this.obtenerImagenes();\r\n    },\r\n    methods:{\r\n        //METODOS PARA GENERAR LAS ORDENES DE COMPRA\r\n        //Metodo que Carga todos los productos del sistema\r\n        cargarProductos(primera){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get(`api/obtenerProductosBodega/${this.bodegaCrear}`, config)\r\n            .then(res => {\r\n                this.prods = res.data;\r\n                if(primera){\r\n                    this.productos[0].nomProducto = this.prods[0].nomProducto\r\n                    this.productos[0].stock = this.prods[0].stockBodega\r\n                    this.productos[0].stockCritico = this.prods[0].stockCritico\r\n                    this.productos[0].codigoBarra = this.prods[0].codigoBarra\r\n                    this.productos[0].codBar = this.prods[0].codigoBarra\r\n                    this.productos[0].marca = this.prods[0].marca\r\n                    if(this.productos[0].stock < this.productos[0].stockCritico){\r\n                        if(this.productos[0].stock === 0){\r\n                            this.alerta('danger', 'No hay stock disponible en bodega para el producto ' + this.productos[0].nomProducto)\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se han podido cargar los Productos');\r\n            })\r\n        },\r\n        //Función que carga los productos de una bodega para trasferir productos a Dirección Regional\r\n        cargarProductosBodega(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get(`api/obtenerProductosBodega/${this.nomBodega}`, config)\r\n            .then(res => {\r\n                for(var i = 0; i<res.data.length; i++){\r\n                    this.enviar.push({codigoBarra: res.data[i].codigoBarra, nomProducto: res.data[i].nomProducto, stock: res.data[i].stock, stockBodega: res.data[i].stockBodega, cantidad: 1, stockCritico: res.data[i].stockCritico})\r\n                }\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se han podido cargar los Productos');\r\n            })\r\n        },\r\n        //FUNCIÓN QUE CARGA TODOS LOS PRODUCTOS PARA AGREGARLO A UNA NUEVA BODEGA\r\n        cargarTODOSPRODUCTOS(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get(`api/obtenerProductosSolos`, config)\r\n            .then(res => {\r\n                this.productosAGREGAR = res.data;\r\n                this.nombreProductoAGREGADO = this.productosAGREGAR[0].nomProducto;\r\n                this.codigoAGREGAR = this.productosAGREGAR[0].codigoBarra;\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se han podido cargar los Productos');\r\n            })\r\n        },\r\n        //Función que permite re-cargar los productos al momento de cambiar la bodega en la vista de rellenar Bodega\r\n        cambiaBodega(){\r\n            for(var i = 0; i<this.productos.length-1; i++){\r\n                this.productos.splice(-1)\r\n            }\r\n            this.cargarProductos(true)\r\n        },\r\n        buscarPorCodigo(codigoBarra, key, codBar){\r\n            this.anterior(codBar)\r\n            const indexActual = this.productos.findIndex(item => item.key == key);\r\n            const posProd = this.prods.findIndex(item => item.codigoBarra == codigoBarra)\r\n            if(posProd !== -1){\r\n                this.cambioProducto(this.prods[posProd].codigoBarra, key)\r\n            }else{\r\n                this.productos[indexActual].codBar = this.productoAnt\r\n            }\r\n        },\r\n        //Función que te permite guardar el valor anterior del select\r\n        anterior(codBar){\r\n            this.productoAnt = codBar\r\n        },\r\n        //Si se cambia un producto se debe buscar su stock\r\n        cambioProducto(codigoBarra, key){\r\n            const indexActual = this.productos.findIndex(item => item.key == key);\r\n            var repetido = false;\r\n            for(var i = 0; i<this.productos.length; i++){\r\n                if(i != indexActual){\r\n                    if(this.productos[i].codBar === codigoBarra){\r\n                        repetido = true;\r\n                    }\r\n                }\r\n            }\r\n            if(!repetido){\r\n                const index = this.prods.findIndex(item => item.codigoBarra == codigoBarra);\r\n                const index2 = this.productos.findIndex(item => item.key == key);\r\n                this.productos[index2].stock = this.prods[index].stockBodega\r\n                this.productos[index2].stockCritico = this.prods[index].stockCritico\r\n                this.productos[index2].nomProducto = this.prods[index].nomProducto;\r\n                this.productos[index2].codigoBarra = this.prods[index].codigoBarra\r\n                this.productos[index2].codBar = this.prods[index].codigoBarra\r\n                this.productos[index2].marca = this.prods[index].marca\r\n                if(this.productos[index2].cantidad > this.productos[index2].stock){\r\n                    this.productos[index2].cantidad = this.productos[index2].stock;\r\n                }\r\n                if(this.productos[index2].stock + this.productos[index2].cantidad < this.productos[index2].stockCritico){\r\n                    if(this.productos[index2].stock){\r\n                        this.alerta('danger', 'El existe stock en bodega para el producto ' + this.productos[index2].nomProducto)\r\n                    }\r\n                    this.alerta('danger', 'El stock que existe actualmente en bodega del producto \"' + this.productos[index2].nomProducto + '\" es inferior al stock crítico')\r\n                }\r\n            }else{\r\n                this.productos[indexActual].codBar = this.productoAnt  \r\n            }\r\n        },\r\n        //Se agrega un nuevo posible producto\r\n        //ADEMAS debe revisar si los valores anteriores estan repetidos\r\n        agregaProducto(){\r\n            this.cantidadProductos++\r\n            var a = 0;\r\n            this.productos.push({key: this.cantidadProductos, nomProducto: '', cantidad: 0, stock: 0, codigoBarra: '', codBar: '', marca: ''});\r\n            while(a < this.prods.length){\r\n                const index = this.productos.findIndex(item => item.codBar == this.prods[a].codigoBarra);\r\n                if(index != -1){\r\n                    a++;\r\n                }else{\r\n                    this.productos[this.productos.length-1].nomProducto = this.prods[a].nomProducto\r\n                    this.productos[this.productos.length-1].stock = this.prods[a].stockBodega\r\n                    this.productos[this.productos.length-1].stockCritico = this.prods[a].stockCritico\r\n                    this.productos[this.productos.length-1].codigoBarra = this.prods[a].codigoBarra\r\n                    this.productos[this.productos.length-1].codBar = this.prods[a].codigoBarra\r\n                    this.productos[this.productos.length-1].marca = this.prods[a].marca\r\n                    this.productos[this.productos.length-1].key = this.cantidadProductos\r\n                    break;\r\n                }\r\n                if(a == this.prods.length){\r\n                    this.cantidadProductos--;\r\n                    this.productos.splice(-1);\r\n                    this.alerta('danger','No existen mas productos para agregar')\r\n                    break;\r\n                }\r\n            } \r\n            if(this.productos[this.productos.length-1].stock < this.productos[this.productos.length-1].stockCritico && a != this.prods.length){\r\n                this.alerta('danger', 'El stock que existe actualmente en bodega del producto \"' + this.productos[this.productos.length-1].nomProducto + '\" es inferior al stock crítico')\r\n            }\r\n        },\r\n        //Se quita un Producto de los que serán agregados al sistema\r\n        quitarProducto(){\r\n            if(this.productos.length > 1){\r\n                this.cantidadProductos--;\r\n                this.productos.splice(-1);\r\n            }else{\r\n                this.alerta('danger', 'Tiene que existir al menos 1 producto');\r\n            }\r\n        },\r\n        //Indicamos el minimo de cantidad para que no este vacio o sea menor a 0\r\n        cantMin(producto){\r\n            const index = this.productos.findIndex(item => item.key == producto);\r\n            if(this.productos[index].cantidad < 0 || this.productos[index].cantidad == ''){\r\n                this.productos[index].cantidad = 0;\r\n            }\r\n            if(this.productos[index].stock + parseInt(this.productos[index].cantidad) < this.productos[index].stockCritico){\r\n                this.alerta('danger', 'El stock que existe actualmente en bodega del producto \"' + this.productos[index].nomProducto + '\" es inferior al stock crítico ingrese mas cantidad para cumplir con el stock Crítico')\r\n            }\r\n        },\r\n        //Indicamos el minimo de cantidad para que no este vacio o sea menor a 0\r\n        cantMinBodega(producto){\r\n            const index = this.enviar.findIndex(item => item.codigoBarra == producto);\r\n            if(this.enviar[index].cantidad < 0){\r\n                this.enviar[index].cantidad = 0;\r\n            }\r\n            if(this.enviar[index].stockBodega - parseInt(this.enviar[index].cantidad) < this.enviar[index].stockCritico){\r\n                this.alerta('danger', 'Si realiza esta acción el stock en bodega del producto \"' + this.enviar[index].nomProducto + '\" sera inferior al stock crítico')\r\n            }\r\n        },\r\n        //Función que maneja valores del input de stock de bodega PARA AGREGAR UN PRODUCTO A UNA NUEVA BODEGA\r\n        cantMinBodegaAgregar(){\r\n            if(this.stockAGREGADO < 0){\r\n                this.stockAGREGADO = 0;\r\n            }\r\n            if(this.stockAGREGADO < this.stockCriticoAGREGADO){\r\n                this.alerta('danger', 'El stock que esta ingresando es menor al critico para la bodega ' + this.nomBodega)\r\n            }\r\n        },\r\n        cantMinCriticoAGREGAR(){\r\n            if(this.stockCriticoAGREGADO < 0){\r\n                this.stockCriticoAGREGADO = 0;\r\n            }\r\n            if(this.stockCriticoAGREGADO > this.stockAGREGADO ){\r\n                this.alerta('danger', 'El stock que esta ingresando es menor al critico para la bodega ' + this.nomBodega)\r\n            }\r\n        },\r\n        //Permite ver los detalles de un producto y los carga\r\n        detalles(id){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get(`api/obtenerProducto/${id}`, config)\r\n                .then(res => {\r\n                    this.codigo = res.data[0].codigoBarra;\r\n                    this.producto = res.data[0].nomProducto;\r\n                    this.marca = res.data[0].marca;\r\n                    this.descripcion = res.data[0].descripcion\r\n                    for(var i = 0; i<this.imagenes.length; i++){\r\n                        if(this.imagenes[i].split('.')[0] == this.codigo){\r\n                            this.imagenDir = 'http://localhost:3000/dbImagenes/' + this.imagenes[i]\r\n                            break;\r\n                        }else{\r\n                            this.imagenDir = 'http://localhost:3000/dbImagenes/no-imagen.png'\r\n                        }\r\n                    }\r\n                })\r\n                .catch(e => {\r\n                    Swal.fire({\r\n                    icon: 'error',\r\n                    title: 'Oops...',\r\n                    text: 'No se ha logrado encontrar los datos del equipo',\r\n                    footer: 'Posible error del sistema'\r\n                    })\r\n                })\r\n        },\r\n        //Función que obtiene una imagen\r\n        obtenerImagenes(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n             this.axios.get(`api/obtenerImagen`, config)\r\n                .then(res => {\r\n                    this.imagenes = res.data\r\n                })\r\n                .catch(e => {\r\n                    this.alerta('danger', 'Este producto no posee imagen o no ha cargado correctamente')\r\n                })\r\n\r\n        },\r\n        convertDateMysql(yourDate){\r\n            yourDate.toISOString().split('T')[0]\r\n            const offset = yourDate.getTimezoneOffset()\r\n            yourDate = new Date(yourDate.getTime() - (offset*60*1000))\r\n            return yourDate.toISOString().split('T')[0]\r\n\t\t},\r\n        //Función que permite generar un informe y enviar los datos de un nuevo HISTORIAL \r\n        generarInforme(){\r\n            var dt = this.convertDateMysql(new Date())\r\n            var sumaStockBodega = 0;\r\n            var suma = 0;\r\n            for(var i = 0; i < this.productos.length; i++){\r\n                sumaStockBodega = sumaStockBodega + this.productos[i].stock\r\n                suma = suma + this.productos[i].cantidad\r\n            }\r\n            this.$v.$touch()\r\n            if(!this.$v.nuevaOrden.$invalid && !this.$v.proveedor.$invalid){\r\n                swal.fire({\r\n                title: '¿Seguro que desea realizar la orden de compra a la bodega ' + this.bodegaCrear + '?',\r\n                type: 'warning',\r\n                showCancelButton: true,\r\n                confirmButtonColor: '#3085d6',\r\n                cancelButtonColor: '#d33',\r\n                cancelButtonText: 'Cancelar',\r\n                confirmButtonText: '¡Si!'\r\n                }).then((result) => {\r\n                    if (result.value) {\r\n                        if(sumaStockBodega > 0 && suma > 0){\r\n                            let config = {\r\n                                headers: {\r\n                                    token: this.token\r\n                                }\r\n                            }\r\n                            this.axios.post('api/agregaOrdenEntrega', {codOrden: this.nuevaOrden, proveedor: this.proveedor, fecha: dt, nomBodega: this.bodegaCrear}, config)\r\n                            .then(res => {\r\n                            if(!res.data.sqlMessage){\r\n                                this.ORDENProducto();\r\n                                this.sumaStock();\r\n                            }else{\r\n                                Swal.fire({\r\n                                icon: 'error',\r\n                                title: 'Oops...',\r\n                                text: 'No se ha logrado crear ',\r\n                                footer: 'Algún dato ha sido incorrecto verifiquelos'\r\n                                })\r\n                            }\r\n                            })\r\n                            .catch(e => {\r\n                            Swal.fire({\r\n                                icon: 'error',\r\n                                title: 'Oops...',\r\n                                text: 'No se ha logrado registrar la orden de compra',\r\n                                footer: 'Posible error del sistema'\r\n                            })\r\n                            }) \r\n                        }else if(sumaStockBodega > 0){\r\n                            this.alerta('danger', 'No se encuentra stock disponible en bodega')\r\n                        }else{\r\n                            this.alerta('danger', 'No se ha ingresado ninguna cantidad')\r\n                        }\r\n                    }\r\n                })\r\n            }else{\r\n                this.alerta('danger', 'Porfavor ingrese todos los campos requeridos')\r\n            }\r\n        },\r\n        //Registra los productos de la ORDEN DE COMPRA\r\n        ORDENProducto(){\r\n            for(var i = 0; i<this.productos.length; i++){\r\n                if(this.productos[i].cantidad > 0){\r\n                    let config = {\r\n                        headers: {\r\n                            token: this.token\r\n                        }\r\n                    }\r\n                    this.axios.post('api/agregaOrdenProducto', {cantidad: this.productos[i].cantidad, codOrden: this.nuevaOrden, codigoBarra: this.productos[i].codBar}, config)\r\n                        .then(res => {\r\n                        if(!res.data.sqlMessage){\r\n                            Swal.fire(\r\n                            'Se ha registrado la orden de compra satisfactoriamente',\r\n                            'Seleccione Ok para continuar',\r\n                            'success'\r\n                            )\r\n                        }else{\r\n                            Swal.fire({\r\n                                icon: 'error',\r\n                                title: 'Oops...',\r\n                                text: 'No se ha logrado crear ',\r\n                                footer: 'Algún dato ha sido incorrecto verifiquelos'\r\n                            })\r\n                        }\r\n                        })\r\n                        .catch(e => {\r\n                            Swal.fire({\r\n                                icon: 'error',\r\n                                title: 'Oops...',\r\n                                text: 'No se ha logrado registrar la orden de compra',\r\n                                footer: 'Posible error del sistema'\r\n                            })\r\n                        })\r\n                }\r\n            }\r\n        },\r\n\r\n        //Suma los stock de BODEGA de cada producto\r\n        sumaStock(){\r\n            for(var i = 0; i<this.productos.length; i++){\r\n                if(this.productos[i].cantidad > 0){\r\n                    let config = {\r\n                        headers: {\r\n                            token: this.token\r\n                        }\r\n                    }\r\n                    this.axios.put(`api/actualizaStockBodegamas/${this.productos[i].codBar}`, {cantidad: this.productos[i].cantidad, nomBodega: this.bodegaCrear}, config)\r\n                        .then(res => {\r\n                            this.actualizarStock();\r\n                        })\r\n                        .catch(e => {\r\n                            var mensaje = 'Posible error del sistema';\r\n                            Swal.fire({\r\n                            icon: 'error',\r\n                            title: 'Oops...',\r\n                            text: 'No se ha logrado registrar la entrega de insumos',\r\n                            footer: mensaje\r\n                            })\r\n                        })\r\n                }\r\n            }\r\n        },\r\n        //Actualiza la pagina tras generar una orden de compra\r\n        actualizarStock(){\r\n            for(var i = 0; i<this.productos.length-1; i++){\r\n                this.cantidadProductos--;\r\n                this.productos.splice(-1);\r\n            }\r\n            this.cargarProductos(true);\r\n        },\r\n        //Función para cargar las bodegas del sistema\r\n        cargarBodegas(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get('api/obtenerbodegas', config)\r\n            .then(res => {\r\n                this.bodegas = res.data;\r\n                this.bodegaCrear = res.data[0].nomBodega\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se han podido cargar las bodegas');\r\n            })\r\n        },\r\n        //Función para regresar a la vista principal\r\n        Volver(){\r\n            this.pestaña = 'bodegas'\r\n            $('#ordenes').DataTable().destroy()\r\n            $('#enviar').DataTable().destroy()\r\n            this.enviar = []\r\n            $('#bodegas').DataTable()\r\n            this.cargarBodegas();\r\n        },\r\n        VolverORD(){\r\n            $('#detalleOrden').DataTable().destroy();\r\n            this.pestaña = 'ordenes'\r\n            this.cargarOrdenes();\r\n            $('#ordenes').DataTable()\r\n        },\r\n        //Volver desde la vista de agregar un nuevo producto a la vista del despliegue de los proeductos de una bodega\r\n        VolverEnviar(){\r\n            this.pestaña = 'enviar'\r\n            $('#enviar').DataTable()\r\n            this.enviar = [];\r\n            this.cargarProductosBodega();\r\n        },\r\n        //Funciones para cambiar las vistas\r\n        ActAgregar(){\r\n            this.agregar = 'si'\r\n        },\r\n        NoAgregar(){\r\n            this.agregar = 'no'\r\n        },\r\n        //Activadores de vistas \r\n        ActOrdenes(nomBodega){\r\n            this.nomBodega = nomBodega\r\n            this.pestaña = 'ordenes'\r\n            $('#bodegas').DataTable().destroy();\r\n            $('#ordenes').DataTable()\r\n            this.cargarOrdenes();\r\n        },\r\n        ActDOrdenes(codOrden){\r\n            this.histo = codOrden;\r\n            this.pestaña = 'detalleOrden';\r\n            $('#ordenes').DataTable().destroy();\r\n            $('#detalleOrden').DataTable()\r\n            this.cargarDetalleOrden();\r\n        },\r\n        ActCrear(){\r\n            this.pestaña = 'crear'\r\n            this.agregar = 'no'\r\n            $('#bodegas').DataTable().destroy();\r\n            this.cargarProductos(true);\r\n        },\r\n        ActProductos(nomBodega){\r\n            this.nomBodega = nomBodega\r\n            this.pestaña = 'enviar'\r\n            $('#bodegas').DataTable().destroy();\r\n            $('#enviar').DataTable()\r\n            this.cargarProductosBodega();\r\n        },\r\n        ActAgregarProd(){\r\n            this.pestaña = 'agregarProducto'\r\n            $('#enviar').DataTable().destroy();\r\n            this.cargarTODOSPRODUCTOS();\r\n            this.productoAGREGADO = '';\r\n            this.stockCriticoAGREGADO = 1;\r\n            this.stockAGREGADO = 1;\r\n        },\r\n        //Funciones de AGREGAR\r\n        agregaBodega(){\r\n            this.$v.$touch()\r\n            if(!this.$v.nuevaBodega.$invalid){\r\n                let config = {\r\n                    headers: {\r\n                        token: this.token\r\n                    }\r\n                }\r\n                this.axios.post('api/agregaBodega', {nomBodega: this.nuevaBodega}, config)\r\n                    .then(res => {\r\n                        if(!res.data.sqlMessage){\r\n                            this.bodegas.push({nomBodega: this.nuevaBodega})\r\n                            Swal.fire(\r\n                            'Se ha registrado la bodega satisfactoriamente',\r\n                            'Seleccione Ok para continuar',\r\n                            'success'\r\n                            )\r\n                        }else{\r\n                            Swal.fire({\r\n                                icon: 'error',\r\n                                title: 'Oops...',\r\n                                text: 'No se ha logrado crear la nueva bodega \"' + this.nuevaBodega + '\" .',\r\n                                footer: 'El nombre de la bodega ya existe en el sistema'\r\n                            })\r\n                        }\r\n                        })\r\n                        .catch(e => {\r\n                            Swal.fire({\r\n                                icon: 'error',\r\n                                title: 'Oops...',\r\n                                text: 'No se ha logrado registrar la nueva bodega',\r\n                                footer: 'Posible error del sistema'\r\n                            })\r\n                        })\r\n            }else{\r\n                this.alerta('danger', 'Porfavor ingrese un nombre para la nueva bodega')\r\n            }\r\n        },\r\n        //TABLA DE ORDENES QUE POSEE UNA BODEGA\r\n        cargarOrdenes(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get(`api/obtenerOrdenesBodega/${this.nomBodega}`, config)\r\n            .then(res => {\r\n                this.ordenes = res.data;\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se ha logrado cargar la orden');\r\n            })\r\n        },\r\n        //Cargar los detalles de una orden\r\n        cargarDetalleOrden(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.get(`api/obtenerOrden/${this.histo}`, config)\r\n            .then(res => {\r\n                this.detalleOrden = res.data;\r\n            })\r\n            .catch(e => {\r\n                this.alerta('danger', 'No se ha logrado cargar el detalle de una orden');\r\n            })\r\n        },\r\n        //Función que envia un stock desde bodega a Dirección Regional\r\n        EnviarDireccion(codigoBarra, cantidad, stockBodega){\r\n            if(stockBodega > 0){\r\n                swal.fire({\r\n                    title: '¿Seguro que desea enviar el stock de la bodega con una cantidad de \"' + cantidad + '\" a dirección regional para el producto de codigo: \"' + codigoBarra + '\"?',\r\n                    type: 'warning',\r\n                    showCancelButton: true,\r\n                    confirmButtonColor: '#3085d6',\r\n                    cancelButtonColor: '#d33',\r\n                    cancelButtonText: 'Cancelar',\r\n                    confirmButtonText: '¡Si!'\r\n                }).then((result) => {\r\n                    if (result.value) {\r\n                        let config = {\r\n                            headers: {\r\n                                token: this.token\r\n                            }\r\n                        }\r\n                        this.axios.put(`api/actualizaStockBodega/${codigoBarra}`, {cantidad: parseInt(cantidad), nomBodega: this.nomBodega}, config)\r\n                                .then(res => {\r\n                                    this.recibirDireccion(codigoBarra, cantidad);\r\n                                })\r\n                                .catch(e => {\r\n                                    var mensaje = 'Posible error del sistema';\r\n                                    Swal.fire({\r\n                                    icon: 'error',\r\n                                    title: 'Oops...',\r\n                                    text: 'No se ha logrado traspasar los stocks',\r\n                                    footer: mensaje\r\n                                    })\r\n                                })\r\n                    }\r\n                })\r\n            }else{\r\n                this.alerta('danger', 'El stock actual para este producto en la bodega es 0')\r\n            }\r\n        },\r\n        //Función que permite actualizar el stock de un producto en la dirección Regional\r\n        recibirDireccion(codigoBarra, cantidad){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.put(`api/actualizaStockmas/${codigoBarra}`, {cantidad: cantidad}, config)\r\n                    .then(res => {\r\n                        Swal.fire(\r\n                            'Se ha realizado un traspaso de stock a Dirección Regional',\r\n                            'Seleccione Ok para continuar',\r\n                            'success'\r\n                        )\r\n                        this.actualizarStocksProductoBodega(codigoBarra, cantidad)\r\n                    })\r\n                    .catch(e => {\r\n                        var mensaje = 'Posible error del sistema';\r\n                        Swal.fire({\r\n                        icon: 'error',\r\n                        title: 'Oops...',\r\n                        text: 'No se ha logrado recibir el stock en dirección regional',\r\n                        footer: mensaje\r\n                        })\r\n                    })\r\n        },\r\n        //Función que actualiza los stock en la vista de la página\r\n        actualizarStocksProductoBodega(codigoBarra, cantidad){\r\n            const index = this.enviar.findIndex(item => item.codigoBarra == codigoBarra);\r\n            this.enviar[index].stockBodega = this.enviar[index].stockBodega - parseInt(cantidad)\r\n            this.enviar[index].stock = this.enviar[index].stock + parseInt(cantidad)\r\n        },\r\n        //FUNCIÓN QUE BUSCA UN CODIGO DE LA VISTA DE AGREGAR PRODUCTO A UNA BODEGA \r\n        buscarCodigoAGREGADO(){\r\n            const posProd = this.productosAGREGAR.findIndex(item => item.codigoBarra == this.productoAGREGADO)\r\n            if(posProd !== -1){\r\n                this.nombreProductoAGREGADO = this.productosAGREGAR[posProd].nomProducto\r\n                this.codigoAGREGAR = this.productosAGREGAR[posProd].codigoBarra;\r\n            }\r\n        },\r\n        //Funcion que PERMITE AGREGAR un Producto a una Bodega reciente.\r\n        agregarPRODUCTOBODEGA(){\r\n            let config = {\r\n                headers: {\r\n                    token: this.token\r\n                }\r\n            }\r\n            this.axios.post('api/agregaProductoBodega', {stockBodega: this.stockAGREGADO, stockCritico: this.stockCriticoAGREGADO, nomBodega: this.nomBodega, codigoBarra: this.codigoAGREGAR}, config)\r\n                .then(res => {\r\n                if(!res.data.sqlMessage){\r\n                    Swal.fire(\r\n                        'Se ha generado un nuevo Producto',\r\n                        'Seleccione Ok para continuar',\r\n                        'success'\r\n                    )\r\n                }else{\r\n                    Swal.fire({\r\n                    icon: 'error',\r\n                    title: 'Oops...',\r\n                    text: 'Codigo ya existente en bodega',\r\n                    footer: 'Error con el ingreso del Producto'\r\n                    })\r\n                }\r\n                })\r\n                .catch(e => {\r\n                    Swal.fire({\r\n                        icon: 'error',\r\n                        title: 'Oops...',\r\n                        text: 'No se ha creado este nuevo tipo',\r\n                        footer: 'Posible error del sistema'\r\n                    })\r\n                })\r\n        },\r\n        //Funciones de las alertas\r\n        countDownChanged(dismissCountDown) {\r\n            this.dismissCountDown = dismissCountDown\r\n        },\r\n        showAlert() {\r\n            this.dismissCountDown = this.dismissSecs\r\n        },\r\n        alerta(color, texto){\r\n            this.mensaje.color = color;\r\n            this.mensaje.texto = texto;\r\n            this.showAlert();\r\n        },\r\n    },\r\n    async mounted(){\r\n      await $('#bodegas').DataTable()\r\n      await $('#ordenes').DataTable()\r\n      await $('#detalleOrden').DataTable()\r\n      await $('#enviar').DataTable()\r\n    },\r\n    watch: {\r\n      bodegas(val) {\r\n        if(this.pestaña === 'bodegas'){\r\n          $('#bodegas').DataTable().destroy();\r\n          this.$nextTick(()=> {\r\n            $('#bodegas').DataTable()\r\n          });\r\n        }\r\n      },\r\n      ordenes(val) {\r\n        if(this.pestaña === 'ordenes'){\r\n          $('#ordenes').DataTable().destroy();\r\n          this.$nextTick(()=> {\r\n            $('#ordenes').DataTable()\r\n          });\r\n        }\r\n      },\r\n      detalleOrden(val) {\r\n        if(this.pestaña === 'detalleOrden'){\r\n          $('#detalleOrden').DataTable().destroy();\r\n          this.$nextTick(()=> {\r\n            $('#detalleOrden').DataTable()\r\n          });\r\n        }\r\n      },\r\n      enviar(val) {\r\n        if(this.pestaña === 'enviar'){\r\n          $('#enviar').DataTable().destroy();\r\n          this.$nextTick(()=> {\r\n            $('#enviar').DataTable()\r\n          });\r\n        }\r\n      }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n    body{\r\n        background-color: #eee;\r\n    }\r\n\r\n    .texto{\r\n        text-align: center;\r\n    }\r\n\r\n    .imagen{\r\n        width: 50%;\r\n    }\r\n    .boton{\r\n        margin: 20px;\r\n        width: 90%;\r\n        border-radius: 12px !important;\r\n        border-color: black !important;\r\n    }\r\n</style>"]}]}